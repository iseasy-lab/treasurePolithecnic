function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}/*! For license information please see 14-es2015.69986efeeb4579ba1af3.js.LICENSE.txt */(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{A0Lk:function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function o(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,n){function i(){var e=a;o(e)&&e.a.parentNode&&n(e.g)}var a=e;t(e.b,i),t(e.c,i),o(e)}function s(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var r=null,c=null,u=null,l=null;function h(){return null===l&&(l=!!document.fonts),l}function d(){if(null===u){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}u=""!==e.style.font}return u}function p(e,t){return[e.style,e.weight,d()?e.stretch:"","100px",t].join(" ")}s.prototype.load=function(e,t){var o=this,s=e||"BESbswy",u=0,l=t||3e3,d=(new Date).getTime();return new Promise((function(e,t){if(h()&&!function(){if(null===c)if(h()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);c=!!e&&603>parseInt(e[1],10)}else c=!1;return c}()){var m=new Promise((function(e,t){!function n(){(new Date).getTime()-d>=l?t(Error(l+"ms timeout exceeded")):document.fonts.load(p(o,'"'+o.family+'"'),s).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),g=new Promise((function(e,t){u=setTimeout((function(){t(Error(l+"ms timeout exceeded"))}),l)}));Promise.race([g,m]).then((function(){clearTimeout(u),e(o)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=f&&-1!=b||-1!=f&&-1!=y||-1!=b&&-1!=y)&&((t=f!=b&&f!=y&&b!=y)||(null===r&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),r=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=r&&(f==v&&b==v&&y==v||f==_&&b==_&&y==_||f==w&&b==w&&y==w)),t=!t),t&&(k.parentNode&&k.parentNode.removeChild(k),clearTimeout(u),e(o))}var h=new n(s),m=new n(s),g=new n(s),f=-1,b=-1,y=-1,v=-1,_=-1,w=-1,k=document.createElement("div");k.dir="ltr",i(h,p(o,"sans-serif")),i(m,p(o,"serif")),i(g,p(o,"monospace")),k.appendChild(h.a),k.appendChild(m.a),k.appendChild(g.a),document.body.appendChild(k),v=h.a.offsetWidth,_=m.a.offsetWidth,w=g.a.offsetWidth,function e(){if((new Date).getTime()-d>=l)k.parentNode&&k.parentNode.removeChild(k),t(Error(l+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(f=h.a.offsetWidth,b=m.a.offsetWidth,y=g.a.offsetWidth,c()),u=setTimeout(e,50)}}(),a(h,(function(e){f=e,c()})),i(h,p(o,'"'+o.family+'",sans-serif')),a(m,(function(e){b=e,c()})),i(m,p(o,'"'+o.family+'",serif')),a(g,(function(e){y=e,c()})),i(g,p(o,'"'+o.family+'",monospace'))}))}))},e.exports=s}()},L6id:function(e,t,n){"use strict";n.r(t);var i=n("8Y7J"),o=function e(){_classCallCheck(this,e)},a=n("pMnS"),s=n("oBZk"),r=n("ZZ/e");function c(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},WindowsIE:function(){return navigator.userAgent.match(/IEMobile/i)},WindowsPhone:function(){return navigator.userAgent.match(/windows phone/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.WindowsIE()||e.WindowsPhone()}};return null!==e.any()}var u="EL TESORO DE SER POLIT\xc9CNICO",l="url(assets/game_assets/boot-load-assets/cursors-assets/cursor-hand.cur), pointer",h={scene:null,returnButton:null,registerElement:null,loginElement:null},d={ethicsQuestions:[],ethicsQuestionsIds:[],historyQuestions:[],historyQuestionsIds:[]},p={firebaseApp:null},m={status:"bootLoad",currentScene:"BootLoadScene",accessType:"login",conectionStatus:!1,isDeviceMobile:c(),showGamepad:!0,gameMusic:null,isMusicPlaying:!1,isSoundMuted:!0,loadFeedbackIds:[]},g={scoreTableFirebaseConection:null,topBestPlayers:[],bestPlayerQuery:null,topBestMemberof:[],bestMemberOfQuery:null,topBestDependence:[],bestDependenceQuery:null},f={"quit-minigame-message":{message:"Seguro quieres salir del minijuego. No olvides que debes completar todos los minijuegos para obtener el Tesoro Polit\xe9cnico."},"reset-minigame-message":{message:"Seguro quieres reiniciar el minijuego. No olvides que se perder\xe1n los puntos de este minijuego."},"retry-minigame-message":{message:"Seguro quieres reintentar el minijuego. No olvides que se perder\xe1n los puntos ganados en el minijuego."},"update-user-data-message":{message:"Seguro quieres actualizar los datos registrados en el juego."},"account-created-message":{message:"A continuaci\xf3n escoge un avatar para tu perfil.\n\nNOTA: Si no se selecciona un avatar se asignar\xe1 por defecto a tu cuenta el avatar CHICO."}},b={slidingPuzzle:null},y={objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:770,objectPositionX:683,objectPositionY:384},v={objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:100,objectPositionX:683,objectPositionY:50},_={type:"image",element:"background",assetName:"base-scene-background",name:"base-scene-background",scale:y},w={type:"text",element:"title",name:"game-tile",content:u,style:{fontFamily:"Wendy One",color:"#DF0013",align:"center",stroke:"#FFFFFF",strokeThickness:30,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:734,objectHeight:236,objectPositionX:683,objectPositionY:175}},k={type:"interactiveObject",element:"bottom-title-button",assetName:"score-icon-background",content:"PUNTUACIONES",name:"score-button",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:150,objectHeight:150,objectPositionX:130,objectPositionY:642}},j={type:"interactiveObject",element:"bottom-title-button",assetName:"info-icon-background",content:"INFORMACI\xd3N",name:"info-button",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:130,objectHeight:125,objectPositionX:1258,objectPositionY:490}},S={type:"interactiveObject",element:"bottom-title-button",assetName:"home-icon-background",content:"INICIO",name:"home-button",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:125,objectPositionX:108,objectPositionY:91}},O={type:"text",element:"title",content:"POLIPUNTOS: 0",name:"total-score-title",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"right",stroke:"#FFFFFF",strokeThickness:14,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:450,objectHeight:50,objectPositionX:1315,objectPositionY:36},originX:1,originY:0},P={type:"interactiveObject",element:"bottom-title-button",assetName:"assistant-icon-background",name:"assistant-button",content:"AYUDA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:140,objectPositionX:1258,objectPositionY:196}},E={type:"interactiveObject",element:"bottom-title-button",assetName:"settings-icon-background",content:"AJUSTES",name:"settings-button",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:125,objectPositionX:1258,objectPositionY:654}},I={type:"interactiveObject",element:"button",assetName:"return-icon-background",name:"return-button",content:"ATR\xc1S",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:146,objectHeight:76,objectPositionX:127,objectPositionY:50}},C={type:"interactiveObject",element:"bottom-title-button",assetName:"inventory-icon-background",name:"inventory-butto",content:"POLIMOCHILA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:125,objectPositionX:1258,objectPositionY:350}},N={type:"interactiveObject",element:"bottom-title-button",assetName:"close-button-background",name:"close-button",content:"CERRAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"25",strokeThickness:10,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:90,objectHeight:110,objectPositionX:1193,objectPositionY:108}},T=[_,w,{type:"text",element:"note",name:"scene-note",content:"INGRESA COMO:",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:350,objectHeight:40,objectPositionX:683,objectPositionY:340}},{type:"interactiveObject",element:"simple-button",assetName:"epn-button-background",name:"epn-button",content:"MIEMBRO EPN",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:615,objectHeight:140,objectPositionX:683,objectPositionY:460}},{type:"interactiveObject",element:"simple-button",assetName:"guest-button-background",name:"guest-button",content:"INVITADO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:140,objectPositionX:683,objectPositionY:625}},k,j,{type:"interactiveObject",element:"bottom-title-button",assetName:"on-sound-icon-background",name:"sound-button",content:"SONIDO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:125,objectPositionX:1258,objectPositionY:654}}];function R(e,t){var n=e.sys.canvas.width/1366,i=e.sys.canvas.height/768;return{objectWidthRatio:n,objectHeightRatio:i,objectWidth:Math.trunc(t.objectWidth*n),objectHeight:Math.trunc(t.objectHeight*i),objectPositionX:Math.trunc(t.objectPositionX*n),objectPositionY:Math.trunc(t.objectPositionY*i)}}function F(e,t){var n,i,o,a,s,r,c=JSON.parse(JSON.stringify(t));!0!==c.scale.keepTextScale&&(c.style.fontSize=(n=e.sys.canvas.width,i=e.sys.canvas.height,o=parseInt(c.style.fontSize),a=Math.hypot(1366,768),s=Math.hypot(i,n),(r=Math.trunc(o*(s/a)))-Math.trunc(.1*r)+"px"));var u=new Phaser.GameObjects.Text(e,c.scale.objectPositionX,c.scale.objectPositionY,c.content,c.style);return u.setWordWrapWidth(c.scale.objectWidth),u.setOrigin(c.originX,c.originY),u}function A(e,t){var n=new Phaser.GameObjects.Image(e,t.scale.objectPositionX,t.scale.objectPositionY,t.assetName);return n.displayHeight=t.scale.objectHeight,n.displayWidth=t.scale.objectWidth,n.setOrigin(t.originX,t.originY),n}function D(e,t,n,i){e.texture.key!==t&&e.setTexture(t),e.displayWidth=n,e.displayHeight=i}var x=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).scene=e,o.buttonSpecifications=i,o.generateButton(),o}return _createClass(n,[{key:"generateButton",value:function(){this.buttonBackground=A(this.scene,this.buttonSpecifications),this.buttonBackground.setPosition(0,0),this.buttonBackground.setName("button-Background"),this.buttonBackground.setDisplaySize(this.buttonSpecifications.scale.objectWidth,this.buttonSpecifications.scale.objectHeight);var e=JSON.parse(JSON.stringify(this.buttonSpecifications));e.scale.objectHeight=1.9*parseInt(e.style.fontSize),e.scale.objectWidth=.95*this.buttonSpecifications.scale.objectWidth,this.buttonText=F(this.scene,e),this.buttonText.setPosition(0,this.calculatePositionYofButtonText()),this.buttonText.setName("button-text"),this.add([this.buttonBackground,this.buttonText]),this.setSize(this.buttonSpecifications.scale.objectWidth,this.buttonSpecifications.scale.objectHeight)}},{key:"calculatePositionYofButtonText",value:function(){var e,t="bottom-title-button"===this.buttonSpecifications.element;return"simple-button"===this.buttonSpecifications.element&&(e=.1*-this.buttonSpecifications.scale.objectHeight),"button"===this.buttonSpecifications.element&&(e=0),"top-title-button"===this.buttonSpecifications.element&&(e=-this.buttonSpecifications.scale.objectHeight/2,this.buttonText.setOrigin(.5,0),this.buttonBackground.y+=this.buttonText.height/2,this.buttonBackground.setDisplaySize(this.buttonSpecifications.scale.objectWidth,this.buttonSpecifications.scale.objectHeight-this.buttonText.height)),t&&(e=.51*this.buttonSpecifications.scale.objectHeight,this.buttonText.setOrigin(.5,1),this.buttonBackground.y-=this.buttonText.height/2,this.buttonBackground.setDisplaySize(this.buttonSpecifications.scale.objectWidth,this.buttonSpecifications.scale.objectHeight-this.buttonText.height)),e}}]),n}(),B={"Administrativo EPN":{dependenceId:"administrativo_epn",dependenceName:"Administraci\xf3n de la EPN",dependenceAbbreviation:"Adtvo EPN"},Ciencias:{dependenceId:"ciencias",dependenceName:"Facultad de Ciencias",dependenceAbbreviation:"FC"},"Ciencias Administrativas":{dependenceId:"ciencias_administrativas",dependenceName:"Facultad de Ciencias Administrativas",dependenceAbbreviation:"FCA"},ESFOT:{dependenceId:"esfot",dependenceName:"Escuela de Formaci\xf3n de Tecn\xf3logos",dependenceAbbreviation:"ESFOT"},"Formaci\xf3n B\xe1sica":{dependenceId:"icb_epn",dependenceName:"Formaci\xf3n B\xe1sica",dependenceAbbreviation:"ICB"},"Geolog\xeda y Petroleos":{dependenceId:"gelogia_petroleos",dependenceName:"Facultad de Geolog\xeda y Petroleos",dependenceAbbreviation:"FGP"},"Ingenier\xeda Civil y Ambiental":{dependenceId:"civil_ambiental",dependenceName:"Facultad de Ingenier\xeda Civil y Ambiental",dependenceAbbreviation:"FICA"},"Ingenier\xeda de Sistemas":{dependenceId:"sistemas",dependenceName:"Facultad de Ingenier\xeda de Sistemas",dependenceAbbreviation:"FIS"},"Ingenier\xeda El\xe9ctrica y Electr\xf3nica":{dependenceId:"electrica_electronica",dependenceName:"Facultad de Ingenier\xeda El\xe9ctrica y Electr\xf3nica",dependenceAbbreviation:"FIEE"},"Ingenier\xeda Mec\xe1nica":{dependenceId:"mecanica",dependenceName:"Facultad de Ingenier\xeda Mec\xe1nica",dependenceAbbreviation:"FIM"},"Ingenier\xeda Qu\xedmica y Agroindustria":{dependenceId:"quimica_agroindustria",dependenceName:"Facultad de Ingenier\xeda Qu\xedmica y Agroindustria",dependenceAbbreviation:"FIQA"}},H=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,0,0)).scoreTableSpecifications=JSON.parse(JSON.stringify(i)),o.setSize(o.scoreTableSpecifications.scale.objectWidth,o.scoreTableSpecifications.scale.objectHeight),o.setPosition(o.scoreTableSpecifications.scale.objectPositionX,o.scoreTableSpecifications.scale.objectPositionY),"score-table-top-5"===o.scoreTableSpecifications.element?(o.rowsNumber=5,o.generateScoreTable(5)):"score-table-top-10"===o.scoreTableSpecifications.element&&(o.rowsNumber=10,o.generateScoreTable(10),o.scoreTableBackground.setAlpha(.6)),o.scoreTableBackground.displayHeight*=1.04,o}return _createClass(n,[{key:"generateScoreTable",value:function(e){this.scoreTableBackground=A(this.scene,this.scoreTableSpecifications),this.scoreTableBackground.setPosition(0,0),this.scoreTableBackground.setAlpha(.5);var t=JSON.parse(JSON.stringify(this.scoreTableSpecifications.scale));t.objectWidth*=.95,t.objectHeight*=.99,this.scoreItems=new Map;var n=t.objectWidth,i=t.objectHeight/(e+1.33),o=-t.objectHeight/2+.6*i,a=JSON.parse(JSON.stringify(this.scoreTableSpecifications));a.style.fontSize=.55*i+"px",a.scale.objectPositionX=0,a.scale.objectPositionY=o,a.scale.objectWidth=n,a.scale.objectHeight=2*i,this.scoreTableTitle=F(this.scene,a),o+=1.25*i;var s=JSON.parse(JSON.stringify(this.scoreTableSpecifications));s.scale.objectPositionX=0,s.scale.objectPositionY=0,s.style.fontSize=.4*i+"px",s.style.color="#000000",s.scale.objectWidth=n,s.scale.objectHeight=.95*i;var r=.09*s.scale.objectWidth,c=-s.scale.objectWidth/2+r,u=.6*s.scale.objectWidth,l=.9*c,h=.22*s.scale.objectWidth,d=l+u+h;this.add([this.scoreTableBackground,this.scoreTableTitle]);for(var p=0;p<e;p++){var m=o+i*p,g=JSON.parse(JSON.stringify(s));g.content=p+1+"\xb0 ",g.scale.objectWidth=r,g.scale.objectPositionX=c,g.style.align="right";var f=JSON.parse(JSON.stringify(s));f.content="-",f.scale.objectWidth=u,f.scale.objectPositionX=l,f.style.align="justify";var b=JSON.parse(JSON.stringify(s));b.content="-",b.scale.objectWidth=h,b.scale.objectPositionX=d,b.style.align="right";var y=this.generateRowScore(g,f,b);y.itemContainer.setSize(s.scale.objectWidth,s.scale.objectHeight),y.itemContainer.y=m,this.add(y.itemContainer),this.scoreItems.set(p+1,y)}}},{key:"generateRowScore",value:function(e,t,n){var i=F(this.scene,e);i.setOrigin(1,.5);var o=F(this.scene,t);o.setOrigin(0,.5);var a=F(this.scene,n);return a.setOrigin(1,.5),{itemNumber:i,itemName:o,itemScore:a,itemContainer:new Phaser.GameObjects.Container(this.scene,0,0,[i,o,a])}}},{key:"updatePlayersScoreTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.scoreTableTitle.setText(t),""!==e&&(this.scoreTableTitle.text+="("+B[e].dependenceAbbreviation+")"),null!=n){this.scoreTableBackground.clearAlpha();for(var i=0;i<n.length;i++){var o=this.scoreItems.get(i+1);if(null!=o&&null!=n[i]){var a=n[i];o.itemName.setText(a.player_name+" ("+B[a.player_memberOf].dependenceAbbreviation+")"),o.itemScore.setText(""+a.player_totalScore)}}}}},{key:"updateDependenceScoreTable",value:function(e,t){this.scoreTableTitle.setText(e),this.scoreTableBackground.clearAlpha();for(var n=0;n<this.rowsNumber;n++){var i=this.scoreItems.get(n+1);if(null!=i&&null!=t[n]){var o=t[n];i.itemName.setText(o.dependence_name+" ("+o.dependence_abbreviation+")"),i.itemScore.setText(""+o.dependence_totalScore)}}}}]),n}(),W={type:"image",element:"background",assetName:"boy-avatar-icon",name:"sumary-profile-avatar-icon",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:140,objectHeight:140,objectPositionX:-217,objectPositionY:0}},M={type:"text",element:"name",name:"sumary-profile-player-name",content:"JUGADOR INVITADO",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:45,objectPositionX:60,objectPositionY:-47}},L={type:"text",element:"name",name:"sumary-profile-total-score",content:"POLIPUNTOS: 0",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:40,objectPositionX:60,objectPositionY:-2}},q={type:"interactiveObject",element:"simple-button",assetName:"view-more-button-background",name:"view-more-button",content:"VER PERFIL",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:180,objectHeight:45,objectPositionX:60,objectPositionY:42}},G={type:"image",element:"background",assetName:"boy-avatar-icon",name:"detailed-profile-avatar-icon",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:160,objectHeight:160,objectPositionX:-190,objectPositionY:0}},U={type:"text",element:"name",name:"detailed-profile-player-name",content:"JUGADOR INVITADO",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"left",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:350,objectHeight:35,objectPositionX:95,objectPositionY:-57}},z={type:"text",element:"name",name:"detailed-profile-email",content:"invitado@epn.edu.ec",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"left",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:350,objectHeight:35,objectPositionX:95,objectPositionY:-18}},Y={type:"text",element:"name",name:"detailed-profile-memberOf",content:"-",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"left",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:350,objectHeight:35,objectPositionX:95,objectPositionY:22}},X={type:"text",element:"name",name:"detailed-profile-relationship",content:"Invitado EPN",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"left",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:350,objectHeight:35,objectPositionX:95,objectPositionY:61}},V=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,0,0)).profileCardSpecifications=JSON.parse(JSON.stringify(i)),o.setSize(o.profileCardSpecifications.scale.objectWidth,o.profileCardSpecifications.scale.objectHeight),o.setPosition(o.profileCardSpecifications.scale.objectPositionX,o.profileCardSpecifications.scale.objectPositionY),o.generateProfileCard(),o}return _createClass(n,[{key:"generateProfileCard",value:function(){"summary-profile-card"===this.profileCardSpecifications.name?this.generateSummaryProfileCard():"detailed-profile-card"===this.profileCardSpecifications.name&&this.generateDetailedProfileCard()}},{key:"generateSummaryProfileCard",value:function(){var e=A(this.scene,this.profileCardSpecifications);e.setPosition(0,0),this.add(e);var t=JSON.parse(JSON.stringify(W));t.scale=R(this.scene,t.scale),this.playerAvatarIcon=A(this.scene,t),this.playerAvatarIcon.setName("-icon"),this.add(this.playerAvatarIcon);var n=JSON.parse(JSON.stringify(M));n.scale=R(this.scene,n.scale),this.playerName=F(this.scene,n),this.add(this.playerName);var i=JSON.parse(JSON.stringify(L));i.scale=R(this.scene,i.scale),this.playerTotalScore=F(this.scene,i),this.add(this.playerTotalScore);var o=JSON.parse(JSON.stringify(q));o.scale=R(this.scene,o.scale),this.viewMoreButton=new x(this.scene,o),this.add(this.viewMoreButton)}},{key:"generateDetailedProfileCard",value:function(){var e=JSON.parse(JSON.stringify(G));e.scale=R(this.scene,e.scale),this.playerAvatarIcon=A(this.scene,e),this.playerAvatarIcon.setName("-icon"),this.add(this.playerAvatarIcon);var t=JSON.parse(JSON.stringify(U));t.scale=R(this.scene,t.scale),this.playerName=F(this.scene,t),this.add(this.playerName);var n=JSON.parse(JSON.stringify(z));n.scale=R(this.scene,n.scale),this.playerEmail=F(this.scene,n),this.add(this.playerEmail);var i=JSON.parse(JSON.stringify(Y));i.scale=R(this.scene,i.scale),this.playerMemberOf=F(this.scene,i),this.add(this.playerMemberOf);var o=JSON.parse(JSON.stringify(X));o.scale=R(this.scene,o.scale),this.playerRelationship=F(this.scene,o),this.add(this.playerRelationship)}},{key:"getViewMoreButtonComponent",value:function(){return this.viewMoreButton}},{key:"updateProfilCardData",value:function(e){void 0!==this.playerName&&this.playerName.setText(e.player_name.toUpperCase()+" "+e.player_lastName.toUpperCase()),void 0!==this.playerEmail&&this.playerEmail.setText(e.player_emailAddress),void 0!==this.playerMemberOf&&this.playerMemberOf.setText(e.player_memberOf.toUpperCase()),void 0!==this.playerRelationship&&this.playerRelationship.setText(e.player_relationshipEpn),void 0!==this.playerAvatarIcon&&D(this.playerAvatarIcon,e.player_avatarId+this.playerAvatarIcon.name,this.playerAvatarIcon.displayWidth,this.playerAvatarIcon.displayHeight),void 0!==this.playerTotalScore&&this.playerTotalScore.setText("POLIPUNTOS: "+e.player_totalScore)}}]),n}(),J={type:"container",element:"data-container",name:"data-container",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:180,objectHeight:140,objectPositionX:0,objectPositionY:-10}},Q={type:"text",element:"title",name:"map-area-name",content:"",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",fontSize:"20",strokeThickness:8,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:180,objectHeight:50,objectPositionX:0,objectPositionY:30}},K={type:"container",element:"stars-container",name:"stars-container",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:180,objectHeight:35,objectPositionX:0,objectPositionY:10}},$={type:"image",element:"background",name:"area-star",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:40,objectHeight:35,objectPositionX:0,objectPositionY:0}},Z={type:"text",element:"title",name:"map-area-score",content:"",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",fontSize:"20",strokeThickness:8,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:158,objectHeight:22,objectPositionX:-3,objectPositionY:0},originX:.5,originY:0},ee={type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"play-minigame-button",content:"JUGAR",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:140,objectHeight:50,objectPositionX:0,objectPositionY:0}},te=new Map;te.set("area-1",{isLocked:!0}),te.set("area-2",{isLocked:!1}),te.set("area-3",{isLocked:!0}),te.set("area-4",{isLocked:!0}),te.set("area-5",{isLocked:!0}),te.set("area-6",{isLocked:!0});var ne=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).scene=e,o.starsNumber=0,o.areaSpecifications=i,o.generateMapArea(),o}return _createClass(n,[{key:"generateMapArea",value:function(){this.areaBackground=A(this.scene,this.areaSpecifications),this.areaBackground.setPosition(0,0),this.areaBackground.setName("map-area-background"),this.areaBackground.setDisplaySize(this.areaSpecifications.scale.objectWidth,this.areaSpecifications.scale.objectHeight);var e=te.get(this.areaSpecifications.name);if(this.areaData=e.isLocked?this.generateLockedBackground():this.generateMapAreaData(),"area-6"===this.areaSpecifications.name&&(e.isLocked?this.areaData.y-=.53*this.areaData.height:(this.areaData.y-=.45*this.areaData.height,this.areaData.angle=-23)),"area-5"===this.areaSpecifications.name&&(this.areaData.x-=.05*this.areaData.width),"area-4"===this.areaSpecifications.name&&(this.areaData.x+=.4*this.areaData.width),"area-2"===this.areaSpecifications.name&&(this.areaData.y-=.2*this.areaData.width,this.areaData.x+=.05*this.areaData.width),"area-3"===this.areaSpecifications.name&&(this.areaData.x+=.1*this.areaData.width,this.areaData.y+=.15*this.areaData.height),this.add([this.areaBackground,this.areaData]),!e.isLocked){var t=JSON.parse(JSON.stringify(ee));t.scale=R(this.scene,t.scale),t.content="VISITAR";var n=new x(this.scene,t);n.x-=.31*n.width,n.y=this.areaData.y+this.areaData.height/2+n.height,n.setName("playAreaButton"),this.add(n)}this.setSize(this.areaSpecifications.scale.objectWidth,this.areaSpecifications.scale.objectHeight)}},{key:"generateLockedBackground",value:function(){var e=JSON.parse(JSON.stringify(J));e.scale=R(this.scene,e.scale),e.assetName="locked-icon-background",e.scale.objectWidth*=.6,e.scale.objectHeight*=.78;var t=A(this.scene,e);t.setPosition(0,0);var n=new Phaser.GameObjects.Container(this.scene,e.scale.objectPositionX,e.scale.objectPositionY,[t]);return n.setSize(e.scale.objectWidth,e.scale.objectHeight),n}},{key:"generateMapAreaData",value:function(){var e=JSON.parse(JSON.stringify(J));e.scale=R(this.scene,e.scale);var t=JSON.parse(JSON.stringify(Q));t.scale=R(this.scene,t.scale),t.content=this.areaSpecifications.content;var n=JSON.parse(JSON.stringify(K));n.scale=R(this.scene,n.scale);var i=JSON.parse(JSON.stringify(Z));i.scale=R(this.scene,i.scale),i.content="PUNTAJE: 0000";var o=F(this.scene,t);o.y-=e.scale.objectHeight/2;var a=this.generateAreaStar(n);a.setName("areaStars");var s=F(this.scene,i);s.y=a.y+(a.height+s.height)/2,s.setName("areaScore");var r=new Phaser.GameObjects.Container(this.scene,e.scale.objectPositionX,e.scale.objectPositionY,[o,a,s]);return r.setSize(e.scale.objectWidth,e.scale.objectHeight),r}},{key:"generateAreaStar",value:function(e){var t=new Phaser.GameObjects.Container(this.scene,e.scale.objectPositionX,e.scale.objectPositionY),n=e.scale.objectWidth/4,i=-n,o=JSON.parse(JSON.stringify($));o.scale=R(this.scene,o.scale);for(var a=!0,s=0;s<3;s++){this.starsNumber<=0&&(a=!1),o.assetName=a?"star-icon-obtained-background":"star-icon-not-obtained-background";var r=A(this.scene,o);r.x=i+n*s,t.add(r),this.starsNumber--}return t.setSize(e.scale.objectWidth,e.scale.objectHeight),t}},{key:"updateAreaScore",value:function(e){this.areaData.getByName("areaScore").setText("PUNTAJE: "+e)}},{key:"updateAreaStars",value:function(e){var t=this.areaData.getByName("areaStars");if(t){this.starsNumber=e;var n=JSON.parse(JSON.stringify(K));n.scale=R(this.scene,n.scale);var i=this.generateAreaStar(n);this.remove(t),t.destroy(),this.areaData.add(i)}}}]),n}(),ie={type:"container",element:"stars-container",name:"stars-container",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:40,objectPositionX:0,objectPositionY:-42}},oe={type:"image",element:"background",name:"area-star",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:25,objectHeight:25,objectPositionX:0,objectPositionY:0}},ae={type:"image",element:"pointer",name:"pointer-location",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:30,objectHeight:30,objectPositionX:0,objectPositionY:0}},se={type:"text",element:"title",name:"location-name",content:"",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:8,fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:40,objectPositionX:0,objectPositionY:40},originX:.5,originY:.5},re=new Map;re.set("area-1",{isLocked:!0}),re.set("area-2",{isLocked:!1}),re.set("area-3",{isLocked:!0}),re.set("area-4",{isLocked:!0}),re.set("area-5",{isLocked:!0}),re.set("area-6",{isLocked:!0});var ce=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).scene=e,o.starsNumber=0,o.locationSpecifications=i,o.setName(o.locationSpecifications.name),o.generateMapArea(),o}return _createClass(n,[{key:"generateMapArea",value:function(){var e=JSON.parse(JSON.stringify(ae));e.assetName=this.locationSpecifications.assetName,e.scale=R(this.scene,e.scale),"location-card-background"===this.locationSpecifications.assetName&&(e.scale.objectWidth=this.locationSpecifications.scale.objectWidth,e.scale.objectHeight=this.locationSpecifications.scale.objectHeight);var t=JSON.parse(JSON.stringify(se));t.scale=R(this.scene,t.scale),t.content=this.locationSpecifications.content;var n=JSON.parse(JSON.stringify(ie));n.scale=R(this.scene,n.scale),this.locationPointer=A(this.scene,e),this.locationName=F(this.scene,t),this.locationStarsContainer=this.generateAreaStar(n),this.locationStarsContainer.setName("stars-container"),this.add([this.locationPointer,this.locationName,this.locationStarsContainer]),this.setSize(this.locationSpecifications.scale.objectWidth,this.locationSpecifications.scale.objectHeight)}},{key:"generateAreaStar",value:function(e){var t=new Phaser.GameObjects.Container(this.scene,e.scale.objectPositionX,e.scale.objectPositionY),n=e.scale.objectWidth/3,i=-n,o=JSON.parse(JSON.stringify(oe));o.scale=R(this.scene,o.scale);for(var a=!0,s=0;s<3;s++){this.starsNumber<=0&&(a=!1),o.assetName=a?"star-icon-obtained-background":"star-icon-not-obtained-background";var r=A(this.scene,o);r.x=i+n*s,1!=s&&(r.y+=o.scale.objectHeight/3),t.add(r),this.starsNumber--}return t.setSize(e.scale.objectWidth,e.scale.objectHeight),t}},{key:"updateLocationStars",value:function(e){this.starsNumber=e;var t=JSON.parse(JSON.stringify(ie));t.scale=R(this.scene,t.scale);var n=this.generateAreaStar(t);this.remove(this.locationStarsContainer),this.locationStarsContainer.destroy(),this.locationStarsContainer=n,this.add(this.locationStarsContainer)}}]),n}(),ue=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,0,0)).scene=e,o.starsNumber=0,o.locationBoxSpecifications=JSON.parse(JSON.stringify(i)),o.setPosition(o.locationBoxSpecifications.scale.objectPositionX,o.locationBoxSpecifications.scale.objectPositionY),o.generateLocationBox(),o}return _createClass(n,[{key:"generateLocationBox",value:function(){this.locationBackground=A(this.scene,this.locationBoxSpecifications),this.locationBackground.setName("button-Background"),this.locationBackground.displayWidth=1.2*this.locationBoxSpecifications.scale.objectWidth,this.locationBackground.displayHeight=.8*this.locationBoxSpecifications.scale.objectHeight,this.locationBackground.setOrigin(.5,0),this.locationBackground.setPosition(0,.55*-this.locationBoxSpecifications.scale.objectHeight),this.locationStarsContainer=this.generateStarContainer(0,-this.locationBoxSpecifications.scale.objectHeight/4,.9*this.locationBoxSpecifications.scale.objectWidth,3*this.locationBoxSpecifications.scale.objectHeight/8),this.locationStarsContainer.setName("stars-container"),this.locationScore=this.generateLocationScoreText(),this.locationName=this.generateLocationNameText(),this.setName(this.locationBoxSpecifications.name),this.add([this.locationBackground,this.locationStarsContainer,this.locationScore,this.locationName]),this.setSize(this.locationBoxSpecifications.scale.objectWidth,this.locationBoxSpecifications.scale.objectHeight)}},{key:"generateStarContainer",value:function(e,t,n,i){var o=new Phaser.GameObjects.Container(this.scene,e,t),a=n/3,s=-a,r=JSON.parse(JSON.stringify(this.locationBoxSpecifications));r.scale.objectPositionX=0,r.scale.objectPositionY=.25*-i,r.scale.objectWidth=.9*a,r.scale.objectHeight=4*i/7;for(var c=!0,u=0;u<3;u++){this.starsNumber<=0&&(c=!1),r.assetName=c?"star-icon-obtained-background":"star-icon-not-obtained-background";var l=A(this.scene,r);l.x=s+a*u,1!=u&&(l.y+=r.scale.objectHeight/3),o.add(l),this.starsNumber--}return o.setSize(n,i),o}},{key:"generateLocationScoreText",value:function(){var e=JSON.parse(JSON.stringify(this.locationBoxSpecifications));return e.style.fontSize=Math.trunc(.8*parseInt(e.style.fontSize))+"px",e.scale.objectWidth*=.9,e.scale.objectHeight=this.locationBoxSpecifications.scale.objectHeight/4,e.scale.objectPositionX=0,e.scale.objectPositionY=this.locationBoxSpecifications.scale.objectHeight/16,e.originX=.5,e.originX=.5,e.content="PUNTAJE: "+this.locationScore,e.style.color="#FFFFFF",e.style.strokeThickness=0,F(this.scene,e)}},{key:"generateLocationNameText",value:function(){var e=JSON.parse(JSON.stringify(this.locationBoxSpecifications));return e.style.fontSize=Math.trunc(.79*parseInt(e.style.fontSize))+"px",e.scale.objectHeight=this.locationBoxSpecifications.scale.objectHeight/4,e.scale.objectPositionX=0,e.scale.objectPositionY=.24*this.locationBoxSpecifications.scale.objectHeight,e.originX=.5,e.originY=0,F(this.scene,e)}},{key:"updateLocationScore",value:function(e){this.locationScore.setText("PUNTAJE: "+e)}},{key:"updateLocationStars",value:function(e){this.starsNumber=e;var t=this.generateStarContainer(0,-this.locationBoxSpecifications.scale.objectHeight/4,this.locationBoxSpecifications.scale.objectWidth,this.locationBoxSpecifications.scale.objectHeight/2);this.remove(this.locationStarsContainer),this.locationStarsContainer.destroy(),this.locationStarsContainer=t,this.add(this.locationStarsContainer)}},{key:"updateLocationBoxData",value:function(e){this.locationName.setText(e.location_name.toUpperCase()),this.updateLocationScore(e.location_score),this.updateLocationStars(e.location_starsNumber)}}]),n}();function le(e){e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){e.y+=7})),e.setInteractive().on("pointerout",(function(){e.y-=7}))}function he(e){e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){var t=e.getByName("button-Background"),n=e.getByName("button-text");t.setTint(6124414),n.setTint(6124414)})),e.setInteractive().on("pointerout",(function(){var t=e.getByName("button-Background"),n=e.getByName("button-text");t.clearTint(),n.clearTint()}))}var de=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).scene=e,o.timerClockSpecifications=i,o.time=parseInt(o.timerClockSpecifications.content),o.timerTime=parseInt(o.timerClockSpecifications.content),o.generateClock(),o.startTimer(),o}return _createClass(n,[{key:"getTime",value:function(){return this.time}},{key:"generateClock",value:function(){this.timerText=F(this.scene,this.timerClockSpecifications),this.timerText.text+="s",this.timerText.setOrigin(.5),this.timerText.setPosition(0,0);var e=parseInt(this.timerClockSpecifications.style.fontSize),t=this.calculeClockRadius();this.clockBackground=new Phaser.GameObjects.Graphics(this.scene),this.drawArc(this.clockBackground,e,t,270),this.add([this.clockBackground,this.timerText])}},{key:"startTimer",value:function(){var e=this,t=parseInt(this.timerClockSpecifications.style.fontSize),n=this.calculeClockRadius();this.degrees=271,this.reduce=this.degrees/this.time*4/3;var i=this.scene.tweens.add({duration:250,alpha:0,targets:this.clockBackground,loop:!0,yoyo:!0,repeat:-1});this.timerClock=this.scene.time.addEvent({repeat:this.time-1,delay:1e3,callback:function(){e.degrees=e.timerTime<=parseInt(e.timerClockSpecifications.content)?e.degrees+e.reduce:271,e.drawArc(e.clockBackground,t,n,e.degrees),e.timerTime>10?i.pause():i.resume(),e.timerTime--,e.timerText.setText(e.timerTime+"s"),e.time=e.timerTime}})}},{key:"calculeClockRadius",value:function(){var e=this.timerClockSpecifications.scale.objectWidth/2;return this.timerClockSpecifications.scale.objectWidth>this.timerClockSpecifications.scale.objectHeight&&(e=this.timerClockSpecifications.scale.objectHeight/2),e}},{key:"drawArc",value:function(e,t,n,i){e.clear(),e.lineStyle(t,10813440),e.beginPath(),e.arc(0,0,n,Phaser.Math.DegToRad(270),Phaser.Math.DegToRad(i),!0),e.strokePath()}},{key:"addMoreSeconds",value:function(){this.timerTime+=6,this.degrees-=6*this.reduce,this.timerClock.repeatCount+=6}}]),n}(),pe={type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:768,objectPositionX:683,objectPositionY:384}};function me(e,t,n){var i=e.add.dom(t.scale.objectPositionX,t.scale.objectPositionY).createFromCache(t.name);return i.node.style.width=n+"px",i.updateSize(),i}var ge={type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:768,objectPositionX:683,objectPositionY:384}},fe={type:"image",element:"background",assetName:"instruction-card-background",name:"pop-up-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:960,objectHeight:340,objectPositionX:0,objectPositionY:0}},be={type:"text",element:"message",name:"pop-up-message",content:"ADVERTENCIA",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:70,objectPositionX:0,objectPositionY:0}},ye={type:"text",element:"message",name:"pop-up-message",content:"Mensaje...",style:{fontFamily:"Comfortaa",color:"#3F017E",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:900,objectHeight:300,objectPositionX:0,objectPositionY:0}},ve={type:"interactiveObject",element:"simple-button",assetName:"quit-minigame-button-background",name:"quit-minigame-button",content:"CANCELAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:0,objectPositionY:0}},_e={type:"interactiveObject",element:"simple-button",assetName:"play-minigame-button-background",name:"continue-button",content:"ACEPTAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:0,objectPositionY:0}};function we(e,t){le(t),t.setInteractive().on("pointerdown",(function(){e.scene.pause(),e.scene.launch("SettingsScene",{returnSceneName:e.scene.key,accessType:"",playerFirebaseConection:null})}))}function ke(e,t,n){le(t),t.setInteractive().on("pointerdown",(function(){je(n),e.scene.start("MainScene",n)}))}function je(e){"guest"!==e.accessType&&m.conectionStatus&&e.playerFirebaseConection.off("value")}function Se(e,t){le(t),t.setInteractive().on("pointerdown",(function(){e.scene.pause(),e.scene.launch("AssistantScene",{returnSceneName:e.scene.key})}))}function Oe(e,t,n){le(t),t.setInteractive().on("pointerdown",(function(){je(n),e.scene.launch("InventoryScene",{returnSceneName:e.scene.key,accessType:n.accessType,playerFirebaseConection:n.playerFirebaseConection,userData:n.userData})}))}function Pe(e){e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){e.setTint(3492436)})),e.setInteractive().on("pointerout",(function(){e.clearTint()}))}var Ee=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,0,0)).scene=e,a.messageType=i,a.generateComponent(),le(a.popUpCancelButton),le(a.popUpContinueButton),"update-user-data-message"!==i&&a.addContinueButtonFuncionality(o),a.scene.add.existing(_assertThisInitialized(a)),a}return _createClass(n,[{key:"generateComponent",value:function(){if("account-created-message"===this.messageType){var e=JSON.parse(JSON.stringify(ge));e.assetName="base-scene-background",e.scale=R(this.scene,e.scale);var t=A(this.scene,e);t.setPosition(0,0),t.setDepth(-1),this.add([t])}var n=JSON.parse(JSON.stringify(ge));n.scale=R(this.scene,n.scale);var i=A(this.scene,n);i.setTint(0),i.setPosition(0,0),this.setSize(n.scale.objectWidth,n.scale.objectHeight),this.setPosition(n.scale.objectPositionX,n.scale.objectPositionY);var o=JSON.parse(JSON.stringify(fe));o.scale=R(this.scene,o.scale);var a=A(this.scene,o),s=JSON.parse(JSON.stringify(be));s.scale=R(this.scene,s.scale),this.popUpMessageTitle=F(this.scene,s),this.popUpMessageTitle.y=-a.displayHeight/2+this.popUpMessageTitle.height,"account-created-message"===this.messageType&&this.popUpMessageTitle.setText("CUENTA CREADA");var r=JSON.parse(JSON.stringify(ye));r.scale=R(this.scene,r.scale),r.content=f[this.messageType].message,this.popUpMessage=F(this.scene,r),this.popUpMessage.y+=this.popUpMessageTitle.height/4;var c=JSON.parse(JSON.stringify(_e));c.scale=R(this.scene,c.scale),c.scale.objectPositionX=o.scale.objectWidth/4,c.scale.objectPositionY=o.scale.objectHeight/2,this.popUpContinueButton=new x(this.scene,c);var u=JSON.parse(JSON.stringify(ve));u.scale=R(this.scene,u.scale),u.scale.objectPositionX=-o.scale.objectWidth/4,u.scale.objectPositionY=o.scale.objectHeight/2,this.popUpCancelButton=new x(this.scene,u),this.add([i,a,this.popUpMessageTitle,this.popUpMessage,this.popUpContinueButton,this.popUpCancelButton])}},{key:"updatePopUpMessage",value:function(e,t){this.popUpMessageTitle.setText(e),this.popUpMessage.setText(t)}},{key:"updatePopUpWithOneOnlyButton",value:function(){return this.popUpCancelButton.setVisible(!1),this.popUpContinueButton.setX(0),this.popUpContinueButton.setInteractive({cursor:l}),this.popUpContinueButton}},{key:"getCancelButton",value:function(){return this.popUpCancelButton.setInteractive({cursor:l}),this.popUpCancelButton}},{key:"getContinueButton",value:function(){return this.popUpContinueButton.setInteractive({cursor:l}),this.popUpContinueButton}},{key:"addContinueButtonFuncionality",value:function(e){var t=this;this.popUpContinueButton.setInteractive().on("pointerdown",(function(){switch("account-created-message"!==t.messageType&&(t.scene.scene.stop(t.scene.scene.key),t.scene.scene.stop(e.locationData.minigameId)),t.messageType){case"quit-minigame-message":m.gameMusic.resume(),je(e),t.scene.scene.start(e.returnSceneName,e);break;case"reset-minigame-message":case"retry-minigame-message":t.scene.scene.start(e.locationData.minigameId,e);break;case"account-created-message":h.returnButton=null,h.registerElement=null,h.loginElement=null,h.scene=null,t.scene.scene.stop(m.currentScene),t.scene.scene.start("MainScene",e)}setTimeout((function(){t.destroy()}),1)}))}}]),n}(),Ie=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).scene=e,o.updatedUserDataSpecifications=i,o.generateComponent(),o}return _createClass(n,[{key:"generateComponent",value:function(){var e=JSON.parse(JSON.stringify(pe));e.scale=R(this.scene,e.scale),this.updatedUserDataBackground=A(this.scene,e),this.updatedUserDataBackground.setTint(0),this.updatedUserDataBackground.setPosition(0,0),this.add(this.updatedUserDataBackground),this.setPosition(e.scale.objectPositionX,e.scale.objectPositionY),this.setSize(e.scale.objectWidth,e.scale.objectHeight),this.updatedUserDataForm=me(this.scene,this.updatedUserDataSpecifications,.75*this.scene.cameras.main.width),this.updatedUserDataForm.setPosition(0,0),this.add(this.updatedUserDataForm),this.setVisible(!1)}},{key:"activateComponent",value:function(e){var t=this,n=this.updatedUserDataForm.getChildByID("update-first-name");n.value=e.userData.player_name;var i=this.updatedUserDataForm.getChildByID("update-last-name");i.value=e.userData.player_lastName;var o=this.updatedUserDataForm.getChildByID("update-memberOf");o.value=e.userData.player_memberOf;var a=this.updatedUserDataForm.getChildByID("update-relationshipEpn");a.value=e.userData.player_relationshipEpn;var s=this.updatedUserDataForm.getChildByID("update-polichico-button"),r=this.updatedUserDataForm.getChildByID("update-polichica-button");"girl-avatar"===e.userData.player_avatarId?(r.checked=!0,s.checked=!1):(s.checked=!0,r.checked=!1),this.setDepth(1),this.setVisible(!0);var c=this.updatedUserDataForm.getChildByID("data-update-form"),u=this.updatedUserDataForm.getChildByID("cancel-button"),l=!1;u.onclick=function(){l=!0,t.setVisible(!1)},c.onsubmit=function(s){if(s.preventDefault(),!l){var c="boy-avatar";r.checked&&(c="girl-avatar"),t.generatePopUp("update-user-data-message",e,n.value,i.value,o.value,a.value,c)}t.setVisible(!1)}}},{key:"generatePopUp",value:function(e,t,n,i,o,a,s){var r=this,c=new Ee(this.scene,e,t);c.getCancelButton().setInteractive().on("pointerdown",(function(){r.enableButtons(),setTimeout((function(){c.destroy()}),1)})),c.getContinueButton().setInteractive().on("pointerdown",(function(){t.playerFirebaseConection.update({player_name:n,player_lastName:i,player_memberOf:o,player_relationshipEpn:a,player_avatarId:s}),p.firebaseApp.database().ref("score_table/"+t.userData.player_id).update({player_name:n+" "+i,player_memberOf:o,player_relationshipEpn:a}),setTimeout((function(){c.destroy()}),1)}))}},{key:"disableButtons",value:function(){this.setVisible(!1)}},{key:"enableButtons",value:function(){this.setVisible(!0)}}]),n}(),Ce=function(){function e(t){_classCallCheck(this,e),this.gameScene=t,this.gameObjects=new Map}return _createClass(e,[{key:"transformateToGameObject",value:function(e){var t,n,i,o,a="interactiveObject"===e.type,s="image"===e.type,r="video"===e.type,c="shape"===e.type,u="timer-clock"===e.type,l="user-data-update-form"===e.type;return"text"===e.type?t=F(this.gameScene,e):s?t=A(this.gameScene,e):r?(n=this.gameScene,i=e,(o=new Phaser.GameObjects.Video(n,i.scale.objectPositionX,i.scale.objectPositionY,i.assetName)).displayHeight=i.scale.objectHeight,o.displayWidth=i.scale.objectWidth,t=o):c?t=function(e,t){var n;return"line"===t.element&&(n=function(e,t){var n;return"horizontal_line"===t.name?n={positionX:t.scale.objectPositionX,positionY:0,positionX1:0,positionY1:t.scale.objectPositionY,positionX2:t.scale.objectPositionX+t.scale.objectWidth/2,positionY2:t.scale.objectPositionY}:"vertical_line"===t.name&&(n={positionX:0,positionY:t.scale.objectPositionY,positionX1:t.scale.objectPositionX,positionY1:0,positionX2:t.scale.objectPositionX,positionY2:t.scale.objectPositionY+t.scale.objectHeight/2}),function(e,t){return new Phaser.GameObjects.Line(e,t.positionX,t.positionY,t.positionX1,t.positionY1,t.positionX2,t.positionY2,16716031)}(e,n)}(e,t)),n}(this.gameScene,e):a?t=function(e,t){var n="profile-card"===t.element,i="map-area"===t.element,o="location"===t.element,a="location-box"===t.element;return"score-table-top-5"===t.element||"score-table-top-10"===t.element?new H(e,t):n?new V(e,t):i?new ne(e,t):o?new ce(e,t):a?new ue(e,t):new x(e,t)}(this.gameScene,e):u?t=new de(this.gameScene,e):l&&(t=new Ie(this.gameScene,e)),t}},{key:"createGameObject",value:function(e){var t=this.transformateToGameObject(e);this.gameObjects.set(e.name,{gameObjectSpecifications:e,gameObject:t})}},{key:"generateGameObjects",value:function(e){var t=this;e.forEach((function(e){var n=JSON.parse(JSON.stringify(e));n.scale=R(t.gameScene,n.scale),t.createGameObject(n)}))}},{key:"loadGameObjects",value:function(){var e=this;this.gameObjects.forEach((function(t){e.addGameObject(t.gameObject)}))}},{key:"addGameObject",value:function(e){this.gameScene.add.existing(e)}},{key:"generateGameObject",value:function(e){var t=JSON.parse(JSON.stringify(e));return t.scale=R(this.gameScene,t.scale),this.transformateToGameObject(t)}},{key:"getGameObjects",get:function(){return this.gameObjects}}]),e}(),Ne={player_achievements:{"badge-1":{achievement_id:"badge-1",achievement_name:"Ciencias",achievement_obtained:!1},"badge-10":{achievement_id:"badge-10",achievement_name:"Formaci\xf3n B\xe1sica",achievement_obtained:!1},"badge-2":{achievement_id:"badge-2",achievement_name:"Ciencias Administrativas",achievement_obtained:!1},"badge-3":{achievement_id:"badge-3",achievement_name:"Ingenier\xeda Civil y Ambiental",achievement_obtained:!1},"badge-4":{achievement_id:"badge-4",achievement_name:"Ingenier\xeda El\xe9ctrica y Electr\xf3nica",achievement_obtained:!1},"badge-5":{achievement_id:"badge-5",achievement_name:"Geolog\xeda y Petroleos",achievement_obtained:!1},"badge-6":{achievement_id:"badge-6",achievement_name:"Ingenier\xeda Mec\xe1nica",achievement_obtained:!1},"badge-7":{achievement_id:"badge-7",achievement_name:"Ingenier\xeda Qu\xedmica y Agroind.",achievement_obtained:!1},"badge-8":{achievement_id:"badge-8",achievement_name:"Ingenier\xeda de Sistemas",achievement_obtained:!1},"badge-9":{achievement_id:"badge-9",achievement_name:"ESFOT",achievement_obtained:!1},"bronze-trophy":{achievement_id:"bronze-trophy",achievement_name:"POLIB\xdaHO DE BRONCE",achievement_obtained:!1},"gold-trophy":{achievement_id:"gold-trophy",achievement_name:"POLIB\xdaHO DE ORO",achievement_obtained:!1},"silver-trophy":{achievement_id:"silver-trophy",achievement_name:"POLIB\xdaHO DE PLATA",achievement_obtained:!1},treasure:{achievement_id:"treasure",achievement_name:"SOY UN POLIT\xc9CNICO",achievement_obtained:!1}},player_areas:{"area-2":{area_id:"area-2",area_locations:{"hide-location":{location_id:"hide-location",location_name:"Polimapa",location_score:0,location_starsNumber:0},"location-1":{location_id:"location-1",location_name:"Entrada EPN",location_score:0,location_starsNumber:0},"location-2":{location_id:"location-2",location_name:"Museo EPN",location_score:0,location_starsNumber:0},"location-3":{location_id:"location-3",location_name:"Teatro",location_score:0,location_starsNumber:0},"location-4":{location_id:"location-4",location_name:"Hemiciclo",location_score:0,location_starsNumber:0},"location-5":{location_id:"location-5",location_name:"Biblioteca General",location_score:0,location_starsNumber:0},"location-6":{location_id:"location-6",location_name:"Vicerrectorado",location_score:0,location_starsNumber:0},"location-7":{location_id:"location-7",location_name:"Rectorado",location_score:0,location_starsNumber:0},"location-8":{location_id:"location-8",location_name:"Concejo Polit\xe9cnico",location_score:0,location_starsNumber:0},"location-9":{location_id:"location-9",location_name:"DGIP",location_score:0,location_starsNumber:0}},area_name:"Zona Administrativa",area_score:0,area_starsNumber:0}},player_avatarId:"boy-avatar",player_emailAddress:"invitado@epn.edu.ec",player_id:"invitado",player_lastName:"Invitado",player_memberOf:"-",player_name:"Jugador",player_password:"invitado",player_powerUps:{"poliburger-powerup":{powerup_id:"poliburger-powerup",powerup_name:"POLIBURGUER",powerups_number:5},"polibus-powerup":{powerup_id:"polibus-powerup",powerup_name:"POLIBUS",powerups_number:5},"policuaderno-powerup":{powerup_id:"policuaderno-powerup",powerup_name:"POLICUADERNO",powerups_number:5},"polifiesta-powerup":{powerup_id:"polifiesta-powerup",powerup_name:"POLIFIESTA",powerups_number:5},"poliperro-powerup":{powerup_id:"poliperro-powerup",powerup_name:"POLIPERRO",powerups_number:5}},player_relationshipEpn:"Invitado EPN",player_totalScore:0},Te={ethics_questions:{ethics_question_1:{question_correct_answer:{answer_feedback:"Los valores \xe9ticos de la EPN se establecen con base en la tradici\xf3n y el prestigio de la Polit\xe9cnica.",answer_id:"ethics_question_answer_1",answer_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_answer_assets/ethics_question_answer_1.png",answer_text:"Respeto mutuo, Honestidad, Apego a la verdad y Compromiso con la instituci\xf3n."},question_feedback:"El C\xf3digo de \xc9tica de la EPN se basa en el Respeto mutuo, la Honestidad, el Apego a la verdad y el Compromiso con la instituci\xf3n.",question_id:"ethics_question_1",question_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_assets/ethics_question_1.png",question_text:"Seg\xfan el c\xf3digo de \xc9tica de la Escuela Polit\xe9cnica Nacional, \xbfQu\xe9 valores debe tener un verdadero polit\xe9cnico?",question_title:"Pregunta de \xc9tica",question_type:"\xe9tica"},ethics_question_2:{question_correct_answer:{answer_feedback:"El C\xf3digo de \xc9tica de la EPN establece como norma de conducta: El Respeto hacia s\xed mismo y hacia los dem\xe1s.",answer_id:"ethics_question_answer_2",answer_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_answer_assets/ethics_question_answer_2.png",answer_text:"Respetar a los dem\xe1s y en particular la honra ajena y rechazar todo tipo de acusaciones o denuncias infundadas"},question_feedback:"Un verdadero polit\xe9cnico respeta a los dem\xe1s y en particular la honra ajena y rechazar todo tipo de acusaciones o denuncias infundadas.",question_id:"ethics_question_2",question_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_assets/ethics_question_2.png",question_text:"\xbfQu\xe9 debe hacer un verdadero polit\xe9cnico al escuchar rumores y acusaciones hacia sus compa\xf1eros?",question_title:"Pregunta de \xc9tica",question_type:"\xe9tica"},ethics_question_3:{question_correct_answer:{answer_feedback:"El C\xf3digo de \xc9tica de la EPN establece como norma de conducta: La Honestidad.",answer_id:"ethics_question_answer_3",answer_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_answer_assets/ethics_question_answer_3.png",answer_text:"Hacer de la honestidad el principio b\xe1sico de comportamiento en todos los actos."},question_feedback:"Un verdadero polit\xe9cnico hace de la honestidad el principio b\xe1sico de comportamiento en todos los actos.",question_id:"ethics_question_3",question_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_assets/ethics_question_3.png",question_text:"\xbfQu\xe9 debe hacer un verdadero polit\xe9cnico al encontrarse en cualquier situaci\xf3n de fraude o corrupci\xf3n?",question_title:"Pregunta de \xc9tica",question_type:"\xe9tica"},ethics_question_4:{question_correct_answer:{answer_feedback:"El C\xf3digo de \xc9tica de la EPN establece como norma de conducta: La Verdad.",answer_id:"ethics_question_answer_4",answer_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_answer_assets/ethics_question_answer_4.png",answer_text:"Informar con transparencia y en forma completa. Emitir mensajes con autenticidad, que no distorsionen eventos ni realidades."},question_feedback:"Un verdadero polit\xe9cnico informa con transparencia y en forma completa. Adem\xe1s, emite mensajes con autenticidad, que no distorsionen eventos ni realidades.",question_id:"ethics_question_4",question_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_assets/ethics_question_4.png",question_text:"\xbfQu\xe9 debe hacer un verdadero polit\xe9cnico al compartir cualquier tipo de informaci\xf3n a los dem\xe1s?",question_title:"Pregunta de \xc9tica",question_type:"\xe9tica"},ethics_question_5:{question_correct_answer:{answer_feedback:"El C\xf3digo de \xc9tica de la EPN establece como norma de conducta: El compromiso con la instituci\xf3n.",answer_id:"ethics_question_answer_5",answer_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_answer_assets/ethics_question_answer_5.png",answer_text:"Ser leal a la Polit\xe9cnica y a los valores institucionales."},question_feedback:"Ser leal a la Polit\xe9cnica y a los valores institucionales, es el compromiso que todos los polit\xe9cnicos tienen frente a la EPN.",question_id:"ethics_question_5",question_illustration_url:"../../assets/game_assets/guest-question-assets/ethics_questions_assets/ethics_question_5.png",question_text:"\xbfCu\xe1l es el compromiso que los polit\xe9cnicos tienen frente a la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de \xc9tica",question_type:"\xe9tica"}},history_questions:{history_question_1:{question_correct_answer:{answer_feedback:"Este expresidente cre\xf3 la EPN con el prop\xf3sito de contribuir al desarrollo cient\xedfico y tecnol\xf3gico del pa\xeds.",answer_id:"history_question_answer_1",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_1.png",answer_text:"Gabriel Garc\xeda Moreno"},question_feedback:"Gabriel Garc\xeda Moreno, mediante Decreto de la Convenci\xf3n Nacional del Ecuador (EPN), crea el 27 de agosto de 1869 la Escuela Polit\xe9cnica Nacional.",question_id:"history_question_1",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_1.png",question_text:"\xbfQu\xe9 expresidente del Ecuador fund\xf3 la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_10:{question_correct_answer:{answer_feedback:"Este expresidente dict\xf3 el nuevo decreto de reapertura, el 4 de julio de 1946.",answer_id:"history_question_answer_10",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_10.png",answer_text:"Jos\xe9 Mar\xeda Velasco Ibarra"},question_feedback:"El expresidente Jos\xe9 Mar\xeda Velasco Ibarra en 1946, dict\xf3 un segundo decreto de reapertura, en el cual la instituci\xf3n es renombrada como Escuela Polit\xe9cnica Nacional (EPN).",question_id:"history_question_10",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_10.png",question_text:"\xbfQu\xe9 expresidente del Ecuador estableci\xf3 el nombre de Escuela Polit\xe9cnica Nacional a la Instituci\xf3n?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_11:{question_correct_answer:{answer_feedback:"Bajo el mandato de este exdirector de la EPN, la instituci\xf3n tuvo un periodo de constante crecimiento.",answer_id:"history_question_answer_11",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_11.png",answer_text:"Jaime Ch\xe1vez Ram\xedrez"},question_feedback:"Jaime Ch\xe1vez Ram\xedrez fue designado Director en junio de 1947 y ejerci\xf3 la direcci\xf3n de la EPN durante doce a\xf1os hasta 1959.",question_id:"history_question_11",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_11.png",question_text:"\xbfQui\xe9n ejerci\xf3 la direcci\xf3n de la Escuela Polit\xe9cnica Nacional durante doce a\xf1os?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_12:{question_correct_answer:{answer_feedback:"Esta primera edificaci\xf3n propia de la EPN se construy\xf3 despu\xe9s de haberse creado la Facultad de Qu\xedmica en el a\xf1o de 1947.",answer_id:"history_question_answer_12",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_12.png",answer_text:"En la Calle G\xe1ndara, Junto al Parque de la Alameda."},question_feedback:"La primera edificaci\xf3n propio de la Escuela Polit\xe9cnica Nacional se ubic\xf3 en la Calle G\xe1ndara, junto al Parque de La Alameda.",question_id:"history_question_12",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_12.png",question_text:"\xbfD\xf3nde se ubic\xf3 la primera edificaci\xf3n propia de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"localizaci\xf3n hist\xf3rica"},history_question_13:{question_correct_answer:{answer_feedback:"Junto a la adquisici\xf3n de estos terrenos, se firmaron los convenios con la UNESCO para el equipamiento de los nuevos laboratorios de las carreras de ingenier\xeda.",answer_id:"history_question_answer_13",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_13.png",answer_text:"Jaime Ch\xe1vez Ram\xedrez"},question_feedback:"El exdirector de la EPN Jaime Ch\xe1vez Ram\xedrez adquiri\xf3 los primeros terrenos ubicados en el barrio de El Gir\xf3n, sector de La Floresta poco antes de terminar su direcci\xf3n.",question_id:"history_question_13",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_13.png",question_text:"\xbfQu\xe9 exdirector de la Escuela Polit\xe9cnica Nacional adquiri\xf3 los primeros terrenos en el barrio de El Gir\xf3n, sector La Floresta?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_14:{question_correct_answer:{answer_feedback:"Al tomar la direcci\xf3n de la EPN este exdirector era uno de los profesores de la Universidad Central y de la Universidad Cat\xf3lica.",answer_id:"history_question_answer_14",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_14.png",answer_text:"Jos\xe9 Rub\xe9n Orellana Ricaurte"},question_feedback:"Jos\xe9 Rub\xe9n Orellana Ricaurte fue designado Director el a\xf1o de 1959 para sustituir al Dr. Jaime Ch\xe1vez.",question_id:"history_question_14",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_14.png",question_text:"\xbfQui\xe9n fue designado director de la Escuela Polit\xe9cnica Nacional en el a\xf1o 1959 para sustituir al Dr. Jaime Ch\xe1vez?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_15:{question_correct_answer:{answer_feedback:"El campus actual de la EPN fue nombrado por el exrector Jos\xe9 Rub\xe9n Orellana Ricaurte.",answer_id:"history_question_answer_15",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_15.png",answer_text:"1964"},question_feedback:"Desde ese a\xf1o, la EPN ha venido funcionando ininterrumpidamente en su campus actual de El Gir\xf3n.",question_id:"history_question_15",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_15.png",question_text:'\xbfEn qu\xe9 a\xf1o la Escuela Polit\xe9cnica Nacional se traslad\xf3 de su antiguo campus cerca del parque de "La Alameda" a su campus actual de El Gir\xf3n?',question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"},history_question_16:{question_correct_answer:{answer_feedback:"Desde ese a\xf1o, la EPN ha venido funcionando ininterrumpidamente en su campus actual de El Gir\xf3n.",answer_id:"history_question_answer_16",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_16.png",answer_text:"Barrio de El Gir\xf3n, sector La Floresta."},question_feedback:'En 1964, la universidad se traslad\xf3 de su antiguo campus cerca del parque de "La Alameda" a su campus actual de El Gir\xf3n.',question_id:"history_question_16",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_16.png",question_text:"\xbfA d\xf3nde se traslad\xf3 la Escuela Polit\xe9cnica Nacional en el a\xf1o 1964?",question_title:"Pregunta de Historia",question_type:"localizaci\xf3n hist\xf3rica"},history_question_17:{question_correct_answer:{answer_feedback:"El Campus Polit\xe9cnico lleva el nombre de uno de los exrectores que dirigi\xf3 la EPN por m\xe1s de 30 a\xf1os.",answer_id:"history_question_answer_17",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_17.png",answer_text:'El Campus Polit\xe9cnico "Jos\xe9 Rub\xe9n Orellana Ricaurte"'},question_feedback:'El actual Campus Polit\xe9cnico lleva el nombre "Jos\xe9 Rub\xe9n Orellana Ricaurte", nombrado as\xed por el exrector Jos\xe9 Rub\xe9n Orellana Ricaurte.',question_id:"history_question_17",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_17.png",question_text:"\xbfCu\xe1l es el nombre actual del campus de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"localizaci\xf3n hist\xf3rica"},history_question_18:{question_correct_answer:{answer_feedback:"El Campus Polit\xe9cnico lleva su nombre por este director.",answer_id:"history_question_answer_18",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_18.png",answer_text:"Jos\xe9 Rub\xe9n Orellana Ricaurte"},question_feedback:"Jos\xe9 Rub\xe9n Orellana Ricaurte dirigi\xf3 la Escuela Polit\xe9cnica Nacional por m\xe1s de 30 a\xf1os, desde el a\xf1o de 1959 hasta 1990.",question_id:"history_question_18",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_18.png",question_text:"\xbfQui\xe9n dirigi\xf3 la Escuela Polit\xe9cnica Nacional por m\xe1s de 30 a\xf1os?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_19:{question_correct_answer:{answer_feedback:"Este exrector de la EPN dirigi\xf3 la instituci\xf3n desde el a\xf1o 2013 hasta el a\xf1o 2018.",answer_id:"history_question_answer_19",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_19.png",answer_text:"Jaime Calder\xf3n Segovia"},question_feedback:"Jaime Calder\xf3n Segovia fue elegido rector de la EPN, por un periodo de 5 a\xf1os.",question_id:"history_question_19",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_19.png",question_text:"\xbfQui\xe9n fue elegido rector de la Escuela Polit\xe9cnica Nacional por un periodo de 5 a\xf1o en el a\xf1o 2013?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_2:{question_correct_answer:{answer_feedback:'La EPN fue concebida como el primer centro de docencia e investigaci\xf3n cient\xedfica del Ecuador y recibi\xf3 el nombre de "Instituto Superior Polit\xe9cnico".',answer_id:"history_question_answer_2",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_2.png",answer_text:"El 27 de agosto de 1869."},question_feedback:"La escuela Polit\xe9cnica Nacional (EPN), fue fundada el 27 de agosto de 1869 por el expresidente Gabriel Garc\xeda Moreno.",question_id:"history_question_2",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_2.png",question_text:"\xbfEn qu\xe9 fecha se fund\xf3 la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"},history_question_20:{question_correct_answer:{answer_feedback:"El mandato de la rectora se llevar\xeda a cabo desde el a\xf1o 2018 hasta el a\xf1o 2024.",answer_id:"history_question_answer_20",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_20.png",answer_text:"Florinella Mu\xf1oz Bisesti"},question_feedback:"En el a\xf1o 2018, Florinella Mu\xf1oz Bisesti fue elegida rectora de la EPN, llegando a ser la primera mujer con estudios de doctorado, en ocupar el cargo de rectora en la historia de la EPN.",question_id:"history_question_20",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_20.png",question_text:"\xbfQui\xe9n fue elegido rector de la Escuela Polit\xe9cnica Nacional en el a\xf1o 2018?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_21:{question_correct_answer:{answer_feedback:"El C\xf3digo de \xc9tica de la EPN se basa en el Respeto mutuo, la Honestidad, el Apego a la verdad y el Compromiso con la instituci\xf3n.",answer_id:"history_question_answer_21",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_21.png",answer_text:"El Consejo Polit\xe9cnico"},question_feedback:"El C\xf3digo de \xc9tica de la EPN fue aprobado por el Consejo Polit\xe9cnico el 19 de noviembre del 2002.",question_id:"history_question_21",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_21.png",question_text:"\xbfQui\xe9n aprobado el C\xf3digo de \xc9tica de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"localizaci\xf3n hist\xf3rica"},history_question_22:{question_correct_answer:{answer_feedback:"El C\xf3digo de \xc9tica de la EPN se basa en el Respeto mutuo, la Honestidad, el Apego a la verdad y el Compromiso con la instituci\xf3n.",answer_id:"history_question_answer_22",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_22.png",answer_text:"El 19 de noviembre del 2002."},question_feedback:"El C\xf3digo de \xc9tica de la EPN fue aprobado por el Consejo Polit\xe9cnico el 19 de noviembre del 2002.",question_id:"history_question_22",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_22.png",question_text:"\xbfEn qu\xe9 fecha se aprob\xf3 el C\xf3digo de \xc9tica de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"},history_question_3:{question_correct_answer:{answer_feedback:"Adem\xe1s de ser el primer director de la EPN, fue uno de los tres primeros profesores de la Instituci\xf3n, especialista en Ciencias Naturales y Astronom\xeda",answer_id:"history_question_answer_3",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_3.png",answer_text:"Juan Bautista Menten"},question_feedback:"El padre jesuita Juan Bautista Menten es nombrado el primer director de la Escuela Polit\xe9cnica Nacional.",question_id:"history_question_3",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_3.png",question_text:"\xbfQui\xe9n fue el primer director de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_4:{question_correct_answer:{answer_feedback:"Este expresidente cerr\xf3 la EPN debido a razones pol\xedticas de la \xe9poca.",answer_id:"history_question_answer_4",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_4.png",answer_text:"Antonio Borrero Cort\xe1zar"},question_feedback:"La EPN fue cerrada por el expresidente Antonio Borrero el 15 de septiembre de 1876 y permaneci\xf3 cerrada hasta su reapertura en 1935.",question_id:"history_question_4",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_4.png",question_text:"\xbfQu\xe9 expresidente del Ecuador cerr\xf3 la Escuela Polit\xe9cnica Nacional debido a razones pol\xedticas?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_5:{question_correct_answer:{answer_feedback:"El cierra de la EPN trajo como consecuencia que las actividades educativas de la instituci\xf3n se suspendieran por casi 60 a\xf1os.",answer_id:"history_question_answer_5",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_5.png",answer_text:"El 15 de septiembre de 1876."},question_feedback:": La EPN sufri\xf3 desavenencias pol\xedticas, que llevaron a la instituci\xf3n a cerrar sus puertas el 15 de septiembre de 1876.",question_id:"history_question_5",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_5.png",question_text:"\xbfEn qu\xe9 fecha el expresidente Antonio Borrero cerr\xf3 la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"},history_question_6:{question_correct_answer:{answer_feedback:"Este expresidente firm\xf3 el decreto de reapertura de la EPN, el 28 de febrero de 1935.",answer_id:"history_question_answer_6",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_6.png",answer_text:"Jos\xe9 Mar\xeda Velasco Ibarra"},question_feedback:"El expresidente Jos\xe9 Mar\xeda Velasco Ibarra vuelve abrir la Escuela Polit\xe9cnica Nacional tras permanecer cerrada por casi 60 a\xf1os.",question_id:"history_question_6",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_6.png",question_text:"\xbfQu\xe9 expresidente del Ecuador firm\xf3 el decreto de reapertura de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"personaje hist\xf3rico"},history_question_7:{question_correct_answer:{answer_feedback:"En la reapertura de la EPN, Velasco Ibarra design\xf3 al Ing. Pedro Pinto Guzm\xe1n como el nuevo director de la Instituci\xf3n.",answer_id:"history_question_answer_7",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_7.png",answer_text:"El 28 de febrero de 1935."},question_feedback:"El 28 de febrero de 1935, el expresidente Jos\xe9 Mar\xeda Velasco Ibarra, firma el decreto de reapertura de la EPN tras permanecer cerrada por casi 60 a\xf1os.",question_id:"history_question_7",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_7.png",question_text:"\xbfEn qu\xe9 fecha el expresidente Jos\xe9 Mar\xeda Velasco Ibarra firm\xf3 el decreto de reapertura de la Escuela Polit\xe9cnica Nacional?",question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"},history_question_8:{question_correct_answer:{answer_feedback:"La incorporaci\xf3n de la EPN a la Universidad Centran se da 2 a\xf1os despu\xe9s del primer decreto de reapertura de Velasco Ibarra.",answer_id:"history_question_answer_8",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_8.png",answer_text:"El 11 de mayo de 1937."},question_feedback:"El 11 de mayo de 1937, pocos a\xf1os despu\xe9s de su reapertura, la Escuela Polit\xe9cnica Nacional se incorpora a la Facultad de Ciencias de la Universidad Central.",question_id:"history_question_8",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_8.png",question_text:"\xbfEn qu\xe9 fecha la Escuela Polit\xe9cnica Nacional se incorpor\xf3 a la Facultad de Ciencias de la Universidad Central?",question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"},history_question_9:{question_correct_answer:{answer_feedback:"Desde esa fecha la EPN ha funcionando ininterrumpidamente con el nombre establecido por Velasco Ibarra.",answer_id:"history_question_answer_9",answer_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_answer_assets/history_question_answer_9.png",answer_text:"El 04 de julio de 1946."},question_feedback:"El 4 de julio de 1946, Velasco Ibarra dict\xf3 un nuevo decreto, por medio del cual se establec\xeda el nombre de Escuela Polit\xe9cnica Nacional (EPN) para la Instituci\xf3n.",question_id:"history_question_9",question_illustration_url:"../../assets/game_assets/guest-question-assets/history_questions_assets/history_question_9.png",question_text:"\xbfEn qu\xe9 fecha el expresidente Jos\xe9 Mar\xeda Velasco Ibarra estableci\xf3 el nombre de Escuela Polit\xe9cnica Nacional a la Instituci\xf3n?",question_title:"Pregunta de Historia",question_type:"fecha hist\xf3rica"}}};function Re(e,t,n){var i=t.getByName("button-Background"),o=t.getByName("button-text");m.isMusicPlaying||(m.gameMusic.play({loop:!0}),m.isMusicPlaying=!0),!1===e.game.sound.mute?(e.game.sound.mute=!0,m.isSoundMuted=!0,i.setTexture("off-sound-icon-background"),n||o.setText("ENCENDER SONIDO")):(e.game.sound.mute=!1,m.isSoundMuted=!1,i.setTexture("on-sound-icon-background"),n||o.setText("APAGAR SONIDO"))}var Fe=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"StartScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e.epnButton=null,e.guestButton=null,e.scoreButton=null,e.infoButton=null,e.soundButton=null,e}return _createClass(n,[{key:"init",value:function(){m.status="startedGame",m.accessType="noLogin",m.currentScene=this.scene.key}}]),_createClass(n,[{key:"create",value:function(){this.gameScene.generateGameObjects(T),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.getElements(),this.addFunctionality(),this.updateSoundButtonStatus()}},{key:"getElements",value:function(){this.epnButton=this.sceneGameObjects.get("epn-button").gameObject,this.guestButton=this.sceneGameObjects.get("guest-button").gameObject,this.scoreButton=this.sceneGameObjects.get("score-button").gameObject,this.infoButton=this.sceneGameObjects.get("info-button").gameObject,this.soundButton=this.sceneGameObjects.get("sound-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;if(m.conectionStatus){if(this.epnButton){var t=this.epnButton.getByName("button-Background");t.clearTint(),t.clearAlpha(),le(this.epnButton),this.epnButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.start("GameAccessScene")})),le(this.scoreButton),this.scoreButton.setInteractive().on("pointerdown",(function(){e.scene.sleep(e.scene.key),e.scene.launch("TopBestPlayerScene",{returnSceneName:e.scene.key,accessType:"",playerFirebaseConection:null})}))}}else if(this.epnButton){this.epnButton.disableInteractive();var n=this.epnButton.getByName("button-text"),i=this.epnButton.getByName("button-Background");n.setText("SIN CONEXI\xd3N"),i.setTint(0),i.setAlpha(.5)}le(this.guestButton),this.guestButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key);var t={returnSceneName:e.scene.key,accessType:"guest",userData:JSON.parse(JSON.stringify(Ne)),playerFirebaseConection:null};e.scene.start("AvatarSelectionScene",t)})),le(this.infoButton),le(this.soundButton),le(this.soundButton),this.soundButton.setInteractive().on("pointerdown",(function(){Re(e,e.soundButton,!0)})),le(this.infoButton),this.infoButton.setInteractive().on("pointerdown",(function(){e.scene.pause(),e.scene.launch("InfoScene",{returnSceneName:e.scene.key,accessType:"",playerFirebaseConection:null})}))}},{key:"updateSoundButtonStatus",value:function(){this.soundButton.getByName("button-Background").setTexture(!0===m.isSoundMuted?"off-sound-icon-background":"on-sound-icon-background")}}]),n}(),Ae=[_,w,{type:"interactiveObject",element:"profile-card",assetName:"id-card-background",name:"summary-profile-card",style:{fontFamily:"Comfortaa",color:"#00B7EA",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:600,objectHeight:150,objectPositionX:683,objectPositionY:631}},{type:"interactiveObject",element:"simple-button",assetName:"play-game-button-background",name:"play-button",content:"JUGAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:615,objectHeight:145,objectPositionX:683,objectPositionY:424}},{type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"sign-out-button",content:"CERRAR SESI\xd3N",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:180,objectHeight:50,objectPositionX:1243,objectPositionY:60}},k,j,E],De=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MainScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e.playButton=null,e.settingsButton=null,e.infoButton=null,e.profileCardComponent=null,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){var e=this;"register"===this.gameData.accessType?(je(this.gameData),m.accessType="login",this.gameData.accessType="login",this.scene.stop(this.scene.key),this.scene.start("AvatarSelectionScene",this.gameData)):(this.gameScene.generateGameObjects(Ae),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.getElements(),this.addFunctionality(),this.profileCardComponent.updateProfilCardData(this.gameData.userData),m.conectionStatus&&"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.profileCardComponent.updateProfilCardData(n)})))}},{key:"getElements",value:function(){this.profileCardComponent=this.sceneGameObjects.get("summary-profile-card").gameObject,this.signOut=this.sceneGameObjects.get("sign-out-button").gameObject;var e=this.signOut.getByName("button-text");"invitado"===this.gameData.userData.player_id&&e.setText("INICIAR SESI\xd3N"),this.scoreButton=this.sceneGameObjects.get("score-button").gameObject,this.playButton=this.sceneGameObjects.get("play-button").gameObject,this.settingsButton=this.sceneGameObjects.get("settings-button").gameObject,this.infoButton=this.sceneGameObjects.get("info-button").gameObject,this.viewMoreButton=this.profileCardComponent.getViewMoreButtonComponent()}},{key:"addFunctionality",value:function(){var e=this;we(this,this.settingsButton),le(this.viewMoreButton),this.viewMoreButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.scene.stop(e.scene.key),e.scene.start("PlayerProfileScene",e.gameData)})),le(this.signOut),this.signOut.setInteractive().on("pointerdown",(function(){je(e.gameData),p.firebaseApp.auth().signOut(),e.scene.stop(e.scene.key),e.scene.start("StartScene")})),le(this.scoreButton),this.scoreButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.scene.sleep(e.scene.key),e.scene.launch("TopBestPlayerScene",{returnSceneName:e.scene.key,accessType:e.gameData.accessType})})),le(this.playButton),this.playButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.gameData.returnSceneName=e.scene.key,e.scene.start("MapScene",e.gameData)})),le(this.infoButton),this.infoButton.setInteractive().on("pointerdown",(function(){e.scene.pause(),e.scene.launch("InfoScene",{returnSceneName:e.scene.key,accessType:"",playerFirebaseConection:null})}))}}]),n}(),xe={type:"interactiveObject",element:"bottom-title-button",assetName:"pause-icon-background",name:"pause-button",content:"PAUSE",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"22px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:75,objectHeight:0,objectPositionX:95,objectPositionY:0}},Be={type:"text",element:"score-minigames",name:"score-minigames",content:"PUNTAJE: 0000",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",stroke:"#FFFFFF",strokeThickness:13,fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:230,objectHeight:45,objectPositionX:1315,objectPositionY:50}},He={type:"text",element:"score-minigames",name:"score-minigames",content:"INTENTOS FALLIDOS",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",stroke:"#FFFFFF",strokeThickness:13,fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:390,objectHeight:45,objectPositionX:1315,objectPositionY:50}},We=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,0,0)).titleBarSpecification=JSON.parse(JSON.stringify(i)),o.setPosition(o.titleBarSpecification.scale.objectPositionX,o.titleBarSpecification.scale.objectPositionY),o.scene=e,o.generateTitleBar(),o}return _createClass(n,[{key:"generateTitleBar",value:function(){this.addMinigameTitleBar(),this.addPauseButton(),this.generarateScore(),this.add([this.titleBarBackground,this.gameTitle,this.pauseButton,this.gameScore])}},{key:"addPauseButton",value:function(){var e=JSON.parse(JSON.stringify(xe));e.scale=R(this.scene,e.scale),e.scale.objectHeight=.9*this.titleBarSpecification.scale.objectHeight,this.pauseButton=new x(this.scene,e),this.pauseButton.x-=this.titleBarSpecification.scale.objectWidth/2}},{key:"addMinigameTitleBar",value:function(){this.titleBarBackground=A(this.scene,this.titleBarSpecification),this.titleBarBackground.setPosition(0,0),this.gameTitle=F(this.scene,this.titleBarSpecification),this.gameTitle.setPosition(0,0)}},{key:"generarateScore",value:function(){var e="EL AHORCADO"===this.titleBarSpecification.content,t=JSON.parse(JSON.stringify(He)),n=JSON.parse(JSON.stringify(Be));this.addScore(e?t:n)}},{key:"addScore",value:function(e){e.content="-",e.scale=R(this.scene,e.scale),this.gameScore=F(this.scene,e),this.gameScore.setOrigin(1,.5),this.gameScore.x-=this.titleBarSpecification.scale.objectWidth/2,this.gameScore.y-=this.titleBarSpecification.scale.objectHeight/2}},{key:"setScore",value:function(e){var t;t="EL AHORCADO"===this.titleBarSpecification.content?"INTENTOS FALLIDOS: "+e+"/8":"PUNTOS: "+e,this.gameScore.text=t}},{key:"addFuncionalityPauseButton",value:function(e){var t=this;return le(this.pauseButton),this.pauseButton.setInteractive().on("pointerdown",(function(){t.scene.scene.pause(),t.scene.scene.launch("MinigamePauseMenuScene",e)})),this.pauseButton}}]),n}(),Me={type:"text",element:"title",name:"powerups-bar-title",content:"AYUDAS",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:215,objectHeight:30,objectPositionX:0,objectPositionY:0}},Le={type:"interactiveObject",element:"button",name:"name-powerup",content:"0",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",stroke:"#FFFFFF",strokeThickness:13,fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:70,objectHeight:100,objectPositionX:0,objectPositionY:0}},qe={"poliburger-powerup":{title:"POLIBURGUER",subtitle:"+5 seg.",description:"La deliciosa comida r\xe1pida de los polit\xe9cnicos, este powerup a\xf1adir\xe1 5 segundos extra en cualquier minijuego con tiempo.\n\nCons\xfamela sabiamente y no te quedes sin tiempo.",icon_key:"poliburger-powerup-icon-background",box_background:"poliburger-powerup-box-background",button_background:"poliburger-powerup-button-background",locked_button_background:"locked-poliburger-powerup"},"polibus-powerup":{title:"POLIBUS",subtitle:"1 Salto",description:"El transporte gratuito propio de los polit\xe9cnicos, este powerup te permitir\xe1 saltar una pregunta en el minijuego Contra el Tiempo.\n\nMovil\xedzate seguro a casa en el polibus.",icon_key:"polibus-powerup-icon-background",box_background:"polibus-powerup-box-background",button_background:"polibus-powerup-button-background",locked_button_background:"locked-polibus-powerup"},"poliperro-powerup":{title:"POLIPERRO",subtitle:"-1 Fallo",description:"El amigo peludo de los polit\xe9cnicos, este powerup recuperar\xe1 un intento fallido en el minijuego El Ahorcado.\n\nConoce a los poliperro en su FanPage PoliPerros.",icon_key:"poliperro-powerup-icon-background",box_background:"poliperro-powerup-box-background",button_background:"poliperro-powerup-button-background",locked_button_background:"locked-poliperro-powerup"},"policuaderno-powerup":{title:"POLICUADERNO",subtitle:"50/50",description:"El instrumento clave para los apuntes de muchos polit\xe9cnicos, este powerup eliminar\xe1 dos respuestas err\xf3neas en el minijuego de tr\xedvia.\n\nRevisa tus apuntes y prep\xe1rate para los examenes.",icon_key:"policuaderno-powerup-icon-background",box_background:"policuaderno-powerup-box-background",button_background:"policuaderno-powerup-button-background",locked_button_background:"locked-policuaderno-powerup"},"polifiesta-powerup":{title:"POLIFIESTA",subtitle:"Efectos",description:"La gran celebraci\xf3n polit\xe9cnica, este powerup a\xf1adir\xe1 efectos de fiesta a cualquier minijuego que desees.\n\nFesteja sabiamente y llena de emoci\xf3n tu vida.",icon_key:"polifiesta-powerup-icon-background",box_background:"polifiesta-powerup-box-background",button_background:"polifiesta-powerup-button-background",locked_button_background:"locked-polifiesta-powerup"}},Ge=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,0,0)).powerupsBarElement=JSON.parse(JSON.stringify(i)),o.setPosition(o.powerupsBarElement.scale.objectPositionX,o.powerupsBarElement.scale.objectPositionY),o.setSize(o.powerupsBarElement.scale.objectWidth,o.powerupsBarElement.scale.objectHeight),o.scene=e,o.generatePowerupsBar(),o.generatePowerUps(),o}return _createClass(n,[{key:"generatePowerupsBar",value:function(){this.powerupBackground=A(this.scene,this.powerupsBarElement),this.powerupBackground.setPosition(0,0),this.powerupBackground.setOrigin(.5);var e=.9*this.powerupBackground.displayWidth,t="ContraTiempoScene"!==this.scene.scene.key?.2*this.powerupBackground.displayHeight:.12*this.powerupBackground.displayHeight,n=JSON.parse(JSON.stringify(Me));n.scale.objectWidth=e,n.scale.objectHeight=t,n.originX=.5,n.originY=0,n.scale.objectPositionX=0,n.scale.objectPositionY=.47*-this.powerupBackground.displayHeight,n.style.fontSize=t+"px",this.powerupBarTitle=F(this.scene,n),this.add([this.powerupBackground,this.powerupBarTitle])}},{key:"generatePowerUps",value:function(){var e=this,t=this.powerupBackground.displayWidth,n=this.powerupBackground.displayHeight,i="ContraTiempoScene"!==this.scene.scene.key,o=i?.14*t:.23*t,a=i?.5*n:.3*n,s=i?.38*-t:.33*-t,r=i?.05*n:.18*-n,c=0,u=new Map;["poliburger-powerup","poliperro-powerup","polibus-powerup","policuaderno-powerup","polifiesta-powerup"].forEach((function(l){var h=JSON.parse(JSON.stringify(Le)),d=r,p=s;c>2&&"ContraTiempoScene"===e.scene.scene.key?(p=(s=.15*-t)+.31*t*(-3+c),d=r=.25*n):p=i?s+.19*t*c:s+.31*t*c,h.assetName=qe[l].box_background,h.name=l,h.scale.objectWidth=o,h.scale.objectHeight=a,h.scale.objectPositionX=0,h.scale.objectPositionY=0,c++;var m=e.generatePowerupButton(h);m.setName("button");var g=m.getByName("button-Background");m.getByName("button-text").setVisible(!1),g.setAlpha(.1);var f=JSON.parse(JSON.stringify(Le.style));f.fontSize=.24*a+"px",f.strokeThickness=2;var b=new Phaser.GameObjects.Text(e.scene,0,.52*a,qe[l].subtitle,f);b.setName("text"),b.setAlpha(.12),b.setOrigin(.5,0);var y=new Phaser.GameObjects.Container(e.scene,p,d,[m,b]);y.setSize(o,a),y.name=l,u.set(l,y),e.add(y)})),this.poliburguerPowerupButton=u.get("poliburger-powerup"),this.poliperroPowerupButton=u.get("poliperro-powerup"),this.polibusPowerupButton=u.get("polibus-powerup"),this.policuadernoPowerupButton=u.get("policuaderno-powerup"),this.polifiestaPowerupButton=u.get("polifiesta-powerup"),this.addFunctionalityToPolifiestaPowerUp()}},{key:"generatePowerupButton",value:function(e){return e.scale=R(this.scene,e.scale),new x(this.scene,e)}},{key:"addFunctionalityToPolifiestaPowerUp",value:function(){var e=this;this.polifiestaPowerupButton.setInteractive().on("pointerdown",(function(){!function(e){e.anims.create({key:"polifiestaAnimation",frames:[{key:"party-scene-background-1",frame:1},{key:"party-scene-background-2",frame:1},{key:"party-scene-background-3",frame:1}],frameRate:5,repeat:-1});var t=Math.trunc(e.sys.canvas.width/1366*1366),n=Math.trunc(e.sys.canvas.height/768*666),i=Math.trunc(e.sys.canvas.width/1366*683),o=Math.trunc(e.sys.canvas.height/768*432),a=e.add.sprite(i,o,"party-scene-background-1").play("polifiestaAnimation");a.setDisplaySize(t,n),e.tweens.add({targets:a,alpha:{getStart:function(){return.25},getEnd:function(){return.99}},depth:1,duration:2500,repeat:0,onComplete:function(){a.destroy()},yoyo:!0})}(e.scene),e.lessPowerUpNumber(e.polifiestaPowerupButton.name),e.updatePowerUpsNumber(e.polifiestaPowerupButton,e.gameData.userData.player_powerUps[e.polifiestaPowerupButton.name].powerups_number)}))}},{key:"getPowerupsAvailable",value:function(){var e=new Map;switch(e.set(this.polifiestaPowerupButton.name,this.polifiestaPowerupButton),this.scene.scene.key){case"PolitriviaScene":e.set(this.policuadernoPowerupButton.name,this.policuadernoPowerupButton);break;case"PolimapaScene":break;case"PolimuseoScene":e.set(this.poliburguerPowerupButton.name,this.poliburguerPowerupButton);break;case"PolitonadaScene":break;case"ContraTiempoScene":e.set(this.poliburguerPowerupButton.name,this.poliburguerPowerupButton),e.set(this.polibusPowerupButton.name,this.polibusPowerupButton);break;case"ElAhorcadoScene":e.set(this.poliperroPowerupButton.name,this.poliperroPowerupButton)}return e.forEach((function(e){e.setInteractive().on("pointerover",(function(){var t=e.getByName("button"),n=e.getByName("text"),i=t.getByName("button-Background"),o=t.getByName("button-text");i.setTint(10071738),n.setTint(10071738),o.setTint(10071738)})),e.setInteractive().on("pointerout",(function(){var t=e.getByName("button"),n=e.getByName("text"),i=t.getByName("button-Background"),o=t.getByName("button-text");i.clearTint(),n.clearTint(),o.clearTint()}))})),e}},{key:"updateComponentData",value:function(e){var t=this;this.gameData=e,this.updatePowerUpsData(e.userData.player_powerUps),"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(e){var n=JSON.parse(JSON.stringify(e.val()));t.gameData.userData=n,t.updatePowerUpsData(n.player_powerUps)}))}},{key:"updatePowerUpsData",value:function(e){this.updatePowerUpsNumber(this.poliburguerPowerupButton,e[this.poliburguerPowerupButton.name].powerups_number),this.updatePowerUpsNumber(this.poliperroPowerupButton,e[this.poliperroPowerupButton.name].powerups_number),this.updatePowerUpsNumber(this.polibusPowerupButton,e[this.polibusPowerupButton.name].powerups_number),this.updatePowerUpsNumber(this.policuadernoPowerupButton,e[this.policuadernoPowerupButton.name].powerups_number),this.updatePowerUpsNumber(this.polifiestaPowerupButton,e[this.polifiestaPowerupButton.name].powerups_number)}},{key:"updatePowerUpsNumber",value:function(e,t){var n=e.getByName("button").getByName("button-text");n.setText(""+t),n.visible&&t<=0&&this.disablePowerUp(e)}},{key:"lessPowerUpNumber",value:function(e){this.gameData.userData.player_powerUps[e].powerups_number>0&&("guest"!==this.gameData.accessType?this.gameData.playerFirebaseConection.child("player_powerUps").child(e).update({powerups_number:this.gameData.userData.player_powerUps[e].powerups_number-1}):(this.gameData.userData.player_powerUps[e].powerups_number=this.gameData.userData.player_powerUps[e].powerups_number-1,this.updateComponentData(this.gameData)))}},{key:"unlockPowerUpsAvailables",value:function(){var e=this;this.getPowerupsAvailable().forEach((function(t){t.getByName("button").getByName("button-text").setVisible(!0),e.enablePowerUp(t)}))}},{key:"disablePowerUp",value:function(e){var t=e.getByName("button"),n=e.getByName("text"),i=t.getByName("button-Background"),o=t.getByName("button-text");e.disableInteractive(),e.setAlpha(.5),i.setTint(10071738),n.setTint(10071738),o.setTint(10071738)}},{key:"enablePowerUp",value:function(e){var t=e.getByName("button"),n=e.getByName("text"),i=t.getByName("button-Background"),o=t.getByName("button-text");e.clearAlpha(),"0"===o.text?this.disablePowerUp(e):(e.setInteractive(),i.clearAlpha(),n.clearAlpha())}}]),n}(),Ue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addTitleBar",value:function(e,t){var n=JSON.parse(JSON.stringify(t));n.scale=R(e,n.scale),this.titleBar=new We(e,n),this.titleBar.setScore(0),e.add.existing(this.titleBar)}},{key:"addPowerupsBar",value:function(e,t){var n=JSON.parse(JSON.stringify(t));n.scale=R(e,n.scale),this.powerupsBar=new Ge(e,n),e.add.existing(this.powerupsBar)}},{key:"generateMinigame",value:function(e,t){this.addTitleBar(e,t.titleBar),this.gameScene=new Ce(e),this.gameScene.generateGameObjects(t.gameobjects),this.gameScene.loadGameObjects(),this.addPowerupsBar(e,t.powerupsBar)}},{key:"showScore",value:function(e){this.titleBar.setScore(e)}},{key:"addFuncionalityPauseButton",value:function(e){return this.titleBar.addFuncionalityPauseButton(e)}},{key:"getPowerupsBar",value:function(){return this.powerupsBar}},{key:"getGameScene",get:function(){return this.gameScene}}]),e}(),ze={titleBar:{type:"title-bar",element:"title-bar",assetName:"title-bar-background",name:"title-bar",content:"POLITRIVIA",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},powerupsBar:{type:"powerups-bar",element:"powerups-bar",assetName:"powerups-card-background",name:"powerups-bar",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:140,objectPositionX:1086,objectPositionY:200}},gameobjects:[_,{type:"image",element:"illustration",assetName:"minigame-panel-background",name:"minigame-panel-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:776,objectHeight:608,objectPositionX:418,objectPositionY:435}},{type:"text",element:"question",name:"politrivia-question",content:"Pregunta ",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:750,objectHeight:200,objectPositionX:418,objectPositionY:225}},{type:"interactiveObject",element:"button",assetName:"answer-card-background",name:"answer-a",content:"a) ",style:{fontFamily:"Comfortaa",color:"#3F017E",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:750,objectHeight:100,objectPositionX:418,objectPositionY:365}},{type:"interactiveObject",element:"button",assetName:"answer-card-background",name:"answer-b",content:"b) ",style:{fontFamily:"Comfortaa",color:"#3F017E",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:750,objectHeight:100,objectPositionX:418,objectPositionY:470}},{type:"interactiveObject",element:"button",assetName:"answer-card-background",name:"answer-c",content:"c) ",style:{fontFamily:"Comfortaa",color:"#3F017E",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:750,objectHeight:100,objectPositionX:418,objectPositionY:575}},{type:"interactiveObject",element:"button",assetName:"answer-card-background",name:"answer-d",content:"d) ",style:{fontFamily:"Comfortaa",color:"#3F017E",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:750,objectHeight:100,objectPositionX:418,objectPositionY:680}},{type:"image",element:"illustration",assetName:"minigame-illustration-panel-background",name:"minigame-illustration-panel-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:438,objectPositionX:1086,objectPositionY:519}},{type:"image",element:"illustration",assetName:"question-illustration",name:"question-illustration",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:490,objectHeight:428,objectPositionX:1086,objectPositionY:519}}]},Ye=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"PolitriviaScene"})).minigameScene=new Ue,e.minigameObjects=new Map,e.powerUpsgameObjects=new Map,e.triviaGameObjects={titleTrivia:null,question:null,questionIllustration:null,correctAnswer:null,answerA:null,answerB:null,answerC:null,answerD:null},e}return _createClass(n,[{key:"init",value:function(e){this.questionNumber=0,this.correctAnswer=0,this.score=0,this.gameData=e,this.isPolicuadernoUsed=!1,this.isAnswerSelected=!1}}]),_createClass(n,[{key:"create",value:function(){this.minigameScene.generateMinigame(this,ze),this.minigameObjects=this.minigameScene.getGameScene.getGameObjects,this.powerupsBar=this.minigameScene.getPowerupsBar(),this.powerUpsgameObjects=this.powerupsBar.getPowerupsAvailable(),this.powerupsBar.updateComponentData(this.gameData),this.powerupsBar.unlockPowerUpsAvailables(),this.getTriviaElements(),this.addFunctionalityToGameObjects(),this.updateTriviaGame(this.gameData.locationData.minigameQuestionsData.questionsDB[this.questionNumber])}},{key:"getTriviaElements",value:function(){this.minigameObjects.get("base-scene-background").gameObject.setDepth(-1),this.triviaGameObjects.question=this.minigameObjects.get("politrivia-question").gameObject,this.triviaGameObjects.answerA=this.minigameObjects.get("answer-a").gameObject,this.triviaGameObjects.answerB=this.minigameObjects.get("answer-b").gameObject,this.triviaGameObjects.answerC=this.minigameObjects.get("answer-c").gameObject,this.triviaGameObjects.answerD=this.minigameObjects.get("answer-d").gameObject,this.triviaGameObjects.questionIllustration=this.minigameObjects.get("question-illustration").gameObject}},{key:"addFunctionalityToGameObjects",value:function(){this.minigameScene.addFuncionalityPauseButton(this.gameData),this.addAnswerItemFuncionality(this.triviaGameObjects.answerA),this.addAnswerOver(this.triviaGameObjects.answerA),this.addAnswerItemFuncionality(this.triviaGameObjects.answerB),this.addAnswerOver(this.triviaGameObjects.answerB),this.addAnswerItemFuncionality(this.triviaGameObjects.answerC),this.addAnswerOver(this.triviaGameObjects.answerC),this.addAnswerItemFuncionality(this.triviaGameObjects.answerD),this.addAnswerOver(this.triviaGameObjects.answerD),this.addFunctionalityToPolicuadernoPowerUp()}},{key:"addFunctionalityToPolicuadernoPowerUp",value:function(){var e=this,t=this.powerUpsgameObjects.get("policuaderno-powerup");t.setInteractive().on("pointerdown",(function(){if(e.powerupsBar.lessPowerUpNumber(t.name),e.powerupsBar.disablePowerUp(t),!e.isPolicuadernoUsed){var n=[];e.triviaGameObjects.answerA.getData("correct-answer")||n.push(e.triviaGameObjects.answerA),e.triviaGameObjects.answerB.getData("correct-answer")||n.push(e.triviaGameObjects.answerB),e.triviaGameObjects.answerC.getData("correct-answer")||n.push(e.triviaGameObjects.answerC),e.triviaGameObjects.answerD.getData("correct-answer")||n.push(e.triviaGameObjects.answerD);for(var i=e.randomIntFromInterval(0,2),o=0;o<n.length;o++)o!==i&&n[o].setVisible(!1);e.isPolicuadernoUsed=!0}}))}},{key:"randomIntFromInterval",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"updateTriviaGame",value:function(e){this.triviaGameObjects.question.setText("Pregunta "+(this.questionNumber+1)+".- "+e.question_text),this.updateAnswerItems(e),D(this.triviaGameObjects.questionIllustration,e.question_id,this.triviaGameObjects.questionIllustration.displayWidth,this.triviaGameObjects.questionIllustration.displayHeight)}},{key:"updateAnswerItems",value:function(e){this.triviaGameObjects.correctAnswer=e.question_correct_answer.answer_text;var t=this.unSortAnswers(e);this.updateStatusAnswerItem("a) ",this.triviaGameObjects.answerA,t[0]),this.updateStatusAnswerItem("b) ",this.triviaGameObjects.answerB,t[1]),this.updateStatusAnswerItem("c) ",this.triviaGameObjects.answerC,t[2]),this.updateStatusAnswerItem("d) ",this.triviaGameObjects.answerD,t[3])}},{key:"unSortAnswers",value:function(e){var t=[];t[0]=e.question_correct_answer.answer_text,t[1]=e.question_optional_incorrect_answers[0].answer_text,t[2]=e.question_optional_incorrect_answers[1].answer_text,t[3]=e.question_optional_incorrect_answers[2].answer_text;for(var n=0;n<=t.length;n++)t.sort((function(e,t){return Math.random()-.5}));return t}},{key:"updateStatusAnswerItem",value:function(e,t,n){t.getByName("button-text").setText(e+n),t.setData("correct-answer",this.triviaGameObjects.correctAnswer===n)}},{key:"addAnswerOver",value:function(e){var t=this;e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){var t=e.getByName("button-Background");D(t,"answer-white-card-background",t.displayWidth,t.displayHeight)})),e.setInteractive().on("pointerout",(function(){if(!t.isAnswerSelected){var n=e.getByName("button-Background");D(n,"answer-card-background",n.displayWidth,n.displayHeight),n.clearTint()}}))}},{key:"addAnswerItemFuncionality",value:function(e){var t=this;e.setInteractive().on("pointerdown",(function(){t.triviaGameObjects.answerA.disableInteractive(),t.triviaGameObjects.answerB.disableInteractive(),t.triviaGameObjects.answerC.disableInteractive(),t.triviaGameObjects.answerD.disableInteractive(),t.isAnswerSelected=!0,t.checkAnswer(e)}))}},{key:"checkAnswer",value:function(e){var t=this,n=e.getByName("button-Background");D(n,"answer-white-card-background",n.displayWidth,n.displayHeight),e.getData("correct-answer")?(n.setTint(51061),this.score=this.score+20,this.minigameScene.showScore(this.score),this.correctAnswer++):(this.showCorrectAsnwer(),n.setTint(16730240)),setTimeout((function(){t.questionNumber>=4?t.endMinigame(t.score,"ACIERTOS: "+t.correctAnswer+"/5"):t.nextQuestion()}),800)}},{key:"showCorrectAsnwer",value:function(){var e=null;this.triviaGameObjects.answerA.getData("correct-answer")&&(e=this.triviaGameObjects.answerA.getByName("button-Background")),this.triviaGameObjects.answerB.getData("correct-answer")&&(e=this.triviaGameObjects.answerB.getByName("button-Background")),this.triviaGameObjects.answerC.getData("correct-answer")&&(e=this.triviaGameObjects.answerC.getByName("button-Background")),this.triviaGameObjects.answerD.getData("correct-answer")&&(e=this.triviaGameObjects.answerD.getByName("button-Background")),D(e,"answer-white-card-background",e.displayWidth,e.displayHeight),e.setTint(51061)}},{key:"nextQuestion",value:function(){this.questionNumber=this.questionNumber+1,this.isAnswerSelected=!1;var e=this.gameData.locationData.minigameQuestionsData.questionsDB[this.questionNumber];this.resetGameObjectsStatus(),this.updateTriviaGame(e)}},{key:"resetGameObjectsStatus",value:function(){this.resetAnswerItems(this.triviaGameObjects.answerA),this.resetAnswerItems(this.triviaGameObjects.answerB),this.resetAnswerItems(this.triviaGameObjects.answerC),this.resetAnswerItems(this.triviaGameObjects.answerD);var e=this.powerUpsgameObjects.get("policuaderno-powerup");this.powerupsBar.enablePowerUp(e),this.isPolicuadernoUsed=!1}},{key:"resetAnswerItems",value:function(e){e.setVisible(!0);var t=e.getByName("button-Background");D(t,"answer-card-background",t.displayWidth,t.displayHeight),t.clearTint(),e.setInteractive()}},{key:"endMinigame",value:function(e,t){"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.off("value"),this.getStarsNumber(this.correctAnswer),this.gameData.locationData.locationScore=e,this.gameData.locationData.minigameEvaluationParameters=t,this.scene.start("MinigameSummaryScene",this.gameData)}},{key:"getStarsNumber",value:function(e){this.gameData.locationData.locationStarsNumber=e>=5?3:4===e||3===e?2:2===e||1===e?1:0}}]),n}(),Xe={titleBar:{type:"title-bar",element:"title-bar",assetName:"title-bar-background",name:"title-bar",content:"CONTRA EL TIEMPO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},powerupsBar:{type:"powerups-bar",element:"powerups-bar",assetName:"square-powerups-card-background",name:"powerups-bar",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:304,objectHeight:240,objectPositionX:683,objectPositionY:601}},gameobjects:[_,{type:"interactiveObject",element:"button",assetName:"question-card-background",name:"contra-tiempo-question",content:"Pregunta ",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1260,objectHeight:115,objectPositionX:683,objectPositionY:187}},{type:"interactiveObject",element:"button",name:"answer-1",content:"Name",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",stroke:"#FFFFFF",strokeThickness:13,fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:450,objectHeight:449,objectPositionX:279,objectPositionY:499}},{type:"interactiveObject",element:"button",name:"answer-2",content:"Name",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",stroke:"#FFFFFF",strokeThickness:13,fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:450,objectHeight:449,objectPositionX:1087,objectPositionY:499}},{type:"image",element:"background",assetName:"timer-card-background",name:"timer-card-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:150,objectHeight:150,objectPositionX:683,objectPositionY:376}},{type:"timer-clock",element:"timer-clock",name:"timer-clock",content:"60",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",stroke:"#FFFFFF",strokeThickness:13,fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:150,objectHeight:150,objectPositionX:683,objectPositionY:376}}]},Ve={type:"image",element:"illustration-answer",assetName:"correct-answer-icon-background",name:"illustration-answer",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:450,objectHeight:450,objectPositionX:0,objectPositionY:0}},Je=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"ContraTiempoScene"})).triviaContraTiempoGameObjects={titleTrivia:null,question:null,correctAnswer:null,answer1:null,answer2:null,illustratiosWidth:0,illustratiosHeight:0},e.minigameScene=new Ue,e.minigameObjects=new Map,e.powerUpsgameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.questionNumber=0,this.score=0,this.correctAnswer=0,this.gameData=e,this.isAnswerSelected=!1}},{key:"create",value:function(){this.minigameScene.generateMinigame(this,Xe),this.minigameObjects=this.minigameScene.getGameScene.getGameObjects,this.powerupsBar=this.minigameScene.getPowerupsBar(),this.powerUpsgameObjects=this.powerupsBar.getPowerupsAvailable(),this.powerupsBar.updateComponentData(this.gameData),this.powerupsBar.unlockPowerUpsAvailables(),this.getTriviaElements(),this.addFunctionalityToGameObjects(),this.updateTriviaGame(this.gameData.locationData.minigameQuestionsData.questionsDB[this.questionNumber])}},{key:"update",value:function(){var e=this;null!=this.timerClock&&this.timerClock.getTime()<=0&&setTimeout((function(){e.endMinigame(e.score,"ACIERTOS: "+e.correctAnswer+"/"+(e.questionNumber+1))}),1500)}},{key:"getTriviaElements",value:function(){this.minigameObjects.get("base-scene-background").gameObject.setDepth(-1);var e=this.minigameObjects.get("contra-tiempo-question").gameObject;this.triviaContraTiempoGameObjects.question=e.getByName("button-text");var t=this.minigameObjects.get("answer-1");this.triviaContraTiempoGameObjects.answer2=this.minigameObjects.get("answer-2").gameObject,this.timerClock=this.minigameObjects.get("timer-clock").gameObject,this.triviaContraTiempoGameObjects.answer1=t.gameObject,this.triviaContraTiempoGameObjects.illustratiosWidth=t.gameObjectSpecifications.scale.objectWidth,this.triviaContraTiempoGameObjects.illustratiosHeight=t.gameObjectSpecifications.scale.objectHeight}},{key:"addFunctionalityToGameObjects",value:function(){this.minigameScene.addFuncionalityPauseButton(this.gameData),this.addAnswerItemFuncionality(this.triviaContraTiempoGameObjects.answer1),this.addAnswerOver(this.triviaContraTiempoGameObjects.answer1),this.addAnswerItemFuncionality(this.triviaContraTiempoGameObjects.answer2),this.addAnswerOver(this.triviaContraTiempoGameObjects.answer2),this.addFunctionalityToPoliburgerPowerUp(),this.addFunctionalityToPolibusPowerUp()}},{key:"addFunctionalityToPoliburgerPowerUp",value:function(){var e=this,t=this.powerUpsgameObjects.get("poliburger-powerup");t.setInteractive().on("pointerdown",(function(){e.powerupsBar.lessPowerUpNumber(t.name),e.timerClock.addMoreSeconds()}))}},{key:"addFunctionalityToPolibusPowerUp",value:function(){var e=this,t=this.powerUpsgameObjects.get("polibus-powerup");t.setInteractive().on("pointerdown",(function(){e.powerupsBar.lessPowerUpNumber(t.name),e.nextQuestion()}))}},{key:"updateTriviaGame",value:function(e){this.triviaContraTiempoGameObjects.question.setText(e.question_text),this.updateAnswerItems(e)}},{key:"updateAnswerItems",value:function(e){this.triviaContraTiempoGameObjects.correctAnswer=e.question_correct_answer.answer_text;var t=Math.random()>=.5,n={answer1:t?e.question_correct_answer:e.question_optional_incorrect_answers[0],answer2:t?e.question_optional_incorrect_answers[0]:e.question_correct_answer};this.updateStatusAnswerItem(this.triviaContraTiempoGameObjects.answer1,n.answer1),this.updateStatusAnswerItem(this.triviaContraTiempoGameObjects.answer2,n.answer2)}},{key:"updateStatusAnswerItem",value:function(e,t){var n=e.getByName("button-Background"),i=e.getByName("button-text");D(n,t.answer_id,this.triviaContraTiempoGameObjects.illustratiosWidth,this.triviaContraTiempoGameObjects.illustratiosHeight),i.setText(t.answer_text),i.y=e.height/2-i.height,e.setData("correct-answer",this.triviaContraTiempoGameObjects.correctAnswer===t.answer_text)}},{key:"addAnswerOver",value:function(e){var t=this;e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){e.getByName("button-Background").setTint(7568862)})),e.setInteractive().on("pointerout",(function(){t.isAnswerSelected||e.getByName("button-Background").clearTint()}))}},{key:"addAnswerItemFuncionality",value:function(e){var t=this;e.setInteractive({cursor:l}),e.setInteractive().on("pointerdown",(function(){t.triviaContraTiempoGameObjects.answer1.disableInteractive(),t.triviaContraTiempoGameObjects.answer2.disableInteractive(),t.isAnswerSelected=!0,t.checkAnswer(e)}))}},{key:"checkAnswer",value:function(e){var t=this,n=e.getData("correct-answer"),i=JSON.parse(JSON.stringify(Ve));i.assetName=n?"correct-answer-icon-background":"incorrect-answer-icon-background",i.scale.objectWidth=2*e.displayWidth/3,i.scale.objectHeight=2*e.displayHeight/3,i.scale.objectPositionX=e.x,i.scale.objectPositionY=e.y;var o=A(this,i);this.add.existing(o),o.setPosition(e.x,e.y);var a=!1;n?(o.setTint(65323),this.score+=20,this.minigameScene.showScore(this.score),this.correctAnswer++):(o.setTint(16711715),a=!0),this.questionNumber+1>this.gameData.locationData.minigameQuestionsData.questionsDB.length-1&&(a=!0),setTimeout((function(){o.destroy(),!1===a?t.nextQuestion():t.endMinigame(t.score,"ACIERTOS: "+t.correctAnswer+"/"+(t.questionNumber+1))}),500)}},{key:"nextQuestion",value:function(){this.questionNumber=this.questionNumber+1,this.isAnswerSelected=!1;var e=this.gameData.locationData.minigameQuestionsData.questionsDB[this.questionNumber];this.triviaContraTiempoGameObjects.answer1.setInteractive(),this.triviaContraTiempoGameObjects.answer2.setInteractive(),this.updateTriviaGame(e)}},{key:"endMinigame",value:function(e,t){"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.off("value"),this.getStarsNumber(this.correctAnswer),this.gameData.locationData.locationScore=e,this.gameData.locationData.minigameEvaluationParameters=t,this.scene.stop(this.scene.key),this.scene.start("MinigameSummaryScene",this.gameData)}},{key:"getStarsNumber",value:function(e){this.gameData.locationData.locationStarsNumber=e>=5?3:4===e||3===e?2:2===e||1===e?1:0}}]),n}(),Qe={titleBar:{type:"title-bar",element:"title-bar",assetName:"title-bar-background",name:"title-bar",content:"POLIMAPA",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},powerupsBar:{type:"powerups-bar",element:"powerups-bar",assetName:"powerups-card-background",name:"powerups-bar",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:140,objectPositionX:1086,objectPositionY:200}},gameobjects:[_,{type:"image",element:"illustration",assetName:"minigame-panel-background",name:"minigame-panel-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:776,objectHeight:608,objectPositionX:418,objectPositionY:435}},{type:"text",element:"puzzle-title",name:"polimapa-puzzle-title",content:"ARMA EL MAPA EPN",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"40px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:60,objectPositionX:418,objectPositionY:157}},{type:"image",element:"background",assetName:"8-puzzle-card-background",name:"8-puzzle-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:590,objectHeight:538,objectPositionX:418,objectPositionY:451}},{type:"image",element:"background",assetName:"8-puzzle-end-background",name:"8-puzzle-end-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:590,objectHeight:538,objectPositionX:418,objectPositionY:451}},{type:"image",element:"illustration",assetName:"polimapa-feedback-illustration",name:"feedback-illustration",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:438,objectPositionX:1086,objectPositionY:519}}]},Ke=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"PolimapaScene"})).score=0,e.minigameScene=new Ue,e.minigameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e,this.gameData.locationData.locationStarsNumber=0}},{key:"create",value:function(){this.minigameScene.generateMinigame(this,Qe),this.minigameObjects=this.minigameScene.getGameScene.getGameObjects,this.powerupsBar=this.minigameScene.getPowerupsBar(),this.powerUpsgameObjects=this.powerupsBar.getPowerupsAvailable(),this.powerupsBar.updateComponentData(this.gameData),this.powerupsBar.unlockPowerUpsAvailables(),this.puzzleEndBackground=this.minigameObjects.get("8-puzzle-end-background").gameObject,this.puzzleEndBackground.setVisible(!1),this.minigameObjects.get("base-scene-background").gameObject.setDepth(-1),this.minigameScene.addFuncionalityPauseButton(this.gameData),this.showPuzzle()}},{key:"update",value:function(){var e=this;b.slidingPuzzle.checkGameFinished()&&(this.puzzleEndBackground.setDepth(1),this.puzzleEndBackground.setVisible(!0),setTimeout((function(){e.endMinigame(250,"MOVIMIENTOS: "+b.slidingPuzzle.getNumberMovements())}),2500))}},{key:"showPuzzle",value:function(){b.slidingPuzzle.generate8Puzzle(this)}},{key:"endMinigame",value:function(e,t){"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.off("value"),this.gameData.locationData.locationStarsNumber=3,this.gameData.locationData.locationScore=e,this.gameData.locationData.minigameEvaluationParameters=t,this.scene.stop(this.scene.key),this.scene.start("MinigameSummaryScene",this.gameData)}}]),n}(),$e=n("mrSG"),Ze={titleBar:{type:"title-bar",element:"title-bar",assetName:"title-bar-background",name:"title-bar",content:"POLIMUSEO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},powerupsBar:{type:"powerups-bar",element:"powerups-bar",assetName:"powerups-card-background",name:"powerups-bar",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:140,objectPositionX:1086,objectPositionY:200}},gameobjects:[_,{type:"image",element:"illustration",assetName:"minigame-panel-background",name:"minigame-panel-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:776,objectHeight:608,objectPositionX:418,objectPositionY:435}},{type:"text",element:"title",name:"riddle-title",content:"T\xedtulo",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:35,objectPositionX:419,objectPositionY:162}},{type:"text",element:"riddle-text",name:"riddle-text",content:"Adivinanza ",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:740,objectHeight:170,objectPositionX:419,objectPositionY:269}},{type:"text",element:"timer-clock",name:"timer-clock",content:"Tiempo: 150s",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",stroke:"#FFFFFF",strokeThickness:14,fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:40,objectPositionX:419,objectPositionY:393}},{type:"image",element:"illustration",assetName:"minigame-illustration-panel-background",name:"minigame-illustration-panel-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:438,objectPositionX:1086,objectPositionY:519}},{type:"text",element:"subtitle",name:"riddle-illustration-name",content:"Nombre del Diorama",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"30px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:470,objectHeight:35,objectPositionX:1086,objectPositionY:334}},{type:"image",element:"illustration",name:"riddle-illustration",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:470,objectHeight:275,objectPositionX:1086,objectPositionY:507}},{type:"text",element:"note",name:"minigame-note",content:"Visita el museo de la EPN y descubre todos las sorpresas que posee.",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:470,objectHeight:60,objectPositionX:1086,objectPositionY:689}}]},et={type:"InteractiveObject",element:"alphabeticKeyboard",assetName:"letter-button-background",name:"key-",style:{fontSize:"38px",fontFamily:"Segoe UI Emoji",color:"#fff",align:"center",stroke:"#fff",strokeThickness:1},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:60,objectHeight:50,objectPositionX:0,objectPositionY:0}},tt={type:"interactiveObject",element:"answerBox",assetName:"letter-box-background",name:"answer-key-",content:"",style:{fontSize:"38px",fontFamily:"Segoe UI",color:"#000000",align:"center",stroke:"#000000",strokeThickness:1},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:60,objectHeight:50,objectPositionX:0,objectPositionY:0}},nt=function(){function e(t,n,i,o,a){_classCallCheck(this,e),this.answerBoxSpecification=JSON.parse(JSON.stringify(tt)),this.alphabeticKeyboardDescriptions=JSON.parse(JSON.stringify(et)),this.maxBoardCols=11,this.maxBoardRows=4,this.piecesGroup=new Map,this.scene=t,this.keyboxScale=o,this.keyboardScale=a,this.typeBoard=i,this.answer=n,this.generateAnswerBox(),this.generateKeyboard()}return _createClass(e,[{key:"hideAnswer",value:function(){for(var e="ABCDEFGHIJKLMN\xd1OPQRSTUVWXYZ",t="",n=0;n<e.length;n++)t+=e.charAt(Math.floor(Math.random()*e.length));for(var i=this.answer.replace(" ",""),o=[],a=0;a<i.length;a++){var s=Math.floor(Math.random()*e.length);o.includes(s)?a--:(o.push(s),t=t.substr(0,s)+i.charAt(a)+t.substr(s+1,t.length))}return t}},{key:"generateKeyboard",value:function(){var e;e="alphabeticKeyboard"===this.typeBoard?"QWERTYUIOPASDFGHJKL\xd1ZXCVBNM":this.hideAnswer();var t=0;this.maxBoardRows=3,this.keyFontSize=this.alphabeticKeyboardDescriptions.style.fontSize,this.alphabeticKeyboardDescriptions.scale=R(this.scene,this.alphabeticKeyboardDescriptions.scale),this.pieceWidth=this.alphabeticKeyboardDescriptions.scale.objectWidth,this.pieceHeight=this.alphabeticKeyboardDescriptions.scale.objectHeight,this.keyboardScale=R(this.scene,this.keyboardScale);var n=this.keyboardScale.objectPositionX-this.maxBoardCols*this.pieceWidth*1.05/2+this.pieceWidth/2,i=this.keyboardScale.objectPositionY-(this.maxBoardRows-1)*this.pieceHeight*1.05/2+this.pieceHeight/2;this.alphabeticKeyboardDescriptions.scale.objectPositionX=n,this.alphabeticKeyboardDescriptions.scale.objectPositionY=i;for(var o=n,a=i,s=0;s<this.maxBoardRows;s++){for(var r=0;r<this.maxBoardCols;r++){this.alphabeticKeyboardDescriptions.content=e.charAt(t),this.alphabeticKeyboardDescriptions.name="keyButton-"+s+r,this.alphabeticKeyboardDescriptions.style.fontSize=this.keyFontSize;var c=1.05*(a+this.pieceHeight*s);this.alphabeticKeyboardDescriptions.scale.objectPositionX=1.05*(o+this.pieceWidth*r),this.alphabeticKeyboardDescriptions.scale.objectPositionY=c;var u=new x(this.scene,this.alphabeticKeyboardDescriptions);u.setData("type","keyButton"),u.setName(this.alphabeticKeyboardDescriptions.name),u.setInteractive({cursor:l}),this.piecesGroup.set(this.alphabeticKeyboardDescriptions.name,u),this.scene.add.existing(u),t++}o+=this.pieceWidth,this.maxBoardCols-=2}}},{key:"generateAnswerBox",value:function(){this.keyFontSize=this.answerBoxSpecification.style.fontSize,this.answerBoxSpecification.scale=R(this.scene,this.answerBoxSpecification.scale),this.pieceWidth=this.answerBoxSpecification.scale.objectWidth,this.pieceHeight=this.answerBoxSpecification.scale.objectHeight,this.keyboxScale=R(this.scene,this.keyboxScale);for(var e=this.answer.split(" "),t=0;t<e.length;t++){var n=this.keyboxScale.objectPositionX-e[t].length*this.pieceWidth*1.05/2+this.pieceWidth/2,i=this.keyboxScale.objectPositionY-e.length*this.pieceHeight*1.1/2+this.pieceHeight/2;this.answerBoxSpecification.scale.objectPositionX=n,this.answerBoxSpecification.scale.objectPositionY=i;for(var o=n,a=i,s=0;s<e[t].length;s++){this.answerBoxSpecification.content=e[t].charAt(s),this.answerBoxSpecification.name="keyBox-"+t+s,this.answerBoxSpecification.style.fontSize=this.keyFontSize;var r=1.1*(a+this.pieceHeight*t);this.answerBoxSpecification.scale.objectPositionX=1.05*(o+this.pieceWidth*s),this.answerBoxSpecification.scale.objectPositionY=r;var c=new x(this.scene,this.answerBoxSpecification);c.getByName("button-text").setVisible(!1),c.setData("type","keyBox");-1!==["\xc1","\xc9","\xcd","\xd3","\xda"].indexOf(e[t].charAt(s))?c.setData("key",{"\xc1":"A","\xc9":"E","\xcd":"I","\xd3":"O","\xda":"U"}[e[t].charAt(s)]):c.setData("key",e[t].charAt(s)),c.setData("completed",!1),c.setName(this.answerBoxSpecification.name),this.piecesGroup.set(this.answerBoxSpecification.name,c),this.scene.add.existing(c)}}}},{key:"agregateKeyBox",value:function(e){var t=new Phaser.GameObjects.Container(this.scene,this.keyboxScale.objectPositionX,this.keyboxScale.objectPositionY);e.forEach((function(e){t.add(e)})),this.scene.add.existing(t)}},{key:"getPiecesGroup",value:function(){return this.piecesGroup}}]),e}(),it=[{idRiddle:"riddle1",titleRidle:"MANGLAR SAN LORENZO",riddle:"El Manglar San Lorenzo se encuentra en el l\xedmite de los suelos inundados por las aguas marinas y las desembocaduras de diferentes r\xedos.\n\xbfQu\xe9 r\xedo le da su nombre a este manglar?",idAnswer:"riddle-answer-1",answer:"San Lorenzo",ridleIllustration:"../../assets/game_assets/minigames-assets/polimuseo-assets/riddle_1_background.png"},{idRiddle:"riddle2",titleRidle:"P\xc1RAMO SECO DEL CHIMBORAZO",riddle:"Forma parte de la Reserva de Producci\xf3n Faun\xedstica Chimborazo y es considerado el nevado m\xe1s alto de Ecuador.\n\xbfCu\xe1l es el nombre de este nevado?",idAnswer:"riddle-answer-2",answer:"Chimborazo",ridleIllustration:"../../assets/game_assets/minigames-assets/polimuseo-assets/riddle_2_background.png"},{idRiddle:"riddle3",titleRidle:"GAL\xc1PAGOS, ECOSISTEMA MARINO",riddle:"El ecosistema marino de Gal\xe1pagos abarca una gran variedad de organismos de agua c\xe1lida y fr\xeda como: corales, estrellas de mar, ping\xfcinos, ballenas y m\xe1s.\n\xbfQu\xe9 otro animal conformar\xeda este ecosistema?",idAnswer:"riddle-answer-3",answer:"Tiburones",ridleIllustration:"../../assets/game_assets/minigames-assets/polimuseo-assets/riddle_3_background.png"},{idRiddle:"riddle4",titleRidle:"YACIMIENTO DE F\xd3SILES",riddle:"El diorama Yacimientos de F\xf3siles de la EPN muestra el craneo de un mam\xedfero con grandes colmillos parecido al elefante.\n\xbfQu\xe9 animal es?",idAnswer:"riddle-answer-4",answer:"Mastodonte",ridleIllustration:"../../assets/game_assets/minigames-assets/polimuseo-assets/riddle_4_background.png"},{idRiddle:"riddle5",titleRidle:"P\xc1RAMO H\xdaMEDO DEL \xc1NGEL",riddle:"El P\xe1ramo H\xfamedo del \xc1ngel es un valle glaciar con acantilados, riachuelos, lagunas y m\xe1s, ubicado al norte del Ecuador.\n\xbfEn qu\xe9 provincia se encuentra este paramo?",idAnswer:"riddle-answer-5",answer:"Carchi",ridleIllustration:"../../assets/game_assets/minigames-assets/polimuseo-assets/riddle_5_background.png"}],ot=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"PolimuseoScene"})).minigameScene=new Ue,e.minigameObjects=new Map,e.keyboardObjectsPositions=new Map,e.powerUpsgameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.riddleNumber=0,this.score=0,this.completedQuestion=0,this.isCorrectAnswer=!1,this.tweenClock=null,this.isGameOver=!1,this.timerTime=149,this.gameData=e,this.riddleDataBase=it,this.riddleGameObjects={titleRiddleIllustration:null,riddle:null,riddleIllustration:null,keyboardObjects:new Map,answerBox:new Map}}}]),_createClass(n,[{key:"create",value:function(){this.minigameScene.generateMinigame(this,Ze),this.minigameObjects=this.minigameScene.getGameScene.getGameObjects,this.powerupsBar=this.minigameScene.getPowerupsBar(),this.powerUpsgameObjects=this.powerupsBar.getPowerupsAvailable(),this.powerupsBar.updateComponentData(this.gameData),this.powerupsBar.unlockPowerUpsAvailables(),this.getRiddleElements(),this.showRiddle(),this.starTimer(),this.addFunctionality(),this.addFunctionalityToPoliburgerPowerUp()}},{key:"update",value:function(){null!=this.timerTime&&!this.isGameOver&&(this.timerTime<0||this.riddleNumber>=5)&&(this.isGameOver=!0,this.endMinigame(this.score,"ACIERTOS: "+this.completedQuestion+"/"+this.riddleDataBase.length))}},{key:"getRiddleElements",value:function(){this.minigameObjects.get("base-scene-background").gameObject.setDepth(-1),this.timerText=this.minigameObjects.get("timer-clock").gameObject,this.riddleGameObjects.titleRiddleIllustration=this.minigameObjects.get("riddle-illustration-name").gameObject,this.riddleGameObjects.riddle=this.minigameObjects.get("riddle-text").gameObject,this.riddleTitle=this.minigameObjects.get("riddle-title").gameObject,this.riddleGameObjects.riddleIllustration=this.minigameObjects.get("riddle-illustration")}},{key:"showRiddle",value:function(){var e=this.riddleDataBase[this.riddleNumber].answer;this.riddleGameObjects.titleRiddleIllustration.setText(this.riddleDataBase[this.riddleNumber].titleRidle),this.riddleTitle.setText(this.riddleDataBase[this.riddleNumber].titleRidle),this.riddleGameObjects.riddle.setText("Adivinanza "+(this.riddleNumber+1)+".- "+this.riddleDataBase[this.riddleNumber].riddle),D(this.riddleGameObjects.riddleIllustration.gameObject,this.riddleDataBase[this.riddleNumber].idRiddle,this.riddleGameObjects.riddleIllustration.gameObjectSpecifications.scale.objectWidth,this.riddleGameObjects.riddleIllustration.gameObjectSpecifications.scale.objectHeight);var t=new nt(this,e.toUpperCase(),"letterBox",{objectPositionX:419,objectPositionY:447,objectWidth:700,objectHeight:60,objectHeightRatio:1,objectWidthRatio:1},{objectPositionX:419,objectPositionY:585,objectWidth:592,objectHeight:162,objectHeightRatio:1,objectWidthRatio:1});this.riddleGameObjects.keyboardObjects=t.getPiecesGroup(),this.getAnsweBox()}},{key:"getAnsweBox",value:function(){var e=this;this.riddleGameObjects.keyboardObjects.forEach((function(t){if("keyBox"===t.getData("type")){var n={answerName:t.name,answerBoxContent:t.getData("key"),positionX:t.x,positionY:t.y,width:t.width,height:t.height,gamObject:t,completed:!1};e.riddleGameObjects.answerBox.set(t.name,n)}}))}},{key:"addFunctionality",value:function(){var e=this;this.minigameScene.addFuncionalityPauseButton(this.gameData),this.riddleGameObjects.keyboardObjects.forEach((function(t){"keyButton"===t.getData("type")&&(t.setInteractive(),e.keyboardObjectsPositions.set(t.name,[t.x,t.y]),e.input.setDraggable(t),e.input.on("gameobjectover",(function(e,t){"keyButton"===t.getData("type")&&t.getByName("button-Background").setTint(2752256)})),e.input.on("gameobjectout",(function(e,t){"keyButton"===t.getData("type")&&t.getByName("button-Background").clearTint()})),e.input.on("dragstart",(function(e,t){"keyButton"===t.getData("type")&&t.getByName("button-Background").setTint(16711808)})),e.input.on("drag",(function(t,n,i,o){return $e.__awaiter(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("keyButton"!==n.getData("type")){e.next=6;break}return n.x=i,n.y=o,e.next=4,this.checkAnswer(n);case 4:t=e.sent,this.isCorrectAnswer&&(t.destroy(),this.isRiddleCompleted(),this.isCorrectAnswer=!1);case 6:case"end":return e.stop()}}),e,this)})))})),e.input.on("dragend",(function(t,n){if("keyButton"===n.getData("type")){n.getByName("button-Background").clearTint();var i=e.keyboardObjectsPositions.get(n.name);e.isCorrectAnswer||(n.x=i[0],n.y=i[1])}})))}))}},{key:"addFunctionalityToPoliburgerPowerUp",value:function(){var e=this,t=this.powerUpsgameObjects.get("poliburger-powerup");t.setInteractive().on("pointerdown",(function(){e.powerupsBar.lessPowerUpNumber(t.name),e.timerTime+=6,e.timerClock.repeatCount+=6}))}},{key:"checkAnswer",value:function(e){var t,n=this;return this.riddleGameObjects.answerBox.forEach((function(i){var o=e.getByName("button-text");e.x>i.positionX-i.width/2&&e.x<i.positionX+i.width/2&&e.y>i.positionY-i.height/2&&e.y<i.positionY+i.height/2&&o.text===i.gamObject.getData("key")&&(e.x=i.positionX,e.y=i.positionY,e.removeInteractive(),n.isCorrectAnswer=!0,i.completed=!0,t=i.gamObject)})),t}},{key:"isRiddleCompleted",value:function(){var e=this,t=!0;this.riddleGameObjects.answerBox.forEach((function(e){!1===e.completed&&(t=!1)})),setTimeout((function(){t&&(e.completedQuestion++,e.score+=20,e.minigameScene.showScore(e.score),e.riddleNumber++,e.clearRiddle(),e.showRiddle(),e.addFunctionality())}),400)}},{key:"clearRiddle",value:function(){this.riddleGameObjects.answerBox.forEach((function(e){e.gamObject.destroy()})),this.riddleGameObjects.keyboardObjects.forEach((function(e){e.destroy()}))}},{key:"starTimer",value:function(){var e=this;this.tweenClock=this.tweens.add({duration:225,alpha:0,targets:this.timerText,loop:!0,yoyo:!0,repeat:-1}),this.tweenClock.pause(),this.timerClock=this.time.addEvent({repeat:this.timerTime,delay:1e3,callback:function(){e.timerText.setText("Tiempo: "+e.timerTime+"s"),e.timerTime>10&&null!=e.tweenClock?(e.timerText.alpha=1,e.tweenClock.pause()):e.timerTime>0&&e.tweenClock.play(),e.timerTime--}})}},{key:"endMinigame",value:function(e,t){var n=this;this.tweenClock.stop(),this.timerClock.destroy(),this.showAnswer(),this.time.delayedCall(3e3,(function(){"guest"!==n.gameData.accessType&&n.gameData.playerFirebaseConection.off("value"),n.getStarsNumber(n.completedQuestion),n.gameData.locationData.locationScore=e,n.gameData.locationData.minigameEvaluationParameters=t,n.scene.stop(n.scene.key),n.scene.start("MinigameSummaryScene",n.gameData)}),[],this)}},{key:"showAnswer",value:function(){this.riddleGameObjects.answerBox.forEach((function(e){e.gamObject.buttonText.setVisible(!0)}))}},{key:"getStarsNumber",value:function(e){this.gameData.locationData.locationStarsNumber=e>=5?3:2===e?2:1===e?1:0}}]),n}(),at={titleBar:{type:"title-bar",element:"title-bar",assetName:"title-bar-background",name:"title-bar",content:"POLITONADA",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},powerupsBar:{type:"powerups-bar",element:"powerups-bar",assetName:"powerups-card-background",name:"powerups-bar",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:140,objectPositionX:683,objectPositionY:215}},gameobjects:[_,{type:"image",element:"background",assetName:"politonada-scene-background",name:"politonada-scene-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:670,objectPositionX:683,objectPositionY:434}},{type:"interactiveObject",element:"simple-button",assetName:"blue-button-background",name:"blue-button",content:"C",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:95,objectPositionX:270,objectPositionY:526}},{type:"interactiveObject",element:"simple-button",assetName:"pink-button-background",name:"pink-button",content:"S",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:95,objectPositionX:270,objectPositionY:430}},{type:"interactiveObject",element:"simple-button",assetName:"green-button-background",name:"green-button",content:"Q",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:95,objectPositionX:270,objectPositionY:334}},{type:"image",element:"background",name:"player-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:276,objectHeight:239,objectPositionX:683,objectPositionY:629}}]},st={type:"interactiveObject",element:"button",assetName:"lyric-card-background",name:"lyric-background",content:"",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",fontSize:"30px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:56,objectPositionX:0,objectPositionY:0,keepTextScale:!0}},rt=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).lyricsSongGameObjects=[],o.scene=e,o.sheetMusicSpecifications=i,o.generateSheetMusic(),o}return _createClass(n,[{key:"generateSheetMusic",value:function(){this.sheetMusicBackground=A(this.scene,this.sheetMusicSpecifications),this.sheetMusicBackground.setPosition(0,0),this.sheetMusicBackground.setDisplaySize(this.sheetMusicSpecifications.scale.objectWidth,this.sheetMusicSpecifications.scale.objectHeight),this.sheetMusicBackground.setName("background"),this.add(this.sheetMusicBackground),this.setSize(this.sheetMusicSpecifications.scale.objectWidth,this.sheetMusicSpecifications.scale.objectHeight),this.generateLyricsSong()}},{key:"generateLyricsSong",value:function(){var e=0,t=new Phaser.GameObjects.Container(this.scene,e,0);t.setSize(this.sheetMusicSpecifications.scale.objectWidth,this.sheetMusicSpecifications.scale.objectHeight),t.setName("pista"),e=t.width/3;for(var n=this.sheetMusicSpecifications.content.split(" "),i=JSON.parse(JSON.stringify(st)),o=48*this.scene.sys.canvas.height/768,a=0;a<n.length;a++){var s=Math.round(2*Math.random()),r=2===s?-1:s,c=0+o*(t.height/o)*.645/2*r;i.content=n[a],i.scale.objectPositionX=e,i.scale.objectPositionY=c,i.style.fontSize=st.style.fontSize;var u=this.generateLyricBox(i);u.setX(e+u.width/2),u.setData("lyricPosition",r),u.setData("selected",!1),this.lyricsSongGameObjects.push(u),t.add(u),e=u.x+u.width/2+5}this.add(t)}},{key:"generateLyricBox",value:function(e){var t=new Phaser.GameObjects.Container(this.scene,e.scale.objectPositionX,e.scale.objectPositionY),n=new Phaser.GameObjects.Image(this.scene,0,0,e.assetName),i=new Phaser.GameObjects.Text(this.scene,0,0,e.content,e.style);return n.setName("button-Background"),n.setOrigin(.5),i.setName("button-text"),i.setOrigin(.5),n.setDisplaySize(1.05*i.width,e.scale.objectHeight),t.add([n,i]),t.setSize(n.displayWidth,n.displayHeight),t}},{key:"getLyricsSongGameObjects",value:function(){return this.lyricsSongGameObjects}},{key:"getIndicator",value:function(){return this.indicator}}]),n}(),ct={type:"image",element:"background",assetName:"lyrics-box-background",name:"letter-background",content:"",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1080,objectHeight:193,objectPositionX:0,objectPositionY:0,keepTextScale:!0}},ut=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"PolitonadaScene"})).clicked=!1,e.politonadaGameObjects={lyricsSongGameObjects:[],blueButton:null,pinkButton:null,greenButton:null},e.minigameScene=new Ue,e.minigameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.score=0,this.lyricsSpeed=3.3,this.hits=0,this.stopAnimation=!1,this.gameData=e}},{key:"update",value:function(){var e=this;if(this.activateAnimation(),this.scene.isPaused()?this.music.pause():this.music.resume(),null!==this.pista){this.politonadaGameObjects.lyricsSongGameObjects.forEach((function(t){t.x-=e.lyricsSpeed}));var t=this.politonadaGameObjects.lyricsSongGameObjects[this.politonadaGameObjects.lyricsSongGameObjects.length-1];t.x+t.width/2<-this.pista.width/2&&(this.stopAnimation=!0)}this.clicked&&void 0!==this.lyricsAnswerClicked&&(this.score=Math.round(100*(this.score+.01))/100,this.minigameScene.showScore(this.score),this.lyricsAnswerClicked.x+this.lyricsAnswerClicked.width/2<-this.pista.width/2&&(this.clicked=!1)),void 0!==this.animation&&this.stopAnimation&&this.animation.anims.stop()}},{key:"create",value:function(){m.gameMusic.pause(),this.minigameScene.generateMinigame(this,at),this.minigameObjects=this.minigameScene.getGameScene.getGameObjects,this.powerupsBar=this.minigameScene.getPowerupsBar(),this.powerUpsgameObjects=this.powerupsBar.getPowerupsAvailable(),this.powerupsBar.updateComponentData(this.gameData),this.powerupsBar.unlockPowerUpsAvailables(),this.getElements(),this.playerAnimation(),this.showSheetMusic(),this.addFunctionality()}},{key:"showSheetMusic",value:function(){var e=Math.trunc(770*this.sys.canvas.width/1366);ct.content="location-3"===this.gameData.locationData.locationId?"Poooolit\xe9cnicaaaaaaaaaa, saaabiaaa moraaaadaaaaaaaaaa deee paaalaaaabraaaas que noo mooooriraaaaaaaaaaaa\xe1n,_ leeegeendaaaaaariaa antoooorchaaa sagraaaaaadaaaaaaaa een laa luuuuuuchaaaaa dee laa liiiibeeeeertaaaaaaaaaaad.__ Caaaamineeeeemoooos coon eeel coooraaaaaaazoooooo\xf3n,_ traaasceeendeeente ees nueeestraaaaa laaabooooooooor.__ Pooooolit\xe9cnicaaaaaaaaaaa, almaaa y raaazooooooooo\xf3n,_ brooooote dee luuuz y sabeeer ees tuuu amooooooooor. ":"Con laa cieenciaaa_ looograr laa_ aalboooraadaaaaaaa_ y__ een eel_ suuurcooo del tieeempoo sembraaaaaaaaaaaar_ la_ eesperaaanzaaaa dee hoy_ y__ ma\xf1aaaaanaaaaaaa,_ deeel proogreesooo_ dee laa humaaaanidaaaaaaaaaaaad.__ Reveeelaaaaaar los secreeeetooos del muuundooooooo,_ deeefeendeeeer suu dereeechooooo a__ soo\xf1aaaaaaaaaar,_ aaapreeendeeeer que noo eexiiisteeen los muuuurooooos;__ paaraaaa ser_ ees_ preeciiiiiisoooooo creeaaaaaaaaaar._";var t=new rt(this,ct);this.add.existing(t),this.pista=t.getByName("pista"),this.cameras.cameras[0].ignore(t);var n=this.cameras.add(this.sys.canvas.width/2-this.sys.canvas.width/4,this.politonadaGameObjects.pinkButton.y-t.height/2,e,t.height);n.setScroll(t.x-t.width/2,t.y-t.height/2),this.minigameObjects.forEach((function(e){n.ignore(e.gameObject)})),n.ignore(this.children.list[0]),this.politonadaGameObjects.lyricsSongGameObjects=t.getLyricsSongGameObjects()}},{key:"getElements",value:function(){this.minigameObjects.get("base-scene-background").gameObject.setDepth(-1),this.politonadaGameObjects.blueButton=this.minigameObjects.get("blue-button").gameObject,this.politonadaGameObjects.blueButton.setData("lyricPosition",1),this.politonadaGameObjects.blueButton.setDepth(1),this.politonadaGameObjects.pinkButton=this.minigameObjects.get("pink-button").gameObject,this.politonadaGameObjects.pinkButton.setData("lyricPosition",0),this.politonadaGameObjects.pinkButton.setDepth(1),this.politonadaGameObjects.greenButton=this.minigameObjects.get("green-button").gameObject,this.politonadaGameObjects.greenButton.setData("lyricPosition",-1),this.politonadaGameObjects.greenButton.setDepth(1),this.aKey=this.input.keyboard.addKey("Q"),this.sKey=this.input.keyboard.addKey("S"),this.dKey=this.input.keyboard.addKey("C"),this.addEventKey(this.aKey),this.addEventKey(this.sKey),this.addEventKey(this.dKey)}},{key:"addEventKey",value:function(e){var t=this;e.on("down",(function(e){var n=e.originalEvent.key;"c"===n?t.checkKeyPressed(t.politonadaGameObjects.blueButton,47082):"s"===n?t.checkKeyPressed(t.politonadaGameObjects.pinkButton,16731352):"q"===n&&t.checkKeyPressed(t.politonadaGameObjects.greenButton,34068)})),e.on("up",(function(e){t.clicked=!1;var n=e.originalEvent.key;if("q"===n||"s"===n||"c"===n){var i=t.politonadaGameObjects.greenButton.getByName("button-Background"),o=t.politonadaGameObjects.pinkButton.getByName("button-Background"),a=t.politonadaGameObjects.blueButton.getByName("button-Background");i.clearAlpha(),o.clearAlpha(),a.clearAlpha()}}))}},{key:"checkKeyPressed",value:function(e,t){this.lyricsAnswerClicked=this.findLyricsAnswerClicked(e,t),e.getByName("button-Background").setAlpha(.8)}},{key:"addFunctionality",value:function(){var e=this;this.minigameScene.addFuncionalityPauseButton(this.gameData).setInteractive().on("pointerdown",(function(){e.music.pause()})),this.addPointerOverOnInteractiveObject(this.politonadaGameObjects.blueButton),this.politonadaGameObjects.blueButton.setInteractive().on("pointerdown",(function(){e.lyricsAnswerClicked=e.findLyricsAnswerClicked(e.politonadaGameObjects.blueButton,1091828)})),this.politonadaGameObjects.blueButton.setInteractive().on("pointerup",(function(){e.clicked=!1})),this.addPointerOverOnInteractiveObject(this.politonadaGameObjects.pinkButton),this.politonadaGameObjects.pinkButton.setInteractive().on("pointerdown",(function(){e.lyricsAnswerClicked=e.findLyricsAnswerClicked(e.politonadaGameObjects.pinkButton,15927012)})),this.politonadaGameObjects.pinkButton.setInteractive().on("pointerup",(function(){e.clicked=!1})),this.addPointerOverOnInteractiveObject(this.politonadaGameObjects.greenButton),this.politonadaGameObjects.greenButton.setInteractive().on("pointerdown",(function(){e.lyricsAnswerClicked=e.findLyricsAnswerClicked(e.politonadaGameObjects.greenButton,4124683)})),this.politonadaGameObjects.greenButton.setInteractive().on("pointerup",(function(){e.clicked=!1}))}},{key:"activateAnimation",value:function(){var e=this.politonadaGameObjects.lyricsSongGameObjects[0],t=-this.pista.width/2,n=e.width;"location-4"===this.gameData.locationData.locationId&&e.x-n/2>=t-n&&e.x-n/2<=.123*-this.pista.width&&!this.music.isPlaying&&!this.music.isPaused&&this.music.play(),e.x-n/2>=t-n&&e.x-n/2<=.45*-this.pista.width&&this.stopAnimation&&(this.stopAnimation=!1,this.animation.anims.play("sing"))}},{key:"addPointerOverOnInteractiveObject",value:function(e){e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){e.getByName("button-Background").setAlpha(.8)})),e.setInteractive().on("pointerout",(function(){e.getByName("button-Background").clearAlpha()}))}},{key:"findLyricsAnswerClicked",value:function(e,t){var n,i=this;return this.politonadaGameObjects.lyricsSongGameObjects.forEach((function(o){var a=-i.pista.width/2,s=o.width;o.x-s/2>=a-s&&o.x-s/2<=a+.05*i.pista.width&&o.getData("lyricPosition")===e.getData("lyricPosition")&&!0!==o.getData("selected")&&(n=o,o.getByName("button-Background").setTint(t),i.clicked=!0,i.score+=3,i.hits++,o.setData("selected",!0))})),n}},{key:"playerAnimation",value:function(){var e=this,t="location-4"===this.gameData.locationData.locationId;this.music=this.sound.add("location-3"===this.gameData.locationData.locationId?"politonada-coro-audio":"politonada-estrofas-audio"),this.music.play(),t&&this.music.stop(),this.sound.pauseOnBlur=!1,this.generateAvatarSinger(),this.avatarSingerAnimation(),this.music.once("complete",(function(t){e.animation.anims.stop(),e.endMinigame(Math.ceil(e.score),"ACIERTOS: "+e.hits+"/"+e.politonadaGameObjects.lyricsSongGameObjects.length)}))}},{key:"generateAvatarSinger",value:function(){var e=this.minigameObjects.get("player-background").gameObjectSpecifications;this.animation=this.add.sprite(e.scale.objectPositionX,e.scale.objectPositionY,this.gameData.userData.player_avatarId+"-singer-sprite")}},{key:"avatarSingerAnimation",value:function(){var e={key:"sing",frames:this.anims.generateFrameNames(this.gameData.userData.player_avatarId+"-singer-sprite",{start:0,end:5}),frameRate:6,yoyo:!0,repeat:-1},t=this.minigameObjects.get("player-background");this.anims.create(e),this.animation.setDisplaySize(.6*t.gameObjectSpecifications.scale.objectWidth,t.gameObjectSpecifications.scale.objectHeight),t.gameObject.setVisible(!1),this.animation.anims.load("sing"),this.stopAnimation=!0}},{key:"endMinigame",value:function(e,t){"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.off("value"),this.getStarsNumber(this.hits),this.gameData.locationData.locationScore=e,this.gameData.locationData.minigameEvaluationParameters=t,this.scene.stop(this.scene.key),m.gameMusic.resume(),this.scene.start("MinigameSummaryScene",this.gameData)}},{key:"getStarsNumber",value:function(e){this.gameData.locationData.locationStarsNumber=e>=37?3:e<=36&&e>=25?2:e<=24&&e>=12?1:0}}]),n}(),lt={titleBar:{type:"title-bar",element:"title-bar",assetName:"title-bar-background",name:"title-bar",content:"EL AHORCADO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},powerupsBar:{type:"powerups-bar",element:"powerups-bar",assetName:"powerups-card-background",name:"powerups-bar",content:"POWERUPS",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:140,objectPositionX:1048,objectPositionY:200}},gameobjects:[_,{type:"image",element:"illustration",assetName:"ahorcado-panel-background",name:"minigame-panel-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:603,objectPositionX:380,objectPositionY:432}},{type:"text",element:"riddle-title",name:"riddle-title",content:"Adivina Adivinador",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:660,objectHeight:136,objectPositionX:380,objectPositionY:210}},{type:"image",element:"backround",assetName:"ahorcado-illustration-panel-background",name:"hangman-card-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:576,objectHeight:603,objectPositionX:1048,objectPositionY:432}},{type:"image",element:"backround",assetName:"ahorcado-panel-background",name:"animation-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:550,objectHeight:400,objectPositionX:1048,objectPositionY:520}},{type:"image",element:"backround",assetName:"vertical-pole-drawing",name:"vertical-pole",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:20,objectHeight:335,objectPositionX:890,objectPositionY:549}},{type:"image",element:"backround",assetName:"horizontal-pole-drawing",name:"horizontal-pole",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:250,objectHeight:20,objectPositionX:995,objectPositionY:391}},{type:"image",element:"backround",assetName:"hangman-arms-drawing",name:"hangman-arms",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:200,objectHeight:55,objectPositionX:1055,objectPositionY:565}},{type:"image",element:"backround",assetName:"hangman-legs-drawing",name:"hangman-legs",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:164,objectHeight:105,objectPositionX:1055,objectPositionY:645}},{type:"image",element:"backround",assetName:"hangman-body-drawing",name:"hangman-body",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:50,objectHeight:90,objectPositionX:1055,objectPositionY:582}},{type:"image",element:"backround",assetName:"hangman-head-drawing",name:"hangman-head",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:88,objectHeight:84,objectPositionX:1055,objectPositionY:501}},{type:"image",element:"backround",assetName:"rope-drawing",name:"rope",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:20,objectHeight:73,objectPositionX:1055,objectPositionY:418}},{type:"image",element:"backround",assetName:"hanging-rope-drawing",name:"hanging-rope",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:116,objectHeight:108,objectPositionX:1055,objectPositionY:501}},{type:"text",element:"riddle-clue",name:"riddle-clue",content:"Texto de la pista",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"23px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:550,objectHeight:70,objectPositionX:1048,objectPositionY:320}},{type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"clue-button",content:"PISTA\n(-3 intentos)",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:165,objectHeight:65,objectPositionX:1250,objectPositionY:693}}]},ht=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"ElAhorcadoScene"})).isCorrectAnswer=!1,e.elAhorcadoGameObjects={titleRiddle:null,riddle_clue:null,keyboardObjects:new Map,answerBox:new Map,hangmanVerticalPole:null,hangmanHorizontalPole:null,hangmanBody:null,hangmanHead:null,hangmanArms:null,hangmanLegs:null,hangmanRope:null,hangmanHangingRope:null},e.minigameScene=new Ue,e.minigameObjects=new Map,e.powerUpsgameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.failedAttempts=0,this.gameData=e}},{key:"create",value:function(){this.minigameScene.generateMinigame(this,lt),this.minigameObjects=this.minigameScene.getGameScene.getGameObjects,this.powerupsBar=this.minigameScene.getPowerupsBar(),this.powerUpsgameObjects=this.powerupsBar.getPowerupsAvailable(),this.powerupsBar.updateComponentData(this.gameData),this.powerupsBar.setDepth(1),this.powerupsBar.unlockPowerUpsAvailables(),this.getElAhorcadoElements(),this.showRiddle(),this.addFunctionality()}},{key:"update",value:function(){if(this.failedAttempts>=5&&null!==this.riddleClueButton){var e=this.riddleClueButton.getByName("button-Background"),t=this.riddleClueButton.getByName("button-text");e.setTint(8684163),t.setAlpha(.5),this.riddleClueButton.setInteractive().disableInteractive()}}},{key:"getElAhorcadoElements",value:function(){this.minigameObjects.get("base-scene-background").gameObject.setDepth(-1),this.elAhorcadoGameObjects.titleRiddle=this.minigameObjects.get("riddle-title").gameObject,this.elAhorcadoGameObjects.riddle_clue=this.minigameObjects.get("riddle-clue").gameObject,this.elAhorcadoGameObjects.riddle_clue.setVisible(!1),this.riddleClueButton=this.minigameObjects.get("clue-button").gameObject,this.elAhorcadoGameObjects.titleRiddle=this.minigameObjects.get("riddle-title").gameObject,this.elAhorcadoGameObjects.hangmanVerticalPole=this.minigameObjects.get("vertical-pole").gameObject,this.elAhorcadoGameObjects.hangmanVerticalPole.setVisible(!1),this.elAhorcadoGameObjects.hangmanHorizontalPole=this.minigameObjects.get("horizontal-pole").gameObject,this.elAhorcadoGameObjects.hangmanHorizontalPole.setVisible(!1),this.elAhorcadoGameObjects.hangmanBody=this.minigameObjects.get("hangman-body").gameObject,this.elAhorcadoGameObjects.hangmanBody.setVisible(!1),this.elAhorcadoGameObjects.hangmanHead=this.minigameObjects.get("hangman-head").gameObject,this.elAhorcadoGameObjects.hangmanHead.setVisible(!1),this.elAhorcadoGameObjects.hangmanArms=this.minigameObjects.get("hangman-arms").gameObject,this.elAhorcadoGameObjects.hangmanArms.setVisible(!1),this.elAhorcadoGameObjects.hangmanLegs=this.minigameObjects.get("hangman-legs").gameObject,this.elAhorcadoGameObjects.hangmanLegs.setVisible(!1),this.elAhorcadoGameObjects.hangmanRope=this.minigameObjects.get("rope").gameObject,this.elAhorcadoGameObjects.hangmanRope.setVisible(!1),this.elAhorcadoGameObjects.hangmanHangingRope=this.minigameObjects.get("hanging-rope").gameObject,this.elAhorcadoGameObjects.hangmanHangingRope.setVisible(!1),this.animationBackground=this.minigameObjects.get("animation-background"),this.generateHangmanAnimation(this.animationBackground.gameObjectSpecifications.scale,this.animationBackground.gameObject)}},{key:"generateHangmanAnimation",value:function(e,t){this.minigameObjects.get("hangman-card-background").gameObject.setAlpha(.75);var n=this.add.sprite(e.objectPositionX,e.objectPositionY,"hangman-animation-backgrund");n.setDepth(-1);var i={key:"hangman-animation",frames:this.anims.generateFrameNames("hangman-animation-backgrund",{start:0,end:5}),frameRate:1,yoyo:!0,repeat:-1};this.anims.create(i),n.setDisplaySize(e.objectWidth,e.objectHeight),n.anims.play("hangman-animation"),t.setVisible(!1)}},{key:"showRiddle",value:function(){var e=this.gameData.locationData.minigameQuestionsData.questionsDB[0];this.elAhorcadoGameObjects.titleRiddle.setText(e.question_text),this.elAhorcadoGameObjects.riddle_clue.setText(e.question_correct_answer.answer_feedback);var t=new nt(this,e.question_correct_answer.answer_text.toUpperCase(),"alphabeticKeyboard",{objectPositionX:380,objectPositionY:370,objectWidth:650,objectHeight:261,objectHeightRatio:1,objectWidthRatio:1},{objectPositionX:380,objectPositionY:575,objectWidth:650,objectHeight:164,objectHeightRatio:1,objectWidthRatio:1});this.elAhorcadoGameObjects.keyboardObjects=t.getPiecesGroup(),this.getAnsweBox()}},{key:"getAnsweBox",value:function(){var e=this;this.elAhorcadoGameObjects.keyboardObjects.forEach((function(t){if("keyBox"===t.getData("type")){var n={answerName:t.name,answerBoxContent:t.getData("key"),positionX:t.x,positionY:t.y,width:t.width,height:t.height,gamObject:t,completed:!1};e.elAhorcadoGameObjects.answerBox.set(t.name,n)}}))}},{key:"addFunctionality",value:function(){var e=this;this.minigameScene.addFuncionalityPauseButton(this.gameData),this.elAhorcadoGameObjects.keyboardObjects.forEach((function(t){"keyButton"===t.getData("type")&&(t.setInteractive().on("pointerover",(function(){t.getByName("button-Background").setTint(2752256)})),t.setInteractive().on("pointerout",(function(){t.getByName("button-Background").clearTint()})),t.setInteractive().on("pointerdown",(function(){e.checkSelectedAnswer(t),t.setVisible(!1),e.checkHangman(),t.setInteractive().disableInteractive(),e.isCorrectAnswer=!1})))})),le(this.riddleClueButton),this.riddleClueButton.setInteractive().on("pointerup",(function(){var t=e.riddleClueButton.getByName("button-Background"),n=e.riddleClueButton.getByName("button-text");t.setTint(8684163),n.setAlpha(.5),e.elAhorcadoGameObjects.riddle_clue.setVisible(!0),e.drawHangman(e.failedAttempts+1),e.drawHangman(e.failedAttempts+2),e.drawHangman(e.failedAttempts+3),e.failedAttempts+=3,e.minigameScene.showScore(e.failedAttempts),e.riddleClueButton.setInteractive().disableInteractive()})),this.addFunctionalityToPoliperroPowerUp()}},{key:"addFunctionalityToPoliperroPowerUp",value:function(){var e=this,t=this.powerUpsgameObjects.get("poliperro-powerup");t.setInteractive().on("pointerdown",(function(){e.failedAttempts>0&&(e.powerupsBar.lessPowerUpNumber(t.name),e.failedAttempts--,e.minigameScene.showScore(e.failedAttempts),e.restoreHangmanDrawing(e.failedAttempts))}))}},{key:"checkSelectedAnswer",value:function(e){var t=this;this.elAhorcadoGameObjects.answerBox.forEach((function(n){e.getByName("button-text").text===n.gamObject.getData("key")&&(n.gamObject.getByName("button-text").setVisible(!0),t.isCorrectAnswer=!0,n.completed=!0)})),this.checkRiddle()}},{key:"checkHangman",value:function(){this.isCorrectAnswer||(this.failedAttempts++,this.minigameScene.showScore(this.failedAttempts),this.drawHangman(this.failedAttempts))}},{key:"drawHangman",value:function(e){switch(e){case 1:this.elAhorcadoGameObjects.hangmanHead.setVisible(!0);break;case 2:this.elAhorcadoGameObjects.hangmanBody.setVisible(!0);break;case 3:this.elAhorcadoGameObjects.hangmanArms.setVisible(!0);break;case 4:this.elAhorcadoGameObjects.hangmanLegs.setVisible(!0);break;case 5:this.elAhorcadoGameObjects.hangmanVerticalPole.setVisible(!0);break;case 6:this.elAhorcadoGameObjects.hangmanHorizontalPole.setVisible(!0);break;case 7:this.elAhorcadoGameObjects.hangmanRope.setVisible(!0);break;case 8:this.elAhorcadoGameObjects.hangmanHangingRope.setVisible(!0),this.gameData.locationData.locationStarsNumber=0,this.endMinigame(0,"INTENTOS FALLIDOS: "+this.failedAttempts+"/8")}}},{key:"restoreHangmanDrawing",value:function(e){this.elAhorcadoGameObjects.hangmanHead.setVisible(!1),this.elAhorcadoGameObjects.hangmanBody.setVisible(!1),this.elAhorcadoGameObjects.hangmanArms.setVisible(!1),this.elAhorcadoGameObjects.hangmanLegs.setVisible(!1),this.elAhorcadoGameObjects.hangmanVerticalPole.setVisible(!1),this.elAhorcadoGameObjects.hangmanHorizontalPole.setVisible(!1),this.elAhorcadoGameObjects.hangmanRope.setVisible(!1),this.elAhorcadoGameObjects.hangmanHangingRope.setVisible(!1);for(var t=1;t<=e;t++)this.drawHangman(t)}},{key:"checkRiddle",value:function(){var e=!0;this.elAhorcadoGameObjects.answerBox.forEach((function(t){1!=t.completed&&(e=!1)})),e&&(this.getStarsNumber(this.failedAttempts),this.endMinigame(50-2*this.failedAttempts,"INTENTOS FALLIDOS: "+this.failedAttempts+"/8"))}},{key:"endMinigame",value:function(e,t){var n=this;"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.off("value"),setTimeout((function(){n.gameData.locationData.locationScore=n.gameData.locationData.locationStarsNumber<=1?e:e*n.gameData.locationData.locationStarsNumber,n.gameData.locationData.minigameEvaluationParameters=t,n.scene.stop(n.scene.key),n.scene.start("MinigameSummaryScene",n.gameData)}),500)}},{key:"getStarsNumber",value:function(e){this.gameData.locationData.locationStarsNumber=0===e?3:e>=1&&e>=2?2:e>=3&&e>=7?1:0}}]),n}(),dt=[{type:"image",element:"background",assetName:"area-map-2-background",name:"area-map-2-background",scale:y},{type:"image",element:"background",assetName:"area-map-2-background",name:"area-map-2-background",scale:y},S,{type:"interactiveObject",element:"bottom-title-button",assetName:"world-icon-background",name:"return-button",content:"MAPA EPN",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:150,objectHeight:115,objectPositionX:245,objectPositionY:93}},{type:"text",element:"title",name:"title-name",content:"MAPA ZONA\nADMINISTRATIVA",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"justify",fontSize:"35",strokeThickness:14,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:60,objectPositionX:340,objectPositionY:35},originX:0,originY:0},O,P,E,{type:"interactiveObject",element:"location",name:"location-1",assetName:"location-point-icon-background",content:"ENTRADA EPN",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:350,objectPositionY:588}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-2",content:"MUSEO EPN",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:850,objectPositionY:508}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-3",content:"TEATRO",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:850,objectPositionY:395}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-4",content:"HEMICICLO",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:790,objectPositionY:250}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-5",content:"BIBLIOTECA GENERAL",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:910,objectPositionY:275}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-6",content:"VICERRECTORADO",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:975,objectPositionY:165}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-7",content:"RECTORADO",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:114,objectPositionX:860,objectPositionY:120}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-8",content:"CONSEJO POLIT\xc9CNICO",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:114,objectPositionX:752,objectPositionY:65}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"location-9",content:"DGIP",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:114,objectPositionX:690,objectPositionY:195}},{type:"interactiveObject",element:"bottom-title-button",assetName:"virtual-world-access-icon-background",name:"enter-button",content:"EXPLORAR",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:130,objectHeight:125,objectPositionX:1120,objectPositionY:660}}],pt={type:"image",element:"background",assetName:"player",name:"player-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:45,objectHeight:70,objectPositionX:0,objectPositionY:0}},mt={type:"image",element:"background",assetName:"selected-location-point-icon-background",name:"selected-point",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:45,objectHeight:35,objectPositionX:0,objectPositionY:0}},gt={type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"play-minigame-button",content:"JUGAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:140,objectHeight:50,objectPositionX:0,objectPositionY:0}},ft={type:"image",element:"background",assetName:"player-background",name:"player-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:55,objectHeight:90,objectPositionX:0,objectPositionY:0}},bt={type:"image",element:"background",assetName:"polifiesta-powerup-icon-background",name:"powerup-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:85,objectHeight:80,objectPositionX:0,objectPositionY:0}},yt={type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"play-minigame-button",content:"JUGAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:140,objectHeight:50,objectPositionX:692,objectPositionY:687}},vt=[{areaId:"area-2",nodeNumber:1,locationId:"location-1",locationName:"Entrada EPN",minigameId:"PolitriviaScene",minigameName:"Politrivia",badgeId:"badge-1"},{areaId:"area-2",nodeNumber:-1,locationId:"hide-location",locationName:"Polimapa",minigameId:"PolimapaScene",minigameName:"Polimapa",badgeId:"badge-2"},{areaId:"area-2",nodeNumber:2,locationId:"location-2",locationName:"Museo EPN",minigameId:"PolimuseoScene",minigameName:"Polimuseo",badgeId:"badge-5"},{areaId:"area-2",nodeNumber:3,locationId:"location-3",locationName:"Teatro",minigameId:"PolitonadaScene",minigameName:"Politonada",badgeId:"badge-3"},{areaId:"area-2",nodeNumber:4,locationId:"location-4",locationName:"Hemiciclo",minigameId:"PolitonadaScene",minigameName:"Politonada",badgeId:"badge-4"},{areaId:"area-2",nodeNumber:5,locationId:"location-5",locationName:"Biblioteca General",minigameId:"ElAhorcadoScene",minigameName:"El Ahorcado",badgeId:"badge-10"},{areaId:"area-2",nodeNumber:6,locationId:"location-6",locationName:"Vicerrectorado",minigameId:"PolitriviaScene",minigameName:"Politrivia",badgeId:"badge-6"},{areaId:"area-2",nodeNumber:7,locationId:"location-7",locationName:"Rectorado",minigameId:"ContraTiempoScene",minigameName:"Contra el Tiempo",badgeId:"badge-8"},{areaId:"area-2",nodeNumber:8,locationId:"location-8",locationName:"Consejo Polit\xe9cnico",minigameId:"ElAhorcadoScene",minigameName:"El Ahorcado",badgeId:"badge-7"},{areaId:"area-2",nodeNumber:9,locationId:"location-9",locationName:"DGIP",minigameId:"PolitriviaScene",minigameName:"Politrivia",badgeId:"badge-9"}],_t=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MapAreaScene"})).pathPoint=0,e.canRun=!1,e.addressChanged=!1,e.gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e.paths=new Map,e.nodes=new Map,e.locationsPlayButtons=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.currentNode=-1===this.currentNode||""===e.locationData.locationId||-1===e.locationData.nodeNumber?1:e.locationData.nodeNumber,this.arrivalNode=this.currentNode,this.speed=10,this.isForward=!0,this.gameData=e,this.gameData.returnSceneName="MapScene"}},{key:"create",value:function(){var e=this;this.gameScene.generateGameObjects(dt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.generateRoad(),this.getElements(),this.generatePlayer(),this.addFunctionality(),this.updateSceneData(this.gameData.userData),"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.updateSceneData(n)}))}},{key:"update",value:function(){this.canRun&&(this.isForward?this.advancePlayer():this.backPlayer())}},{key:"advancePlayer",value:function(){var e=this.currentNode+1;if(e<=this.arrivalNode)if(this.pathPoint+=this.calculateSpeed(this.currentNode,e),this.pathPoint>=1)this.currentNode++,this.pathPoint=0;else{this.player.flipX=4===e||3===e||e>6;var t=this.paths.get(this.currentNode+"-"+e).getPoint(this.pathPoint);this.player.setPosition(t.x,t.y)}else this.currentNode=this.arrivalNode,this.locationsPlayButtons.get(this.currentNode).setVisible(!0),this.player.anims.stop("run"),this.canRun=!1,this.player.setPosition(this.nodes.get(this.arrivalNode).x,this.nodes.get(this.arrivalNode).y)}},{key:"backPlayer",value:function(){var e=this.currentNode-1;if(e>=this.arrivalNode)if(this.pathPoint-=this.calculateSpeed(e,this.currentNode),this.pathPoint<=0)this.currentNode--,this.pathPoint=1;else{this.player.flipX=3!==e&&2!==e&&e<6;var t=this.paths.get(e+"-"+this.currentNode).getPoint(this.pathPoint);this.player.setPosition(t.x,t.y)}else this.currentNode=this.arrivalNode,this.player.anims.stop("run"),this.locationsPlayButtons.get(this.currentNode).setVisible(!0),this.canRun=!1,this.player.setPosition(this.nodes.get(this.arrivalNode).x,this.nodes.get(this.arrivalNode).y)}},{key:"generateRoad",value:function(){var e=this,t=0;this.sceneGameObjects.forEach((function(n){"location"===n.gameObjectSpecifications.element&&(n.gameObject.setData("name",t+1),e.nodes.set(t+1,n.gameObject),t++)}));var n,i=this.add.graphics();i.lineStyle(25,10813440,1),t=0,this.nodes.forEach((function(o){if(0===t)n=o;else{var a=new Phaser.Curves.Path(n.x,n.y).lineTo(o.x,o.y);a.name=n.getData("name")+"-"+o.getData("name"),e.paths.set(a.name,a),n=o,a.draw(i)}o.setDepth(1),t++})),this.selectedLocation=this.gameScene.generateGameObject(mt),this.gameScene.addGameObject(this.selectedLocation),this.selectedLocation.setPosition(this.nodes.get(this.arrivalNode).x,this.nodes.get(this.arrivalNode).y),this.selectedLocation.setDepth(1),this.sceneGameObjects.get("area-map-2-background").gameObject.setDepth(-1)}},{key:"generatePlayer",value:function(){var e=JSON.parse(JSON.stringify(pt));e.scale=R(this,e.scale),e.scale.objectPositionX=this.nodes.get(this.currentNode).x,e.scale.objectPositionY=this.nodes.get(this.currentNode).y,this.anims.generateFrameNames(this.gameData.userData.player_avatarId+"-sprite",{start:0,end:1}),this.player=this.add.sprite(e.scale.objectPositionX,e.scale.objectPositionY,this.gameData.userData.player_avatarId+"-sprite"),this.player.setOrigin(.5,1),this.player.setDisplaySize(e.scale.objectWidth,e.scale.objectHeight),this.player.setDepth(1)}},{key:"getElements",value:function(){this.homeButton=this.sceneGameObjects.get("home-button").gameObject,this.assistantButton=this.sceneGameObjects.get("assistant-button").gameObject,this.settingsButton=this.sceneGameObjects.get("settings-button").gameObject,this.returnButton=this.sceneGameObjects.get("return-button").gameObject,this.enterAreaButton=this.sceneGameObjects.get("enter-button").gameObject,this.totalScore=this.sceneGameObjects.get("total-score-title").gameObject}},{key:"addFunctionality",value:function(){var e,t,n,i=this;ke(this,this.homeButton,this.gameData),Se(this,this.assistantButton),we(this,this.settingsButton),e=this,n=this.gameData,le(t=this.returnButton),t.setInteractive().on("pointerdown",(function(){je(n),e.scene.start(n.returnSceneName,n)})),le(this.enterAreaButton),this.enterAreaButton.setInteractive().on("pointerdown",(function(){je(i.gameData),i.gameData.returnSceneName=i.scene.key,i.gameData.locationData.playerPositionX=null,i.gameData.locationData.playerPositionY=null,i.scene.stop(i.scene.key),i.scene.start("VirtualWorldScene",i.gameData)})),this.playerAnimation(),this.nodes.forEach((function(e){i.generatePlayButtonMinigame(e,e.getData("name")),e.setInteractive({cursor:l}),e.setInteractive().on("pointerdown",(function(){if(i.locationsPlayButtons.get(i.currentNode).setVisible(!1),i.arrivalNode=e.getData("name"),i.selectedLocation.setPosition(i.nodes.get(i.arrivalNode).x,i.nodes.get(i.arrivalNode).y),i.currentNode===i.arrivalNode){i.locationsPlayButtons.get(i.currentNode).setVisible(!0),i.player.anims.stop("run"),i.pathPoint=0;var t=i.nodes.get(i.arrivalNode);i.player.setPosition(t.x,t.y),i.canRun=!1}else i.currentNode>i.arrivalNode?(i.player.anims.play("run"),i.player.flipX=!0,i.isForward=!1,i.canRun=!0,i.pathPoint=1):(i.player.anims.play("run"),i.player.flipX=!1,i.isForward=!0,i.canRun=!0,i.pathPoint=0)}))}))}},{key:"generatePlayButtonMinigame",value:function(e,t){var n=this,i=JSON.parse(JSON.stringify(gt));i.scale=R(this,i.scale);var o=new x(this,i),a=e.y+e.height/2+o.height/2;1!==t&&5!==t&&8!==t||(a=e.y+e.height/2+3*o.height/4),o.setPosition(e.x,a),o.setVisible(t===this.currentNode),le(o),o.setInteractive().on("pointerdown",(function(){je(n.gameData),vt.forEach((function(e){"location-"+n.currentNode===e.locationId&&(n.gameData.returnSceneName=n.scene.key,n.gameData.locationData=e,n.gameData.locationData.playerPositionX=null,n.gameData.locationData.playerPositionY=null)})),n.scene.stop("MapAreaScene"),n.scene.start("LoadScene",n.gameData)})),o.setDepth(1),this.add.existing(o),this.locationsPlayButtons.set(t,o)}},{key:"calculateSpeed",value:function(e,t){var n=this.paths.get(e+"-"+t);return this.speed/n.getLength()}},{key:"playerAnimation",value:function(){var e={key:"run",frames:this.anims.generateFrameNames(this.gameData.userData.player_avatarId+"-sprite",{start:1,end:7}),frameRate:6,yoyo:!0,repeat:-1};this.anims.create(e),this.player.anims.load("run")}},{key:"updateSceneData",value:function(e){var t=this;this.totalScore.setText("POLIPUNTOS: "+e.player_totalScore),this.nodes.forEach((function(n){null!=n&&n.updateLocationStars(e.player_areas[t.gameData.locationData.areaId].area_locations[n.name].location_starsNumber)}))}}]),n}(),wt=[_,S,{type:"image",element:"background",assetName:"map-background",name:"map-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1210,objectHeight:658,objectPositionX:635,objectPositionY:427}},{type:"text",element:"title",name:"title-name",content:"MAPA EPN",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"50",strokeThickness:20,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:70,objectPositionX:350,objectPositionY:30},originX:.5,originY:0},O,{type:"interactiveObject",element:"map-area",assetName:"area-1-background",name:"area-1",content:"ZONA 1",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:380,objectHeight:284,objectPositionX:238,objectPositionY:582}},{type:"interactiveObject",element:"map-area",assetName:"area-3-background",name:"area-3",content:"ZONA\nDEPORTIVA",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:515,objectHeight:281,objectPositionX:751,objectPositionY:579}},{type:"interactiveObject",element:"map-area",assetName:"area-4-background",name:"area-4",content:"ZONA 4",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:593,objectHeight:318,objectPositionX:805,objectPositionY:350}},{type:"interactiveObject",element:"map-area",assetName:"area-5-background",name:"area-5",content:"ZONA 5",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:290,objectHeight:210,objectPositionX:1081,objectPositionY:212}},{type:"interactiveObject",element:"map-area",assetName:"area-6-background",name:"area-6",content:"ZONA\n6",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:509,objectHeight:333,objectPositionX:680,objectPositionY:286}},{type:"interactiveObject",element:"map-area",assetName:"area-2-background",name:"area-2",content:"ZONA\nADMINISTRATIVA",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:424,objectHeight:292,objectPositionX:470,objectPositionY:577}},P,E],kt=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MapScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e.homeButton=null,e.enterAreaButton=null,e.totalScore=null,e.assistantButton=null,e.mapArea1=null,e.mapArea2=null,e.mapArea3=null,e.mapArea4=null,e.mapArea5=null,e.mapArea6=null,e}return _createClass(n,[{key:"init",value:function(e){this.selectedArea=!1,this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){var e=this;this.gameScene.generateGameObjects(wt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.getElements(),this.addFunctionality(),this.updateSceneData(this.gameData.userData),this.enterAreaButton.setAlpha(.25),this.enterAreaButton.disableInteractive(),"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.updateSceneData(n)}))}},{key:"getElements",value:function(){this.homeButton=this.sceneGameObjects.get("home-button").gameObject,this.assistantButton=this.sceneGameObjects.get("assistant-button").gameObject,this.settingsButton=this.sceneGameObjects.get("settings-button").gameObject,this.totalScore=this.sceneGameObjects.get("total-score-title").gameObject,this.mapArea1=this.sceneGameObjects.get("area-1").gameObject,this.mapArea2=this.sceneGameObjects.get("area-2").gameObject,this.enterAreaButton=this.mapArea2.getByName("playAreaButton"),this.mapArea2.getByName("map-area-background").setAlpha(.6),this.mapArea3=this.sceneGameObjects.get("area-3").gameObject,this.mapArea4=this.sceneGameObjects.get("area-4").gameObject,this.mapArea5=this.sceneGameObjects.get("area-5").gameObject,this.mapArea6=this.sceneGameObjects.get("area-6").gameObject}},{key:"addFunctionality",value:function(){var e=this;ke(this,this.homeButton,this.gameData),Se(this,this.assistantButton),we(this,this.settingsButton);var t=[new Phaser.Geom.Point(0,305.5),new Phaser.Geom.Point(160,306.5),new Phaser.Geom.Point(245,292.5),new Phaser.Geom.Point(251.5,260),new Phaser.Geom.Point(274,218.5),new Phaser.Geom.Point(443,70),new Phaser.Geom.Point(395,77.5),new Phaser.Geom.Point(273,0),new Phaser.Geom.Point(215,0),new Phaser.Geom.Point(191,17.5),new Phaser.Geom.Point(175.5,9),new Phaser.Geom.Point(103.5,92),new Phaser.Geom.Point(119.5,137),new Phaser.Geom.Point(102,152),new Phaser.Geom.Point(141.5,163)];t.forEach((function(t){t.x=Math.trunc(t.x*e.sys.canvas.width/1360),t.y=Math.trunc(t.y*e.sys.canvas.height/768)})),this.mapArea2.setInteractive({cursor:l}),this.mapArea2.setInteractive(new Phaser.Geom.Polygon(t),Phaser.Geom.Polygon.Contains).on("pointerdown",(function(){e.enterAreaButton.clearAlpha(),e.enterAreaButton.setInteractive(),e.mapArea2.getByName("map-area-background").setTint(51061),e.selectedArea=!0,e.enterAreaButton.setData("areaId","area-2")})),this.mapArea2.setInteractive().on("pointerover",(function(){e.mapArea2.getByName("map-area-background").setTint(6124414)})),this.mapArea2.setInteractive().on("pointerout",(function(){e.selectedArea||e.mapArea2.getByName("map-area-background").clearTint()})),le(this.enterAreaButton),this.enterAreaButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.gameData.returnSceneName=e.scene.key,e.gameData.locationData={areaId:e.enterAreaButton.getData("areaId"),nodeNumber:1,locationId:"",locationName:"",minigameId:"",minigameName:""},e.scene.stop(e.scene.key),e.scene.start("MapVideoScene",e.gameData)}))}},{key:"updateSceneData",value:function(e){this.totalScore.setText("POLIPUNTOS: "+e.player_totalScore),this.mapArea2.updateAreaScore(e.player_areas["area-2"].area_score),this.mapArea2.updateAreaStars(e.player_areas["area-2"].area_starsNumber)}}]),n}(),jt=[{type:"image",element:"background",assetName:"minimap-card-background",name:"minimap-border",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:150,objectPositionX:683,objectPositionY:640}},{type:"text",element:"title",name:"minimap-name",content:"MINIMAPA DE LA ZONA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:35,objectPositionX:683,objectPositionY:725}},S,{type:"interactiveObject",element:"bottom-title-button",assetName:"world-icon-background",name:"return-button",content:"MAPA ZONA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:150,objectHeight:115,objectPositionX:245,objectPositionY:93}},{type:"text",element:"title",name:"title-name",content:"ZONA\nADMINISTRATIVA",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"justify",fontSize:"35",strokeThickness:14,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:60,objectPositionX:340,objectPositionY:35},originX:0,originY:0},{type:"interactiveObject",element:"button",assetName:"up-button-background",name:"up-button",content:"",style:{fontSize:"16px",fontFamily:"Segoe UI Emoji",color:"#087CF5",align:"center",stroke:"#076BD3",strokeThickness:1},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:105,objectHeight:100,objectPositionX:214,objectPositionY:577}},{type:"interactiveObject",element:"button",assetName:"down-button-background",name:"down-button",content:"",style:{fontSize:"16px",fontFamily:"Segoe UI Emoji",color:"#087CF5",align:"center",stroke:"#076BD3",strokeThickness:1},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:105,objectHeight:100,objectPositionX:214,objectPositionY:686}},{type:"interactiveObject",element:"button",assetName:"left-button-background",name:"left-button",content:"",style:{fontSize:"16px",fontFamily:"Segoe UI Emoji",color:"#087CF5",align:"center",stroke:"#076BD3",strokeThickness:1},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:105,objectHeight:100,objectPositionX:100,objectPositionY:686}},{type:"interactiveObject",element:"button",assetName:"right-button-background",name:"right-button",content:"",style:{fontSize:"16px",fontFamily:"Segoe UI Emoji",color:"#087CF5",align:"center",stroke:"#076BD3",strokeThickness:1},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:105,objectHeight:100,objectPositionX:328,objectPositionY:686}},O,P,C,{type:"interactiveObject",element:"bottom-title-button",assetName:"enable-gamepad-button-background",name:"activate-gamepad-button",content:"MANDO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:125,objectPositionX:1258,objectPositionY:502}},E,{type:"interactiveObject",element:"bottom-title-button",assetName:"enter-icon-background",name:"enter-button",content:"ENTRAR",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:125,objectPositionX:1119,objectPositionY:654}}],St=[{type:"interactiveObject",element:"location-box",name:"location-1",assetName:"location-box-background",content:"ENTRADA EPN",style:{fontFamily:"Fredoka One",color:"#000000",stroke:"#FFFFFF",align:"center",fontSize:"25",strokeThickness:10},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:725,objectPositionY:1060}},{type:"interactiveObject",element:"location-box",assetName:"hide-location-box-background",name:"hide-location",content:"POLIMAPA",style:{fontFamily:"Fredoka One",color:"#000000",stroke:"#FFFFFF",align:"center",fontSize:"25",strokeThickness:10},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:2400,objectPositionY:1150}},{type:"interactiveObject",element:"location-box",assetName:"location-box-background",name:"location-2",content:"MUSEO EPN",style:{fontFamily:"Fredoka One",color:"#000000",stroke:"#FFFFFF",align:"center",fontSize:"25",strokeThickness:10},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:95,objectHeight:110,objectPositionX:3050,objectPositionY:950}},{type:"interactiveObject",element:"location-box",assetName:"location-box-background",name:"location-3",content:"TEATRO",style:{fontFamily:"Fredoka One",color:"#000000",stroke:"#FFFFFF",align:"center",fontSize:"25",strokeThickness:10},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:95,objectHeight:110,objectPositionX:2900,objectPositionY:670}},{type:"interactiveObject",element:"location",assetName:"location-point-icon-background",name:"building-access-point",content:"EDIFICIO ADMINISTRATIVO",style:{fontFamily:"Fredoka One",color:"#000000",stroke:"#FFFFFF",align:"center",fontSize:"25",strokeThickness:10},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:2624,objectPositionY:345}}],Ot=[{minimumXPosition:0,minimumYPosition:645,maximumXPosition:2440,maximumYPosition:1536},{minimumXPosition:1735,minimumYPosition:520,maximumXPosition:2300,maximumYPosition:640},{minimumXPosition:35,minimumYPosition:520,maximumXPosition:1020,maximumYPosition:640},{minimumXPosition:2445,minimumYPosition:1110,maximumXPosition:3780,maximumYPosition:1536},{minimumXPosition:3780,minimumYPosition:1210,maximumXPosition:3940,maximumYPosition:1536},{minimumXPosition:3940,minimumYPosition:1335,maximumXPosition:4075,maximumYPosition:1536},{minimumXPosition:2440,minimumYPosition:1e3,maximumXPosition:3645,maximumYPosition:1100},{minimumXPosition:2440,minimumYPosition:855,maximumXPosition:2530,maximumYPosition:1e3},{minimumXPosition:2740,minimumYPosition:765,maximumXPosition:2850,maximumYPosition:1e3},{minimumXPosition:2540,minimumYPosition:570,maximumXPosition:2860,maximumYPosition:700}],Pt=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"VirtualWorldScene"})).currentLocationName="",e.gamepad={isEnabled:!1,upButton:{gamepadButton:null,buttonIsDow:!1},downButton:{gamepadButton:null,buttonIsDow:!1},leftButton:{gamepadButton:null,buttonIsDow:!1},rightButton:{gamepadButton:null,buttonIsDow:!1},enterButton:{gamepadButton:null,buttonIsDow:!1}},e}return _createClass(n,[{key:"init",value:function(e){this.enterKey=this.input.keyboard.addKey("ENTER"),this.gameScene=new Ce(this),this.sceneGameObjects=new Map,this.locationsGameObjects=new Map,this.powerUpsGameObjects=new Map,this.locationsPlayButtons=new Map,this.gameData=e,this.gameData.returnSceneName="MapAreaScene"}},{key:"create",value:function(){var e=this;this.cursor=this.input.keyboard.createCursorKeys(),this.generateVirtualWorld(),this.generatePath(),this.generatePlayer(),this.addColliderToLocation(),this.generateScene(),this.updatePlayerPosition(),this.getElements(),this.addFuncionality(),this.animateCharacter(),this.updateSceneData(this.gameData.userData),this.updateGamepadStatus(m.isDeviceMobile||m.showGamepad),"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.updateSceneData(n)}))}},{key:"update",value:function(){this.player.setVelocity(0),this.player.setRotation(0),(this.cursor.up.isDown||this.gamepad.upButton.buttonIsDow)&&this.player.setVelocityY(-this.playerVelocityY),(this.cursor.down.isDown||this.gamepad.downButton.buttonIsDow)&&this.player.setVelocityY(this.playerVelocityY),(this.cursor.left.isDown||this.gamepad.leftButton.buttonIsDow)&&(this.player.flipX=!0,this.player.setVelocityX(-this.playerVelocityX)),(this.cursor.right.isDown||this.gamepad.rightButton.buttonIsDow)&&(this.player.flipX=!1,this.player.setVelocityX(this.playerVelocityX)),this.cursor.space.isDown&&(this.gamepad.upButton.gamepadButton.setVisible(!0),this.gamepad.downButton.gamepadButton.setVisible(!0),this.gamepad.leftButton.gamepadButton.setVisible(!0),this.gamepad.rightButton.gamepadButton.setVisible(!0),this.gamepad.enterButton.gamepadButton.setVisible(!0)),""!==this.currentLocationName?this.enableAccessMinigame():this.disableAccessMinigame(),m.showGamepad!==this.gamepad.isEnabled&&this.updateGamepadStatus(m.showGamepad)}},{key:"generateVirtualWorld",value:function(){var e=4100*this.sys.canvas.width/1366,t=1536*this.sys.canvas.height/768,n=2447.7*this.sys.canvas.width/1366,i=371.712*this.sys.canvas.height/768,o=this.cache.json.get("virtual-area-2");this.virtualWorld=this.matter.add.sprite(n,i,"virtual-area-2-background","virtualMapArea",{shape:o.virtualArea2}),this.virtualWorld.setSize(e,t),this.virtualWorld.setDisplaySize(e,t),this.matter.world.setBounds(0,0,e,t),this.cameras.main.setBounds(0,0,this.virtualWorld.width,this.virtualWorld.height),this.cameras.main.centerToBounds(),this.playerVelocityX=8*this.sys.canvas.width/1366,this.playerVelocityY=7*this.sys.canvas.height/768,m.isDeviceMobile&&this.add.image(e/2,t/2,"virtual-area-background").setDisplaySize(e,t),this.generateMinigameLocations(),this.addPowerUps()}},{key:"generatePlayer",value:function(){var e=JSON.parse(JSON.stringify(ft));e.scale=R(this,e.scale);var t=1536*this.sys.canvas.height/768;e.scale.objectPositionX=.15*this.sys.canvas.width,e.scale.objectPositionY=.86*t,this.playerOriginX=e.scale.objectPositionX,this.playerOriginY=e.scale.objectPositionY,this.anims.generateFrameNames(this.gameData.userData.player_avatarId+"-sprite",{start:0,end:10}),this.player=this.matter.add.sprite(e.scale.objectPositionX,e.scale.objectPositionY,this.gameData.userData.player_avatarId+"-sprite",this.gameData.userData.player_avatarId+"-matter-sprite",{label:this.gameData.userData.player_avatarId+"-sprite"}),this.player.setDisplaySize(e.scale.objectWidth,e.scale.objectHeight),this.cameras.main.startFollow(this.player),this.cameras.main.roundPixels=!0}},{key:"generateMinigameLocations",value:function(){var e=this;this.gameScene=new Ce(this),this.gameScene.generateGameObjects(St),this.locationsGameObjects=this.gameScene.getGameObjects,this.locationsGameObjects.forEach((function(t){var n=t.gameObject;"building-access-point"===n.name&&n.getByName("stars-container").destroy(),"hide-location"===t.gameObjectSpecifications.name&&t.gameObject.setVisible(!1);var i=e.matter.add.gameObject(t.gameObject,{label:t.gameObjectSpecifications.name,isStatic:!0,isSensor:!0});e.add.existing(i);var o=e.generatePlayButtonMinigame(t);e.locationsPlayButtons.set(t.gameObjectSpecifications.name,o),e.add.existing(o)}))}},{key:"generatePlayButtonMinigame",value:function(e){var t=this,n=e.gameObject,i=e.gameObjectSpecifications,o=JSON.parse(JSON.stringify(yt));o.scale=R(this,o.scale);var a=new x(this,o);return a.setPosition(n.x,n.y-n.height/2-a.height/2),a.setData("locationName",i.name),a.setVisible(!1),"building-access-point"===a.getData("locationName")&&a.getByName("button-text").setText("ENTRAR"),le(a),a.setInteractive().on("pointerdown",(function(){t.loadMinigame(a.getData("locationName"))})),this.add.existing(a),a}},{key:"loadMinigame",value:function(e){var t=this;je(this.gameData),"building-access-point"===e?(this.gameData.returnSceneName="VirtualWorldScene",this.gameData.locationData.playerPositionX=this.player.x,this.gameData.locationData.playerPositionY=this.player.y,this.scene.start("BuildingScene",this.gameData)):(vt.forEach((function(n){e===n.locationId&&(t.gameData.returnSceneName="MapAreaScene",t.gameData.locationData=n,t.gameData.locationData.playerPositionX=t.player.x,t.gameData.locationData.playerPositionY=t.player.y)})),this.gameData.returnSceneName="VirtualWorldScene",this.scene.start("LoadScene",this.gameData))}},{key:"addColliderToLocation",value:function(){var e=this;this.matter.world.on("collisionstart",(function(t,n,i){"location-1"!==n.label&&"location-2"!==n.label&&"location-3"!==n.label&&"hide-location"!==n.label&&"building-access-point"!==n.label||(e.currentLocationName=n.label),("poliburger-powerup"===n.label||"polibus-powerup"===n.label||"policuaderno-powerup"===n.label||"polifiesta-powerup"===n.label||"poliperro-powerup"===n.label)&&new Promise((function(t){"guest"!==e.gameData.accessType?e.gameData.playerFirebaseConection.child("player_powerUps").child(n.label).update({powerups_number:e.gameData.userData.player_powerUps[n.label].powerups_number+1}):e.gameData.userData.player_powerUps[n.label].powerups_number=e.gameData.userData.player_powerUps[n.label].powerups_number+1,t(e.powerUpsGameObjects.get(n.id))})).then((function(t){t.destroy(),e.powerUpsGameObjects.delete(n.id)}))})),this.matter.world.on("collisionend",(function(t,n,i){if("location-1"===n.label||"location-2"===n.label||"location-3"===n.label||"hide-location"===n.label||"building-access-point"===n.label){var o=e.locationsPlayButtons.get(n.label);void 0!==o&&o.setVisible(!1),e.currentLocationName="","hide-location"===n.label&&e.locationsGameObjects.get(n.label).gameObject.setVisible(!1)}}))}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(jt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.sceneGameObjects.forEach((function(e){e.gameObject.setScrollFactor(0)})),this.generateMinimap()}},{key:"generateMinimap",value:function(){this.miniMapButton=this.sceneGameObjects.get("minimap-border").gameObject;var e=this.cameras.add(this.miniMapButton.x-this.miniMapButton.width/2,this.miniMapButton.y-this.miniMapButton.height/2,this.miniMapButton.displayWidth,this.miniMapButton.displayHeight);e.zoom=.1,e.setOrigin(0,0),this.miniMapButton.setDisplaySize(1.04*this.miniMapButton.displayWidth,1.08*this.miniMapButton.displayHeight),this.miniMapButton.setOrigin(0,0),this.miniMapButton.setPosition(.98*e.x,.989*e.y),this.sceneGameObjects.forEach((function(t){"minimap-border"!==t.gameObjectSpecifications.name&&e.ignore(t.gameObject)}));var t=this.sceneGameObjects.get("minimap-name").gameObject;t.x=e.x+this.miniMapButton.displayWidth/2,t.y=e.y+this.miniMapButton.displayHeight,t.setOrigin(.5,0),e.ignore(this.miniMapButton),e.ignore(t)}},{key:"generatePath",value:function(){var e=this,t=0,n=0,i=0,o=0,a=0,s=this.add.graphics();s.lineStyle(50,14614705,1),this.locationsGameObjects.forEach((function(r){var c=r.gameObject;if(0===t)n=c.x,i=c.y+c.height;else{"hide-location"===r.gameObjectSpecifications.name?(o=c.x,a=c.y):"location-2"===r.gameObjectSpecifications.name||"location-3"===r.gameObjectSpecifications.name?(o=c.x-2*c.width,a=c.y):(o=c.x,a=c.y+c.height/2);var u=new Phaser.Curves.Path(n,i).lineTo(o,a).draw(s);e.cameras.main.ignore(u),n=o,i=a}t++}))}},{key:"updatePlayerPosition",value:function(){if(null!==this.gameData.locationData.playerPositionX&&null!==this.gameData.locationData.playerPositionY)this.player.setPosition(this.gameData.locationData.playerPositionX,this.gameData.locationData.playerPositionY);else if("location-2"===this.gameData.locationData.locationId||"location-3"===this.gameData.locationData.locationId){var e=this.locationsGameObjects.get(this.gameData.locationData.locationId);this.player.x=e.gameObject.x-2*e.gameObject.width,this.player.y=e.gameObject.y}}},{key:"getElements",value:function(){this.homeButton=this.sceneGameObjects.get("home-button").gameObject,this.assistantButton=this.sceneGameObjects.get("assistant-button").gameObject,this.settingsButton=this.sceneGameObjects.get("settings-button").gameObject,this.returnButton=this.sceneGameObjects.get("return-button").gameObject,this.totalScore=this.sceneGameObjects.get("total-score-title").gameObject,this.inventoryButton=this.sceneGameObjects.get("inventory-butto").gameObject,this.gamepad.upButton.gamepadButton=this.sceneGameObjects.get("up-button").gameObject,this.gamepad.downButton.gamepadButton=this.sceneGameObjects.get("down-button").gameObject,this.gamepad.leftButton.gamepadButton=this.sceneGameObjects.get("left-button").gameObject,this.gamepad.rightButton.gamepadButton=this.sceneGameObjects.get("right-button").gameObject,this.gamepad.enterButton.gamepadButton=this.sceneGameObjects.get("enter-button").gameObject,this.enableGamepadButton=this.sceneGameObjects.get("activate-gamepad-button").gameObject,m.isDeviceMobile&&this.enableGamepadButton.setVisible(!1)}},{key:"updateGamepadStatus",value:function(e){m.showGamepad=e,this.gamepad.isEnabled=e,this.gamepad.upButton.gamepadButton.setVisible(e),this.gamepad.downButton.gamepadButton.setVisible(e),this.gamepad.leftButton.gamepadButton.setVisible(e),this.gamepad.rightButton.gamepadButton.setVisible(e),this.gamepad.enterButton.gamepadButton.setVisible(e)}},{key:"addFuncionality",value:function(){var e=this;ke(this,this.homeButton,this.gameData),Se(this,this.assistantButton),we(this,this.settingsButton),le(this.returnButton),this.returnButton.setInteractive().on("pointerdown",(function(){je(e.gameData),new Promise((function(t){t(e.destroyLocationGambeObject())})).then((function(t){var n,i;t&&(n=e,i=e.gameData,setTimeout((function(){n.scene.start(i.returnSceneName,i)}),1))}))})),Oe(this,this.inventoryButton,this.gameData),le(this.enableGamepadButton),this.enableGamepadButton.setInteractive().on("pointerdown",(function(){var t=e.enableGamepadButton.getByName("button-Background");e.gamepad.isEnabled?(D(t,"enable-gamepad-button-background",t.displayWidth,t.displayHeight),e.updateGamepadStatus(!1)):(D(t,"disable-gamepad-button-background",t.displayWidth,t.displayHeight),e.updateGamepadStatus(!0))})),this.upKey=this.input.keyboard.addKey("UP"),this.downKey=this.input.keyboard.addKey("DOWN"),this.leftKey=this.input.keyboard.addKey("LEFT"),this.rightKey=this.input.keyboard.addKey("RIGHT"),this.addEventKey(this.upKey),this.addEventKey(this.downKey),this.addEventKey(this.leftKey),this.addEventKey(this.rightKey),this.addGamepadFuncionality()}},{key:"addGamepadFuncionality",value:function(){var e=this;this.addGamepadButtonFuncionality(this.gamepad.upButton),this.addGamepadButtonFuncionality(this.gamepad.downButton),this.addGamepadButtonFuncionality(this.gamepad.leftButton),this.addGamepadButtonFuncionality(this.gamepad.rightButton),le(this.gamepad.enterButton.gamepadButton),this.gamepad.enterButton.gamepadButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.gamepad.enterButton.buttonIsDow=!0}))}},{key:"addGamepadButtonFuncionality",value:function(e){var t=this;le(e.gamepadButton),e.gamepadButton.setInteractive().on("pointerdown",(function(){t.player.anims.play("walk"),e.buttonIsDow=!0})),e.gamepadButton.setInteractive().on("pointerup",(function(){t.player.anims.stop("walk"),t.player.anims.play("stop"),e.buttonIsDow=!1})),e.gamepadButton.setInteractive().on("pointerout",(function(){t.player.anims.stop("walk"),t.player.anims.play("stop"),e.buttonIsDow=!1}))}},{key:"animateCharacter",value:function(){var e={key:"stop",frames:this.anims.generateFrameNames(this.gameData.userData.player_avatarId+"-sprite",{start:0,end:0}),frameRate:this.playerVelocityX,repeat:-1,yoyo:!1};this.anims.create(e),this.player.anims.load("stop");var t={key:"walk",frames:this.anims.generateFrameNames(this.gameData.userData.player_avatarId+"-sprite",{start:1,end:7}),frameRate:this.playerVelocityX,repeat:-1,yoyo:!1};this.anims.create(t),this.player.anims.load("walk")}},{key:"addEventKey",value:function(e){var t=this;e.on("down",(function(){t.player.anims.play("walk")})),e.on("up",(function(){t.checkKeyPressed()||(t.player.anims.stop("walk"),t.player.anims.play("stop"))}))}},{key:"enableAccessMinigame",value:function(){var e=this.locationsPlayButtons.get(this.currentLocationName);if(void 0!==e&&e.setVisible(!0),(this.enterKey.isDown||this.gamepad.enterButton.buttonIsDow)&&(this.gamepad.enterButton.buttonIsDow=!1,this.loadMinigame(this.currentLocationName)),null!==this.gamepad.enterButton){this.gamepad.enterButton.gamepadButton.setInteractive();var t=this.gamepad.enterButton.gamepadButton.getByName("button-Background");t.clearAlpha(),t.clearTint()}"hide-location"===this.currentLocationName&&this.locationsGameObjects.get(this.currentLocationName).gameObject.setVisible(!0)}},{key:"disableAccessMinigame",value:function(){if(null!==this.gamepad.enterButton){this.gamepad.enterButton.gamepadButton.disableInteractive();var e=this.gamepad.enterButton.gamepadButton.getByName("button-Background");e.setAlpha(.25),e.setTint(0)}}},{key:"checkKeyPressed",value:function(){var e=!1;return(this.upKey.isDown||this.downKey.isDown||this.leftKey.isDown||this.rightKey.isDown)&&(e=!0),e}},{key:"generatePowerUp",value:function(e){var t=this.getPowerUpKey(),n=this.randomIntFromInterval(Ot[e].minimumXPosition,Ot[e].maximumXPosition),i=this.randomIntFromInterval(Ot[e].minimumYPosition,Ot[e].maximumYPosition),o=qe[t].button_background,a=JSON.parse(JSON.stringify(bt));a.scale=R(this,a.scale),a.assetName=o,a.name=t;var s=A(this,a),r=new Phaser.GameObjects.Container(this,n,i,[s]);r.setSize(a.scale.objectWidth,a.scale.objectHeight),this.matter.add.gameObject(r,{label:t,isStatic:!0,isSensor:!0});var c=r.body;r.name=t,this.add.existing(r),this.powerUpsGameObjects.set(c.id,r)}},{key:"randomIntFromInterval",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"getPowerUpKey",value:function(){for(var e,t=parseFloat(Math.random().toFixed(2)),n=0;n<100;n++)t<=1&&t>.85?e="policuaderno-powerup":t<=.85&&t>=.65?e="polibus-powerup":t<=.65&&t>.3?e="polifiesta-powerup":t<=.3&&t>.1?e="poliperro-powerup":t<=.1&&t>=0&&(e="poliburger-powerup");return e}},{key:"addPowerUps",value:function(){for(var e=this,t=this.randomIntFromInterval(0,5),n=[],i=function(){var t=e.randomIntFromInterval(0,Ot.length-1);n.some((function(e){return e==t}))||n.push(t)};n.length<t;)i();n.forEach((function(t){e.generatePowerUp(t)}))}},{key:"updateSceneData",value:function(e){var t=this;this.totalScore.setText("POLIPUNTOS: "+e.player_totalScore),this.locationsGameObjects.forEach((function(n){var i=n.gameObject,o=t.gameData.locationData.areaId;"building-access-point"!==i.name&&(i.updateLocationScore(e.player_areas[o].area_locations[i.name].location_score),i.updateLocationStars(e.player_areas[o].area_locations[i.name].location_starsNumber))}))}},{key:"destroyLocationGambeObject",value:function(){var e=this,t=!1,n=["location-1","location-2","hide-location","location-3","building-access-point"],i=n.length;return n.forEach((function(n){e.locationsGameObjects.get(n).gameObject.destroy(),e.locationsPlayButtons.get(n).destroy(),--i<=0&&(t=!0)})),t}}]),n}(),Et=[_,{type:"interactiveObject",element:"button",assetName:"title-bar-background",name:"scene-title-bar",content:"INSTRUCCIONES DEL MINIJUEGO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},{type:"interactiveObject",element:"bottom-title-button",assetName:"on-sound-icon-background",name:"sound-button",content:"SONIDO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"22px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:75,objectHeight:90,objectPositionX:95,objectPositionY:50}},{type:"image",element:"background",assetName:"instruction-card-background",name:"minigame-instructions-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1255,objectHeight:542,objectPositionX:683,objectPositionY:418}},{type:"image",element:"background",assetName:"location-data-card-background",name:"location-data-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:246,objectHeight:194,objectPositionX:233,objectPositionY:275}},{type:"interactiveObject",element:"location-box",name:"location-data",content:"LOCALIZACI\xd3N",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"27px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:235,objectHeight:170,objectPositionX:233,objectPositionY:285}},{type:"image",element:"background",assetName:"instruction-assistant-background",name:"game-assistant",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:260,objectHeight:300,objectPositionX:233,objectPositionY:525}},{type:"text",element:"title",name:"instruction-title",content:"instruction title",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:800,objectHeight:60,objectPositionX:835,objectPositionY:230}},{type:"text",element:"instruction",name:"instructions",content:"Instrucciones...",style:{fontFamily:"Comfortaa",color:"#0059A7",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"30px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:850,objectHeight:300,objectPositionX:835,objectPositionY:450}},{type:"interactiveObject",element:"simple-button",assetName:"quit-minigame-button-background",name:"quit-minigame-button",content:"SALIR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:458,objectPositionY:687}},{type:"interactiveObject",element:"simple-button",assetName:"play-minigame-button-background",name:"play-minigame-button",content:"JUGAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:908,objectPositionY:687}}],It={StartScene:{title:"EL TESORO DE SER POLIT\xc9CNICO",instructions:"El videojuego de la EPN creado por Jonathan Caiza para el fomento de la historia y valores que tiene la POLI, de una forma divertida."},TopBestPlayerScene:{title:"TOP DE LOS MEJORES JUGADORES ",instructions:"Como miembro de la EPN alcanza el mejor puntaje dentro del juego y forma parte del Top de los Mejores Jugadores de la EPN.\n\nLo \xfanico que debes hacer es acceder con tu correo institucional al juego y conseguir todos los Polipuntos."},MapScene:{title:"MAPA DEL MUNDO VIRTUAL",instructions:"Descubre los valores \xe9ticos e historia de\nla Escuela Polit\xe9cnica Nacional (EPN)\nvisitando las Zonas del Mapa EPN.\n\nSelecciona con un clic la Zona del Mapa que deseas conocer y despu\xe9s da clic sobre el bot\xf3n VISITAR para conocer la zona seleccionada."},MapAreaScene:{title:"ZONA DEL MUNDO VIRTUAL",instructions:"Descubre todos los minijuegos de los puntos principales de la Zona.\nMueve a tu avatar al punto que deseas dando clic sobre el punto y da clic en el bot\xf3n JUGAR de cada punto para iniciar el minijuego que este posee.\n\nTambi\xe9n puedes explorar el mundo virtual de la zona dando clic sobre el bot\xf3n EXPLORAR,\npodr\xe1s encontrar ayudas y un reto escondido propio de la zona."},VirtualWorldScene:{title:"MUNDO VIRTUAL",instructions:"\nCamina por el mundo virtual usando las teclas de direcci\xf3n (\u2190 \u2191 \u2192 \u2193) o el mando en pantalla,\nexplora la zona para encontrar el reto escondido o recolectar todos las ayudas que aparecen en la zona en forma de fichas.\n\nCamina hacia los puntos principales de la zona para mostrar el bot\xf3n JUGAR y da clic sobre \xe9l o presiona la tecla ENTER para iniciar el minijuego de este punto."},BuildingScene:{title:"EDIFICIO DEL MUNDO VIRTUAL",instructions:"El Edificio Administrativo presenta sus principales puntos en forma de tarjetas que se podr\xe1n seleccionar para descubrir sus minijuegos.\n\nSelecciona con un clic la tarjeta que deseas para iniciar el minijuego que posee."},PolitriviaScene:{title:"MINIJUEGO POLITRIVIA",instructions:"El minijuego presentar\xe1 5 trivias,\nd\xf3nde se deber\xe1 responder a cada trivia dando clic sobre la opci\xf3n con la respuesta correcta (a, b, c o d).\n\nCompleta correctamente las 5 trivias y\nobt\xe9n las 3 estrellas del minijuego."},ContraTiempoScene:{title:"MINIJUEGO CONTRA EL TIEMPO",instructions:"El minijuego presentar\xe1 una serie de preguntas junto a un contador con 30 segundos, donde se deber\xe1 responder a cada pregunta dando clic sobre la imagen con la respuesta correcta.\nEl minijuego terminar\xe1 cuando el contador llegue a cero, se haya seleccionado una repuesta incorrecta o no existan m\xe1s preguntas.\n\nCompleta correctamente 5 preguntas y\nobt\xe9n las 3 estrellas del minijuego."},PolimapaScene:{title:"MINIJUEGO POLIMAPA",instructions:"El minijuego presentar\xe1 un rompecabezas de 8 piezas desordenadas y 1 ficha que se deber\xe1 deslizar hasta ordenar las piezas del rompecabezas correctamente.\nPara deslizar la ficha deber\xe1s dar clic sobre cualquier pieza que se encuentra junto a esta.\n\nOrdena el rompecabezas correctamente y gana 250 puntos y las 3 estrellas del minijuego."},PolimuseoScene:{title:"MINIJUEGO POLIMUSEO",instructions:"El minijuego presentar\xe1 5 adivinanzas junto a un contador con 150 segundos, donde se deber\xe1 responder a cada adivinanza arrastrando las letras que formar la respuesta correcta, hacia los casilleros vacios correspondientes.\n\nCompleta correctamente las 5 adivinazas antes de que el contador llegua a cero y\nobt\xe9n las 3 estrellas del minijuego."},PolitonadaScene:{title:"MINIJUEGO POLITONADA",instructions:"El minijuego presentar\xe1 una pista que transportar\xe1 la letra del Himno de la EPN y se deber\xe1 dar clic sobre el bot\xf3n con el color (VERDE, ROSA o AZUL)\nque corresponde al carril por donde pasa la letra del Himno, justo en el instante en el que la letra llegue al final de la pista.\n\nAcierta correctamente toda la letra del Himno de la EPN y\nobt\xe9n las 3 estrellas del minijuego."},ElAhorcadoScene:{title:"MINIJUEGO EL AHORCADO",instructions:"El minijuego presentar\xe1 un acertijo,\nd\xf3nde se deber\xe1 responder a cada acertijo dando clic sobre cada una de las letras que conforma la respuesta, pero por cada letra incorrecta se dibujar\xe1 una parte del ahorcado.\n\nCompleta correctamente la respuesta del acertijo sin tener ninguna parte de El Ahorcado dibujado y\nobt\xe9n las 3 estrellas del minijuego."}},Ct=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MinigameInstructionScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){this.generateScene(),this.getElements(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Et),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.soundButton=this.sceneGameObjects.get("sound-button").gameObject,this.locationData=this.sceneGameObjects.get("location-data").gameObject,this.locationData.updateLocationBoxData(this.gameData.userData.player_areas[this.gameData.locationData.areaId].area_locations[this.gameData.locationData.locationId]),this.instructionTitle=this.sceneGameObjects.get("instruction-title").gameObject,this.instructionTitle.setText(It[this.gameData.locationData.minigameId].title),this.minigameInstructions=this.sceneGameObjects.get("instructions").gameObject,this.minigameInstructions.setText(It[this.gameData.locationData.minigameId].instructions),this.playMinigameButton=this.sceneGameObjects.get("play-minigame-button").gameObject,this.quitMinigameButton=this.sceneGameObjects.get("quit-minigame-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;this.soundButton.getByName("button-Background").setTexture(!1===m.isSoundMuted?"on-sound-icon-background":"off-sound-icon-background"),this.soundButton.setInteractive().on("pointerdown",(function(){Re(e,e.soundButton,!0)})),le(this.playMinigameButton),this.playMinigameButton.setInteractive().on("pointerdown",(function(){e.scene.stop("MinigameInstructionScene"),e.scene.start(e.gameData.locationData.minigameId,e.gameData)})),le(this.quitMinigameButton),this.quitMinigameButton.setInteractive().on("pointerdown",(function(){e.disableButtons(),e.generatePopUp("quit-minigame-message")}))}},{key:"generatePopUp",value:function(e){var t=this,n=new Ee(this,e,this.gameData);n.getCancelButton().setInteractive().on("pointerdown",(function(){t.enableButtons(),setTimeout((function(){n.destroy()}),1)}))}},{key:"disableButtons",value:function(){this.playMinigameButton.disableInteractive(),this.quitMinigameButton.disableInteractive()}},{key:"enableButtons",value:function(){this.playMinigameButton.setInteractive(),this.quitMinigameButton.setInteractive()}}]),n}(),Nt=[_,{type:"interactiveObject",element:"button",assetName:"title-bar-background",name:"scene-title-bar",content:"RESUMEN DEL MINIJUEGO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},{type:"interactiveObject",element:"bottom-title-button",assetName:"on-sound-icon-background",name:"sound-button",content:"SONIDO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"22px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:75,objectHeight:90,objectPositionX:95,objectPositionY:50}},{type:"image",element:"background",assetName:"instruction-card-background",name:"minigame-instructions-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1255,objectHeight:542,objectPositionX:683,objectPositionY:418}},{type:"text",element:"minigame-name",name:"minigame-name",content:"NOMBRE DEL MINIJUEGO",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:376,objectHeight:40,objectPositionX:280,objectPositionY:180},originX:.5,originY:0},{type:"text",element:"minigame-score",name:"minigame-score",content:"PUNTOS: 11111111",style:{fontFamily:"Fredoka One",color:"#6C31AA",align:"center",fontSize:"30px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:376,objectHeight:35,objectPositionX:280,objectPositionY:228},originX:.5,originY:0},{type:"text",element:"minigame-evaluation-parameter",name:"minigame-evaluation-parameter",content:"PARAMETRO: seg.",style:{fontFamily:"Fredoka One",color:"#6C31AA",align:"center",fontSize:"30px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:376,objectHeight:35,objectPositionX:280,objectPositionY:269},originX:.5,originY:0},{type:"image",element:"background",assetName:"instruction-assistant-background",name:"minigame-assistant",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:340,objectHeight:360,objectPositionX:225,objectPositionY:495}},{type:"interactiveObject",element:"button",assetName:"note-card-background",name:"minigame-note",content:"Recuerda que el puntaje se guardar\xe1 solo si est\xe1s registrado en el juego.",style:{fontFamily:"Comfortaa",color:"#A50000",align:"center",stroke:"#A50000",strokeThickness:1,fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:64,objectPositionX:278,objectPositionY:343}},{type:"image",element:"illustration",assetName:"feedback-card-background",name:"minigame-feedback-illustration",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:690,objectHeight:269,objectPositionX:845,objectPositionY:313}},{type:"interactiveObject",element:"button",assetName:"minigame-feedback-card-background",name:"minigame-feedback",content:"Juego Creado por: Jonathan Caiza",style:{fontFamily:"Comfortaa",color:"#0059A7",align:"center",fontSize:"33",stroke:"#0059A7",strokeThickness:2},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:850,objectHeight:195,objectPositionX:845,objectPositionY:530}},{type:"interactiveObject",element:"simple-button",assetName:"quit-minigame-button-background",name:"retry-minigame-button",content:"REINTENTAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:458,objectPositionY:687}},{type:"interactiveObject",element:"simple-button",assetName:"play-minigame-button-background",name:"continue-button",content:"CONTINUAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:908,objectPositionY:687}}],Tt={"location-1":{locationId:"location-1",locationFeedback:"La entrada principal a la Escuela Polit\xe9cnica Nacional (EPN) est\xe1 ubicada en la Av. Ladr\xf3n de Guevara y Andaluc\xeda.",locationIlustrationId:"entrada-epn-background"},"hide-location":{locationId:"hide-location",locationFeedback:"Encontrar\xe1s un mapa del Campus Polit\xe9cnico en cada una de las entradas a la Instituci\xf3n con la ubicaci\xf3n de todos los edificios de la EPN.",locationIlustrationId:"map-epn-background"},"location-2":{locationId:"location-2",locationFeedback:"La EPN posee su propio Museo de Historia Natural llamado Museo de Historia Natural Gustavo Orc\xe9s V. que brinda sus servicios a la comunidad polit\xe9cnica y al p\xfablico en general.",locationIlustrationId:"museo-epn-background"},"location-3":{locationId:"location-3",locationFeedback:"El Teatro Polit\xe9cnico fue dise\xf1ado por el arquitecto Oswaldo de la Torre en 1965. Esta obra arquitect\xf3nica se destaca por ser una de las construcciones m\xe1s audaces de Quito.",locationIlustrationId:"teatro-epn-background"},"location-4":{locationId:"location-4",locationFeedback:"El Hemiciclo Polit\xe9cnico de la EPN que es sede de diferentes seminarios y reuniones realizadas por la Instituci\xf3n, se encuentra en la Planta Baja del Edificio Administrativo.",locationIlustrationId:"hemiciclo-epn-background"},"location-5":{locationId:"location-5",locationFeedback:"La Biblioteca General de la EPN se encuentra en la Planta Baja del Edificio Administrativo junto al Hemiciclo Polit\xe9cnico, brindando sus servicios a la comunidad polit\xe9cnica y al p\xfablico en general.",locationIlustrationId:"biblioteca-epn-background"},"location-6":{locationId:"location-6",locationFeedback:"El Vicerrectorado de la EPN est\xe1 conformado por 2 instancias: Vicerrectorado de Docencia y Vicerrectorado de Investigaci\xf3n.",locationIlustrationId:"equipo-epn-background"},"location-7":{locationId:"location-7",locationFeedback:"El Rectorado de la EPN es la sede donde se lleva a cabo la gesti\xf3n administrativa de la Escuela Politecnica Nacional (EPN).",locationIlustrationId:"equipo-epn-background"},"location-8":{locationId:"location-8",locationFeedback:"El Concejo Polit\xe9cnico es el organismo encargado de emitir las normas y disposiciones generales encaminadas a la mejor organizaci\xf3n y funcionamiento de la Instituci\xf3n.",locationIlustrationId:"equipo-epn-background"},"location-9":{locationId:"location-9",locationFeedback:"La Direcci\xf3n de Gesti\xf3n de la Informaci\xf3n y Procesos (DGIP) es la encargada de administrar los recursos y servicios de tecnolog\xedas de informaci\xf3n y comunicaci\xf3n (TIC) de la EPN.",locationIlustrationId:"dgip-epn-background"}},Rt=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MinigameSummaryScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e,je(this.gameData)}},{key:"create",value:function(){this.generateScene(),this.getElements(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Nt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.soundButton=this.sceneGameObjects.get("sound-button").gameObject;var e=Tt[this.gameData.locationData.locationId],t=this.sceneGameObjects.get("minigame-note").gameObject;"guest"!==this.gameData.accessType&&t.setVisible(!1),this.minigameName=this.sceneGameObjects.get("minigame-name").gameObject,this.minigameName.setText(this.gameData.locationData.locationName.toLocaleUpperCase()),this.minigameScore=this.sceneGameObjects.get("minigame-score").gameObject,this.minigameScore.setText("PUNTOS: "+this.gameData.locationData.locationScore),this.minigameEvaluationParameter=this.sceneGameObjects.get("minigame-evaluation-parameter").gameObject,this.minigameEvaluationParameter.setText(this.gameData.locationData.minigameEvaluationParameters),this.minigameFeedbackIllustration=this.sceneGameObjects.get("minigame-feedback-illustration").gameObject,D(this.minigameFeedbackIllustration,e.locationIlustrationId,this.minigameFeedbackIllustration.displayWidth,this.minigameFeedbackIllustration.displayHeight),this.minigameFeedback=this.sceneGameObjects.get("minigame-feedback").gameObject,this.minigameFeedback.getByName("button-text").setText(e.locationFeedback),this.continueButton=this.sceneGameObjects.get("continue-button").gameObject,this.retryMinigameButton=this.sceneGameObjects.get("retry-minigame-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;this.soundButton.getByName("button-Background").setTexture(!1===m.isSoundMuted?"on-sound-icon-background":"off-sound-icon-background"),this.soundButton.setInteractive().on("pointerdown",(function(){Re(e,e.soundButton,!0)})),le(this.retryMinigameButton),this.retryMinigameButton.setInteractive().on("pointerdown",(function(){e.gameData.locationData.locationScore=0,e.gameData.locationData.minigameEvaluationParameters="",e.gameData.locationData.locationStarsNumber=0,e.disableButtons(),e.generatePopUp("retry-minigame-message")})),le(this.continueButton),this.continueButton.setInteractive().on("pointerdown",(function(){e.scene.start("MinigameStarsScene",e.gameData)}))}},{key:"generatePopUp",value:function(e){var t=this,n=new Ee(this,e,this.gameData);n.getCancelButton().setInteractive().on("pointerdown",(function(){t.enableButtons(),setTimeout((function(){n.destroy()}),1)}))}},{key:"disableButtons",value:function(){this.continueButton.disableInteractive(),this.retryMinigameButton.disableInteractive()}},{key:"enableButtons",value:function(){this.continueButton.setInteractive(),this.retryMinigameButton.setInteractive()}}]),n}(),Ft=[{type:"image",element:"background",assetName:"minigame-stars-scene-background",name:"scene-background",scale:y},{type:"text",element:"title",name:"title",content:"ESTRELLAS OBTENIDAS",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",stroke:"#FFFFFF",strokeThickness:30,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1042,objectHeight:70,objectPositionX:683,objectPositionY:85}},{type:"text",element:"minigame-score",name:"minigame-score",content:"PUNTUACI\xd3N DEL MINIJUEGO: 0",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#354A54",strokeThickness:10,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1042,objectHeight:50,objectPositionX:683,objectPositionY:178}},{type:"text",element:"minigame-score",name:"best-minigame-score",content:"MEJOR PUNTUACI\xd3N: 0",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#354A54",strokeThickness:10,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1042,objectHeight:50,objectPositionX:683,objectPositionY:230}},{type:"text",element:"total-score",name:"score-obtained",content:"POLIPUNTOS OBTENIDOS: 0",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",stroke:"#FFFFFF",strokeThickness:14,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1042,objectHeight:50,objectPositionX:683,objectPositionY:523}},{type:"text",element:"total-score",name:"total-score",content:"POLIPUNTOS: 0",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",stroke:"#FFFFFF",strokeThickness:20,fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1042,objectHeight:60,objectPositionX:683,objectPositionY:585}},{type:"interactiveObject",element:"simple-button",assetName:"quit-minigame-button-background",name:"continue-button",content:"CONTINUAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:683,objectPositionY:685}}],At={type:"container",element:"stars-container",name:"stars-container",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:900,objectHeight:300,objectPositionX:683,objectPositionY:345}},Dt={type:"image",element:"background",name:"area-star",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:225,objectHeight:175,objectPositionX:0,objectPositionY:0}},xt=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MinigameStarsScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.starAnimation1=null,this.starAnimation2=null,this.starAnimation3=null,this.starsImages=[],this.trophyId="",this.gameData=e;var t=this.gameData.userData.player_achievements["bronze-trophy"].achievement_obtained,n=this.gameData.userData.player_achievements["silver-trophy"].achievement_obtained,i=this.gameData.userData.player_achievements["gold-trophy"].achievement_obtained;if(this.updateGameData(t,n,i),"guest"!==this.gameData.accessType)this.updateLocationData();else{var o=this.gameData.locationData.areaId,a=this.gameData.userData.player_areas[o].area_locations,s=this.getAchievementsNumbers();s>=3&&!t&&(this.gameData.userData.player_achievements["bronze-trophy"].achievement_obtained=!0,this.trophyId="bronze-trophy",this.gameData.userData.player_areas[o].area_starsNumber=1),s>=6&&!n&&(this.gameData.userData.player_achievements["silver-trophy"].achievement_obtained=!0,this.trophyId="silver-trophy",this.gameData.userData.player_areas[o].area_starsNumber=2),s>=10&&!i&&(this.gameData.userData.player_achievements["gold-trophy"].achievement_obtained=!0,this.gameData.userData.player_achievements.treasure.achievement_obtained=!0,this.trophyId="gold-trophy",this.gameData.userData.player_areas[o].area_starsNumber=3);var r=0;for(var c in a)r+=a[c].location_score;this.gameData.userData.player_areas[o].area_score=r;var u=0;for(var l in this.gameData.userData.player_areas)u+=this.gameData.userData.player_areas[l].area_score;this.gameData.userData.player_totalScore=u}}},{key:"updateGameData",value:function(e,t,n){var i=this.gameData.locationData.areaId,o=this.gameData.locationData.locationId;this.lastTotalScore=this.gameData.userData.player_totalScore,this.lastMinigameScore=this.gameData.userData.player_areas[i].area_locations[o].location_score,this.minigameScoreObtained=this.lastMinigameScore<=this.gameData.locationData.locationScore?this.gameData.locationData.locationScore-this.lastMinigameScore:0,this.newMinigameScore=this.lastMinigameScore<this.gameData.locationData.locationScore?this.gameData.locationData.locationScore:this.lastMinigameScore;var a=this.gameData.userData.player_areas[i].area_locations[o].location_starsNumber;this.starsNumberObtained=a<this.gameData.locationData.locationStarsNumber?this.gameData.locationData.locationStarsNumber:a;var s=this.gameData.locationData.badgeId;this.lastAchievementObtained=this.gameData.userData.player_achievements[s].achievement_obtained,this.achievementObtained=!0===this.lastAchievementObtained||this.starsNumberObtained>=3,this.gameData.userData.player_areas[i].area_locations[o].location_score=this.newMinigameScore,this.gameData.userData.player_areas[i].area_locations[o].location_starsNumber=this.starsNumberObtained,this.gameData.userData.player_achievements[s].achievement_obtained=this.achievementObtained;var r=this.getAchievementsNumbers();r>=3&&!e&&(this.trophyId="bronze-trophy"),r>=6&&!t&&(this.trophyId="silver-trophy"),r>=10&&!n&&(this.trophyId="gold-trophy")}},{key:"updateLocationData",value:function(){var e=this;this.gameData.playerFirebaseConection.child("player_areas").child(this.gameData.locationData.areaId).child("area_locations").child(this.gameData.locationData.locationId).update({location_score:this.newMinigameScore,location_starsNumber:this.starsNumberObtained,achievement_obtained:this.achievementObtained}).then((function(){e.updateLocationBadge()}))}},{key:"updateLocationBadge",value:function(){var e=this;this.gameData.playerFirebaseConection.child("player_achievements").child(this.gameData.locationData.badgeId).update({achievement_obtained:this.achievementObtained}).then((function(){e.updateAreaScore()}))}},{key:"updateAreaScore",value:function(){var e=this;this.gameData.playerFirebaseConection.child("player_areas").once("value").then((function(t){var n=JSON.parse(JSON.stringify(t.val())),i=JSON.parse(JSON.stringify(n[e.gameData.locationData.areaId].area_locations)),o=0;for(var a in i)o+=i[a].location_score;e.gameData.playerFirebaseConection.child("player_areas").child(e.gameData.locationData.areaId).update({area_score:o}).then((function(){e.updateTotalScore()}))}))}},{key:"updateTotalScore",value:function(){var e=this;this.gameData.playerFirebaseConection.once("value").then((function(t){var n=JSON.parse(JSON.stringify(t.val())),i=0;for(var o in n.player_areas)i+=n.player_areas[o].area_score;e.gameData.playerFirebaseConection.update({player_totalScore:i}).then((function(){g.scoreTableFirebaseConection.child(e.gameData.userData.player_id).update({player_totalScore:i}).then((function(){e.updateDependenceTotalScore()}))}))}))}},{key:"updateDependenceTotalScore",value:function(){var e=this;g.scoreTableFirebaseConection.orderByChild("player_memberOf").equalTo(this.gameData.userData.player_memberOf).once("value").then((function(t){var n=0;t.forEach((function(e){n+=e.val().player_totalScore})),p.firebaseApp.database().ref("epn_dependence").child(B[e.gameData.userData.player_memberOf].dependenceId).update({dependence_totalScore:n}).then((function(){e.updateGameBronzeTrophys(),e.updateGameSilverTrophys(),e.updateGameGoldTrophys()}))}))}},{key:"getAchievementsNumbers",value:function(){var e=0;for(var t in this.gameData.userData.player_achievements)"bronze-trophy"!==t&&"silver-trophy"!==t&&"gold-trophy"!==t&&"treasure"!==t&&this.gameData.userData.player_achievements[t].achievement_obtained&&e++;return e}},{key:"updateGameBronzeTrophys",value:function(){var e=this;this.getAchievementsNumbers()>=3&&!this.gameData.userData.player_achievements["bronze-trophy"].achievement_obtained&&this.gameData.playerFirebaseConection.child("player_achievements").child("bronze-trophy").update({achievement_obtained:!0}).then((function(){e.gameData.playerFirebaseConection.child("player_areas").child(e.gameData.locationData.areaId).update({area_starsNumber:1})}))}},{key:"updateGameSilverTrophys",value:function(){var e=this;this.getAchievementsNumbers()>=6&&!this.gameData.userData.player_achievements["silver-trophy"].achievement_obtained&&this.gameData.playerFirebaseConection.child("player_achievements").child("silver-trophy").update({achievement_obtained:!0}).then((function(){e.gameData.playerFirebaseConection.child("player_areas").child(e.gameData.locationData.areaId).update({area_starsNumber:1})}))}},{key:"updateGameGoldTrophys",value:function(){var e=this;this.getAchievementsNumbers()>=10&&!this.gameData.userData.player_achievements["gold-trophy"].achievement_obtained&&this.gameData.playerFirebaseConection.child("player_achievements").child("gold-trophy").update({achievement_obtained:!0}).then((function(){e.gameData.playerFirebaseConection.child("player_areas").child(e.gameData.locationData.areaId).update({area_starsNumber:1}).then((function(){e.gameData.playerFirebaseConection.child("player_achievements").child("treasure").update({achievement_obtained:!0})}))}))}}]),_createClass(n,[{key:"create",value:function(){this.generateScene(),this.getElements(),this.generateAreaStar(),this.addFunctionality(),this.disableContinueButton(),this.animateScore()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Ft),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.minigameScore=this.sceneGameObjects.get("minigame-score").gameObject,this.minigameScore.setText("PUNTUACI\xd3N DEL MINIJUEGO: "+this.gameData.locationData.locationScore),this.bestMinigameScore=this.sceneGameObjects.get("best-minigame-score").gameObject,this.bestMinigameScore.setText("MEJOR PUNTUACI\xd3N: "+this.lastMinigameScore),this.scoreObtained=this.sceneGameObjects.get("score-obtained").gameObject,this.scoreObtained.setText("POLIPUNTOS OBTENIDOS: "+this.minigameScoreObtained),this.totalScore=this.sceneGameObjects.get("total-score").gameObject,this.totalScore.setText("POLIPUNTOS: "+this.lastTotalScore),this.continueButton=this.sceneGameObjects.get("continue-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;le(this.continueButton),this.continueButton.setInteractive().on("pointerdown",(function(){null!==e.starAnimation1&&e.starAnimation1.remove(),null!==e.starAnimation2&&e.starAnimation2.remove(),null!==e.starAnimation3&&e.starAnimation3.remove(),e.gameData.locationData.locationScore=0,e.gameData.locationData.minigameEvaluationParameters="","guest"!==e.gameData.accessType&&e.gameData.playerFirebaseConection.once("value").then((function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n})),e.starsNumberObtained>=3&&!e.lastAchievementObtained?(e.gameData.locationData.locationStarsNumber=0,e.scene.stop(e.scene.key),e.scene.start("MinigameBadgeScene",{trophyId:e.trophyId,gameData:e.gameData})):(e.gameData.locationData.locationStarsNumber=0,e.scene.stop(e.scene.key),e.scene.start(e.gameData.returnSceneName,e.gameData))}))}},{key:"animateScore",value:function(){var e=this,t=this.minigameScoreObtained,n=t<=20?15:t;t*n>=2250&&(n=2251/t),this.time.addEvent({repeat:t+1,delay:n,callback:function(){t>=0?(e.scoreObtained.setText("POLIPUNTOS OBTENIDOS: "+t--),e.totalScore.setText("POLIPUNTOS: "+e.lastTotalScore++)):t<0&&e.enableContinueButton()}})}},{key:"generateAreaStar",value:function(){var e=JSON.parse(JSON.stringify(At));e.scale=R(this,e.scale);var t=JSON.parse(JSON.stringify(Dt));t.scale=R(this,t.scale);for(var n=new Phaser.GameObjects.Container(this,e.scale.objectPositionX,e.scale.objectPositionY),i=e.scale.objectWidth/3,o=-i,a=!0,s=this.starsNumberObtained,r=0;r<3;r++){s<=0&&(a=!1),t.assetName=a?"big-star-icon-obtained-background":"big-star-icon-not-obtained-background";var c=A(this,t);c.x=o+i*r,1!=r&&(c.y+=t.scale.objectHeight/3),a&&this.starsImages.push(c),c.setVisible(!1),n.add(c),s--}n.setSize(e.scale.objectWidth,e.scale.objectHeight),this.add.existing(n),this.animateStarsImage()}},{key:"enableContinueButton",value:function(){this.continueButton.setInteractive();var e=this.continueButton.getByName("button-Background");e.clearAlpha(),e.clearTint()}},{key:"disableContinueButton",value:function(){this.continueButton.disableInteractive();var e=this.continueButton.getByName("button-Background");e.setAlpha(.25),e.setTint(0)}},{key:"animateImage",value:function(e){return e.setVisible(!0),this.tweens.add({targets:e,alpha:{getStart:function(){return 0},getEnd:function(){return 1}},duration:750,repeat:0})}},{key:"animateStarsImage",value:function(){var e=this;this.starsNumberObtained>=1&&(this.starAnimation1=this.animateImage(this.starsImages[0])),this.starsNumberObtained>=2&&setTimeout((function(){e.starAnimation2=e.animateImage(e.starsImages[1])}),750),this.starsNumberObtained>=3&&setTimeout((function(){e.starAnimation3=e.animateImage(e.starsImages[2])}),1500)}}]),n}(),Bt=[{type:"image",element:"background",assetName:"minigame-badge-scene-background",name:"scene-backgroud",scale:y},{type:"text",element:"title",name:"scene-title",content:"INSIGNIA OBTENIDA",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",stroke:"#FFFFFF",strokeThickness:34,fontSize:"85"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1042,objectHeight:66,objectPositionX:683,objectPositionY:35},originX:.5,originY:0},{type:"text",element:"title",name:"badge-name",content:"INSIGNIA",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",stroke:"#FFFFFF",strokeThickness:14,fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1150,objectHeight:60,objectPositionX:683,objectPositionY:225}},{type:"interactiveObject",element:"button",assetName:"badge-box-background",name:"badge-box",content:"BADGE",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"45px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:330,objectHeight:310,objectPositionX:683,objectPositionY:460}},{type:"interactiveObject",element:"simple-button",assetName:"quit-minigame-button-background",name:"continue-button",content:"CONTINUAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:88,objectPositionX:683,objectPositionY:685}}],Ht=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MinigameBadgeScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e.gameData,this.trophyId=e.trophyId,this.showTrophyObtained=""!=this.trophyId}}]),_createClass(n,[{key:"create",value:function(){this.generateScene(),this.getElements(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Bt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.sceneTitle=this.sceneGameObjects.get("scene-title").gameObject;var e=this.gameData.userData.player_achievements[this.gameData.locationData.badgeId].achievement_name;this.badgeTitle=this.sceneGameObjects.get("badge-name").gameObject,this.badgeTitle.setText("INSIGNIA DE "+e.toUpperCase()),this.badgeBackground=this.sceneGameObjects.get("badge-box").gameObject,this.badgeBackground.getByName("button-text").setText(e),this.continueButton=this.sceneGameObjects.get("continue-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;le(this.continueButton),this.continueButton.setInteractive().on("pointerdown",(function(){e.showTrophyObtained?e.showTrophy():(e.scene.stop(e.scene.key),e.scene.start(e.gameData.returnSceneName,e.gameData))}))}},{key:"showTrophy",value:function(){var e=this.gameData.userData.player_achievements[this.trophyId];"treasure"===this.trophyId?(this.sceneTitle.setText("TESORO POLIT\xc9CNICO OBTENIDO"),this.badgeTitle.setText("")):(this.sceneTitle.setText("TROFEO OBTENIDO"),this.badgeTitle.setText(e.achievement_name.toUpperCase())),this.badgeBackground.getByName("button-text").setText(e.achievement_name),"gold-trophy"===this.trophyId?this.trophyId="treasure":this.showTrophyObtained=!1}}]),n}(),Wt=[_,S,{type:"interactiveObject",element:"button",assetName:"return-icon-background",name:"return-button",content:"REGRESAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:160,objectHeight:84,objectPositionX:260,objectPositionY:76}},{type:"text",element:"title",name:"title-name",content:"EDIFICIO\nADMINISTRATIVO",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"justify",fontSize:"35",strokeThickness:14,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:60,objectPositionX:340,objectPositionY:35},originX:0,originY:0},{type:"image",element:"background",assetName:"building-locations-card-background",name:"building-locations-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:556,objectPositionX:304,objectPositionY:456}},{type:"image",element:"background",assetName:"building-feedback-card-background",name:"building-feedback-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:590,objectHeight:555,objectPositionX:864,objectPositionY:456}},{type:"text",element:"title",assetName:"building-feedback-title-card-background",name:"building-feedback-title",content:"MISI\xd3N EPN",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"justify",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:50,objectPositionX:864,objectPositionY:226}},{type:"interactiveObject",element:"button",name:"building-feedback",content:"La Escuela Polit\xe9cnica Nacional es una Universidad p\xfablica, laica y democr\xe1tica que garantiza la libertad de pensamiento de todos sus integrantes, quienes est\xe1n comprometidos con aportar de manera significativa al progreso del Ecuador. Formamos investigadores y profesionales en ingenier\xeda, ciencias, ciencias administrativas y tecnolog\xeda, capaces de contribuir al bienestar de la sociedad a trav\xe9s de la difusi\xf3n del conocimiento cient\xedfico que generamos en nuestros programas de grado, posgrado y proyectos de investigaci\xf3n. Contamos con una planta docente calificada, estudiantes capaces y personal de apoyo necesario para responder a las demandas de la sociedad ecuatoriana.",style:{fontFamily:"Comfortaa",color:"#0059A7",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"22px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:550,objectHeight:450,objectPositionX:864,objectPositionY:491}},O,P,C,E],Mt={type:"interactiveObject",element:"location-box",assetName:"location-box-background",name:"location-box-",content:"",style:{fontFamily:"Fredoka One",color:"#000000",stroke:"#FFFFFF",align:"center",fontSize:"25",strokeThickness:10},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:0,objectPositionY:0}},Lt={type:"interactiveObject",element:"location-container",name:"location-container",content:"",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:640,objectHeight:250,objectPositionX:347,objectPositionY:618}},qt={type:"interactiveObject",element:"location-box",assetName:"location-box-background",name:"location-box-",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:0,objectPositionY:0}},Gt={type:"interactiveObject",element:"badge-container",name:"badge-container",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:640,objectHeight:250,objectPositionX:1019,objectPositionY:618}},Ut={type:"interactiveObject",element:"badge-box",assetName:"location-box-background",name:"badge-box-",style:{fontFamily:"Comfortaa",color:"#FFFFFF",align:"center",fontSize:"14px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:0,objectPositionY:0}},zt=[{badgeId:"badge-1",badgeName:"Ciencias",isObtained:!1},{badgeId:"badge-2",badgeName:"Ciencias Administrativas",isObtained:!1},{badgeId:"badge-3",badgeName:"Ingenier\xeda Civil y Ambiental",isObtained:!1},{badgeId:"badge-4",badgeName:"Ingenier\xeda El\xe9ctrica y Electr\xf3nica",isObtained:!1},{badgeId:"badge-5",badgeName:"Geolog\xeda y Petroleos",isObtained:!1},{badgeId:"badge-6",badgeName:"Ingenier\xeda Mec\xe1nica",isObtained:!1},{badgeId:"badge-7",badgeName:"Ingenier\xeda Qu\xedmica y Agroindustria",isObtained:!1},{badgeId:"badge-8",badgeName:"Ingenier\xeda de Sistemas",isObtained:!1},{badgeId:"badge-9",badgeName:"ESFOT",isObtained:!1},{badgeId:"badge-10",badgeName:"Formaci\xf3n B\xe1sica",isObtained:!1},{badgeId:"gold-trophy",badgeName:"POLIB\xdaHO DE ORO",isObtained:!1},{badgeId:"silver-trophy",badgeName:"POLIB\xdaHO DE PLATA",isObtained:!1},{badgeId:"bronze-trophy",badgeName:"POLIB\xdaHO BRONCE",isObtained:!1},{badgeId:"treasure",badgeName:"SOY UN POLIT\xc9CNICO",isObtained:!1}];function Yt(e,t,n,i,o,a,s,r,c){var u=new Map,l=i,h=JSON.parse(JSON.stringify(r));h.objectHeight*=.9,h.objectWidth*=.9;for(var d=h.objectPositionX-h.objectWidth/2+h.objectWidth/(2*s),p=h.objectPositionY-h.objectHeight/2+h.objectHeight/(2*a),m=h.objectWidth/s,g=h.objectHeight/a,f=0;f<a;f++)for(var b=0;b<s;b++){if(l<o){var y=d+m*b,v=p+g*f,_=JSON.parse(JSON.stringify(c)),w=void 0;if(_.scale.objectPositionX=y,_.scale.objectPositionY=v,_.scale.objectHeight=.8*g,"locations"===t){var k=vt[l].locationId,j=vt[l].locationName;_.scale.objectWidth=.7*m,_.name=k+"-box",_.content=j.toUpperCase(),w=new ue(e,_);var S=n[k];w.updateLocationStars(S.location_starsNumber),w.updateLocationScore(S.location_score),w.setData("boxId",k)}else{var O=zt[l].badgeId,P=zt[l].badgeName;if(_.scale.objectWidth=.85*m,_.name=O+"-box",_.content=P,w=new x(e,_),!n[O].achievement_obtained){w.getByName("button-Background").setTint(0);var E=w.getByName("button-text");E.style.setColor("#FFFFFF"),E.style.setStroke("#FFFFFF",1)}w.setData("boxId",O)}e.add.existing(w),u.set(_.name,w)}l++}return u}var Xt=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,{key:"BuildingScene"})}return _createClass(n,[{key:"init",value:function(e){this.gameData=e,this.gameScene=new Ce(this),this.sceneGameObjects=new Map,this.locationBoxes=new Map}}]),_createClass(n,[{key:"create",value:function(){var e=this;this.generateScene(),this.getElements(),this.generateLocationsBox(this.gameData.userData.player_areas[this.gameData.locationData.areaId].area_locations),this.addFunctionality(),this.updateSceneData(this.gameData.userData),"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.updateSceneData(n)}))}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Wt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"generateLocationsBox",value:function(e){var t=this.buildLocationsBackground.gameObjectSpecifications.scale;t.objectWidth=this.buildLocationsBackground.gameObjectSpecifications.scale.objectWidth,t.objectHeight=1.1*this.buildLocationsBackground.gameObjectSpecifications.scale.objectHeight;var n=this.buildLocationsBackground.gameObject;n.displayHeight*=1.04,n.y*=1.01;var i=this.sceneGameObjects.get("building-feedback-background").gameObject;i.displayHeight*=1.034,i.y*=1.01;var o=JSON.parse(JSON.stringify(Mt));o.scale=R(this,o.scale),this.locationBoxes=Yt(this,"locations",e,4,10,3,2,t,o)}},{key:"getElements",value:function(){this.buildLocationsBackground=this.sceneGameObjects.get("building-locations-background"),this.homeButton=this.sceneGameObjects.get("home-button").gameObject,this.assistantButton=this.sceneGameObjects.get("assistant-button").gameObject,this.settingsButton=this.sceneGameObjects.get("settings-button").gameObject,this.returnButton=this.sceneGameObjects.get("return-button").gameObject,this.totalScore=this.sceneGameObjects.get("total-score-title").gameObject,this.inventoryButton=this.sceneGameObjects.get("inventory-butto").gameObject}},{key:"addFunctionality",value:function(){var e=this;ke(this,this.homeButton,this.gameData),Se(this,this.assistantButton),we(this,this.settingsButton),Oe(this,this.inventoryButton,this.gameData),le(this.returnButton),this.returnButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.scene.start("VirtualWorldScene",e.gameData)})),this.locationBoxes.forEach((function(t){t.setInteractive({cursor:l});var n=t.getByName("button-Background");e.addLocationButtonHover(n,t),n.setInteractive().on("pointerdown",(function(){e.loadMinigame(t)}))}))}},{key:"addLocationButtonHover",value:function(e,t){e.setInteractive({cursor:l}),e.setInteractive().on("pointerover",(function(){e.setTint(51061)})),e.setInteractive().on("pointerout",(function(){e.clearTint()}))}},{key:"loadMinigame",value:function(e){var t=this,n=this.gameData.locationData.playerPositionX,i=this.gameData.locationData.playerPositionY;vt.forEach((function(n){e.getData("boxId")===n.locationId&&(t.gameData.locationData=n)})),je(this.gameData),this.gameData.locationData.playerPositionX=n,this.gameData.locationData.playerPositionY=i,this.gameData.returnSceneName="BuildingScene",this.scene.stop("BuildingScene"),this.scene.start("LoadScene",this.gameData)}},{key:"updateSceneData",value:function(e){this.totalScore.setText("POLIPUNTOS: "+e.player_totalScore),this.locationBoxes.forEach((function(t){var n=e.player_areas["area-2"].area_locations[t.getData("boxId")];t.updateLocationStars(n.location_starsNumber),t.updateLocationScore(n.location_score)}))}}]),n}(),Vt=[{type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:y},{type:"image",element:"background",assetName:"pause-menu-card-background",name:"pause-menu-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:600,objectHeight:600,objectPositionX:683,objectPositionY:384}},{type:"text",element:"title",name:"title",content:"MEN\xda DE PAUSA",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:484,objectHeight:60,objectPositionX:683,objectPositionY:150}},{type:"interactiveObject",element:"bottom-title-button",assetName:"right-button-background",name:"continue-button",content:"CONTINUAR",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:130,objectHeight:140,objectPositionX:683,objectPositionY:270}},{type:"interactiveObject",element:"bottom-title-button",assetName:"reset-minigame-icon-background",name:"reset-button",content:"REINICIAR",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:130,objectHeight:140,objectPositionX:797,objectPositionY:420}},{type:"interactiveObject",element:"bottom-title-button",assetName:"quit-icon-background",name:"quit-button",content:"SALIR",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:130,objectHeight:140,objectPositionX:558,objectPositionY:420}},{type:"interactiveObject",element:"bottom-title-button",assetName:"on-sound-icon-background",name:"sound-button",content:"APAGAR SONIDO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:140,objectHeight:140,objectPositionX:558,objectPositionY:580}},{type:"interactiveObject",element:"bottom-title-button",assetName:"assistant-icon-background",name:"assistant-button",content:"INSTRUCCIONES",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:130,objectHeight:140,objectPositionX:797,objectPositionY:580}}],Jt=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MinigamePauseMenuScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){this.scene.moveAbove("MinigamePauseMenuScene",this.gameData.returnSceneName),this.generateScene(),this.getElements(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Vt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.sceneBackground=this.sceneGameObjects.get("scene-backgroud").gameObject,this.sceneBackground.setTint(0),this.soundButton=this.sceneGameObjects.get("sound-button").gameObject,this.assistantButton=this.sceneGameObjects.get("assistant-button").gameObject,this.continueButton=this.sceneGameObjects.get("continue-button").gameObject,this.continueButton.getByName("button-Background").setTint(0),this.resetButton=this.sceneGameObjects.get("reset-button").gameObject,this.quitButton=this.sceneGameObjects.get("quit-button").gameObject}},{key:"addFunctionality",value:function(){var e=this,t=this.soundButton.getByName("button-Background"),n=this.soundButton.getByName("button-text");!1===m.isSoundMuted?(t.setTexture("on-sound-icon-background"),n.setText("APAGAR SONIDO")):(t.setTexture("off-sound-icon-background"),n.setText("ENCENDER SONIDO")),le(this.soundButton),this.soundButton.setInteractive().on("pointerdown",(function(){Re(e,e.soundButton,!1)})),le(this.assistantButton),this.assistantButton.setInteractive().on("pointerdown",(function(){e.scene.sleep(e.scene.key),e.scene.launch("AssistantScene",{returnSceneName:e.scene.key,idMinigame:e.gameData.locationData.minigameId})})),le(this.continueButton),this.continueButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.resume(e.gameData.locationData.minigameId)})),le(this.resetButton),this.resetButton.setInteractive().on("pointerdown",(function(){e.disableButtons(),e.generatePopUp("reset-minigame-message")})),le(this.quitButton),this.quitButton.setInteractive().on("pointerdown",(function(){e.disableButtons(),e.generatePopUp("quit-minigame-message")}))}},{key:"generatePopUp",value:function(e){var t=this,n=new Ee(this,e,this.gameData);n.getCancelButton().setInteractive().on("pointerdown",(function(){t.enableButtons(),setTimeout((function(){n.destroy()}),1)}))}},{key:"disableButtons",value:function(){this.soundButton.disableInteractive(),this.assistantButton.disableInteractive(),this.continueButton.disableInteractive(),this.resetButton.disableInteractive(),this.quitButton.disableInteractive()}},{key:"enableButtons",value:function(){this.soundButton.setInteractive(),this.assistantButton.setInteractive(),this.continueButton.setInteractive(),this.resetButton.setInteractive(),this.quitButton.setInteractive()}}]),n}(),Qt=[_,{type:"image",element:"illustration",assetName:"load-assistant-background",name:"load-assistant-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:414,objectHeight:424,objectPositionX:260,objectPositionY:362}},{type:"text",element:"title",name:"title",content:"Sab\xedas que...",style:{fontFamily:"Fredoka One",color:"#A50000",align:"center",stroke:"#FFFFFF",strokeThickness:25,fontSize:"60px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:460,objectHeight:72,objectPositionX:55,objectPositionY:40},originX:0,originY:0},{type:"image",element:"illustration",assetName:"feedback-card-background",name:"feedback-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:816,objectHeight:450,objectPositionX:904,objectPositionY:290}},{type:"interactiveObject",element:"button",assetName:"feedback-title-card-background",name:"feedback-title",content:"VISI\xd3N",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:690,objectHeight:90,objectPositionX:904,objectPositionY:160}},{type:"text",element:"feedback",name:"feedback",content:"Usar nuestra ilimitada pasi\xf3n por la tecnolog\xeda, para otorgar emoci\xf3n y entretenimiento innovador.",style:{fontFamily:"Comfortaa",color:"#6C31AA",align:"center",stroke:"#6C31AA",strokeThickness:1,fontSize:"45px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:750,objectHeight:255,objectPositionX:904,objectPositionY:355}},{type:"image",element:"background",assetName:"load-feedback-card-background",name:"load-feedback-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1260,objectHeight:167,objectPositionX:683,objectPositionY:640}},{type:"text",element:"load-feedback",name:"load-feedback",content:"Dentro de la empresa existe un claro objetivo que es: otorgar emoci\xf3n e innovaci\xf3n con cada producto",style:{fontFamily:"Comfortaa",color:"#0059A7",align:"justify",stroke:"#0059A7",strokeThickness:2,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:890,objectHeight:100,objectPositionX:531,objectPositionY:639}},{type:"text",element:"load-text",name:"load-text",content:"CARGANDO...",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:284,objectHeight:50,objectPositionX:1127,objectPositionY:639}},{type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"load-continue-button",content:"CONTINUAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:75,objectPositionX:1127,objectPositionY:639}}],Kt={type:"minigame",element:"8-puzzle",assetName:"8-puzzle-background",name:"8-puzzle",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:570,objectHeight:520,objectPositionX:227,objectPositionY:278}},$t=function(){function e(t,n,i,o){_classCallCheck(this,e),this.shuffledIndexArray=[],this.scene=t,this.puzzleSpecifications=JSON.parse(JSON.stringify(n)),this.puzzleScale=R(this.scene,this.puzzleSpecifications.scale),this.boardCols=i,this.boardRows=o,this.isFinished=!1,this.pieceWidth=Math.floor(this.puzzleScale.objectWidth/this.boardCols),this.pieceHeight=Math.floor(this.puzzleScale.objectHeight/this.boardRows),this.loadAssetPuzzle()}return _createClass(e,[{key:"loadAssetPuzzle",value:function(){this.scene.load.spritesheet(this.puzzleSpecifications.assetName,"../../assets/game_assets/boot-load-assets/minigames-assets/polimapa-assets/8-puzzle-background.png",{frameWidth:Math.floor(this.puzzleSpecifications.scale.objectWidth/this.boardCols),frameHeight:Math.floor(this.puzzleSpecifications.scale.objectHeight/this.boardRows)})}},{key:"generate8Puzzle",value:function(e){this.scene=e,this.prepareBoard()}},{key:"prepareBoard",value:function(){var e,t,n,i=this,o=0,a=Math.floor(this.puzzleScale.objectPositionX),s=Math.floor(this.puzzleScale.objectPositionY);for(this.piecesAmount=this.boardCols*this.boardRows,this.shuffledIndexArray=this.createShuffledIndexArray(),this.piecesGroup=this.scene.add.group(),e=0;e<this.boardRows;e++)for(t=0;t<this.boardCols;t++)this.shuffledIndexArray[o]?(n=this.piecesGroup.create(a+this.pieceWidth*t,s+this.pieceHeight*e,this.puzzleSpecifications.assetName,this.shuffledIndexArray[o])).black=!1:(n=this.piecesGroup.create(a+this.pieceWidth*t,s+this.pieceHeight*e,"black-piece-background")).black=!0,n.name="piece"+e.toString()+"x"+t.toString(),n.currentIndex=o,n.destIndex=this.shuffledIndexArray[o],n.inputEnabled=!0,n.posX=t,n.posY=e,n.setDisplaySize(.97*this.pieceWidth,.97*this.pieceHeight),o++;this.piecesGroup.getChildren().forEach((function(e){e.setInteractive({cursor:l}).on("pointerdown",(function(){i.selectPiece(e)}))}))}},{key:"selectPiece",value:function(e){var t=this.canMove(e);t&&(this.movePiece(e,t),this.numberMovements++)}},{key:"canMove",value:function(e){var t=!1;return this.piecesGroup.getChildren().forEach((function(n){(n.posX===e.posX-1&&n.posY===e.posY&&n.black||n.posX===e.posX+1&&n.posY===e.posY&&n.black||n.posY===e.posY-1&&n.posX===e.posX&&n.black||n.posY===e.posY+1&&n.posX===e.posX&&n.black)&&(t=n)})),t}},{key:"movePiece",value:function(e,t){var n={posX:e.posX,posY:e.posY,x:e.x,y:e.y,currentIndex:e.currentIndex};e.x=t.x,e.y=t.y,e.posX=t.posX,e.posY=t.posY,e.currentIndex=t.currentIndex,e.name="piece"+e.posX.toString()+"x"+e.posY.toString(),t.posX=n.posX,t.posY=n.posY,t.x=n.x,t.y=n.y,t.currentIndex=n.currentIndex,t.name="piece"+t.posX.toString()+"x"+t.posY.toString(),this.isFinished=this.checkIfFinished()}},{key:"checkIfFinished",value:function(){var e=!0;return this.piecesGroup.getChildren().forEach((function(t){t.currentIndex!==t.destIndex&&(e=!1)})),e}},{key:"checkGameFinished",value:function(){return this.isFinished}},{key:"createShuffledIndexArray",value:function(){for(var e=[],t=0;t<this.piecesAmount;t++)e.push(t);return this.disorder(e)}},{key:"disorder",value:function(e){for(var t,n,i=e.length;i>0;)n=Math.floor(Math.random()*i),t=e[--i],e[i]=e[n],e[n]=t;return e}},{key:"getNumberMovements",value:function(){return this.numberMovements}},{key:"hideSlidingPuzzle",value:function(){return this.piecesGroup.destroy()}}]),e}();function Zt(e,t){t.forEach((function(t){e.load.image(t.key,t.path)}))}var en=[{key:"ahorcado-panel-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/ahorcado-panel-background.png"},{key:"ahorcado-illustration-panel-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/ahorcado-illustration-panel-background.png"},{key:"horizontal-pole-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/horizontal-pole-drawing.png"},{key:"vertical-pole-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/vertical-pole-drawing.png"},{key:"rope-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/rope-drawing.png"},{key:"hanging-rope-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/hanging-rope-drawing.png"},{key:"hangman-arms-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/hangman-arms-drawing.png"},{key:"hangman-legs-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/hangman-legs-drawing.png"},{key:"hangman-body-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/hangman-body-drawing.png"},{key:"hangman-head-drawing",path:"../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/hangman-head-drawing.png"}],tn=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"LoadScene"})).maximumQuestionsNumber=1,e.gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}},{key:"preload",value:function(){var e=this;this.createScene(),this.startLoad(),this.load.on("start",(function(){e.loadText.setText("CARGANDO: Start")})),this.load.on("progress",(function(t){e.loadText.setText("CARGANDO: "+(100*t).toFixed(2)+"%")}))}},{key:"create",value:function(){this.loadText.setVisible(!1),this.continueButton.setVisible(!0)}},{key:"createScene",value:function(){this.gameScene.generateGameObjects(Qt),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.getElements(),this.showContent(),this.addFunctionality()}},{key:"getElements",value:function(){this.assistantBackground=this.sceneGameObjects.get("load-assistant-background").gameObject,this.feedbackBackground=this.sceneGameObjects.get("feedback-background").gameObject,this.feedbackTitle=this.sceneGameObjects.get("feedback-title").gameObject,this.feedback=this.sceneGameObjects.get("feedback").gameObject,this.loadFeedbackBackground=this.sceneGameObjects.get("load-feedback-background").gameObject,this.loadFeedback=this.sceneGameObjects.get("load-feedback").gameObject,this.loadText=this.sceneGameObjects.get("load-text").gameObject,this.continueButton=this.sceneGameObjects.get("load-continue-button").gameObject,this.continueButton.setVisible(!1)}},{key:"showContent",value:function(){var e=d.ethicsQuestions;0===m.loadFeedbackIds.length&&d.ethicsQuestionsIds.forEach((function(e){m.loadFeedbackIds.push(e)}));var t=m.loadFeedbackIds.pop(),n=JSON.parse(JSON.stringify(e[t]));this.feedbackTitle.getByName("button-text").setText(n.question_type.toUpperCase()),this.feedback.setText(n.question_feedback),this.loadFeedback.setText(n.question_correct_answer.answer_feedback)}},{key:"addFunctionality",value:function(){var e=this;le(this.continueButton),this.continueButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.start("MinigameInstructionScene",e.gameData)}))}},{key:"randomIntFromInterval",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"checkQuestionId",value:function(e,t){var n=!1;return t.forEach((function(t){t===e&&(n=!0)})),n}},{key:"startLoad",value:function(){switch(this.gameData.locationData.locationId){case"hide-location":this.loadSlidingPuzzle();break;case"location-2":this.loadRiddleImages();break;case"location-3":this.loadPolitonadaAssets("location-3");break;case"location-4":this.loadPolitonadaAssets("location-4");break;default:this.loadOtherMinigameAssets(this.gameData.locationData.minigameId),this.getMinigameQuestionsData()}}},{key:"loadOtherMinigameAssets",value:function(e){this.load.spritesheet("hangman-animation-backgrund","../../assets/game_assets/boot-load-assets/minigames-assets/el-ahorcado-assets/hangman-animation-backgrund.png",{frameWidth:600,frameHeight:400}),this.loadHangmanAssets()}},{key:"loadPolitonadaAssets",value:function(e){this.load.image("lyrics-box-background",["../../assets/game_assets/boot-load-assets/minigames-assets/politonada-assets/lyrics-box-background.png"]),"location-3"===e&&this.load.audio("politonada-coro-audio",["assets/game_assets/boot-load-assets/audios-assets/politonada-coro-audio.mp3"]),"location-4"===e&&this.load.audio("politonada-estrofas-audio",["assets/game_assets/boot-load-assets/audios-assets/politonada-estrofas-audio.mp3"])}},{key:"loadHangmanAssets",value:function(){Zt(this,en)}},{key:"loadSlidingPuzzle",value:function(){this.load.image("polimapa-feedback-illustration","../../assets/game_assets/boot-load-assets/minigames-assets/polimapa-assets/polimapa-feedback-illustration.png"),b.slidingPuzzle=new $t(this,Kt,3,3)}},{key:"getMinigameQuestionsData",value:function(){var e=this.getQuestionsDataByLocation(this.gameData.locationData.locationId);this.gameData.locationData.minigameQuestionsData=this.loadMinigameQuestionsData(e)}},{key:"loadMinigameQuestionsData",value:function(e){for(var t=[],n=[];n.length<this.maximumQuestionsNumber;){var i=this.randomIntFromInterval(0,e.idsQuestionsDB.length),o=e.idsQuestionsDB[i];if(!this.checkQuestionId(o,n)){n.push(o);var a=e.questionsDB[o];this.load.image(a.question_id,a.question_illustration_url),this.load.image(a.question_correct_answer.answer_id,a.question_correct_answer.answer_illustration_url);for(var s=[],r=[];r.length<3;){var c=this.randomIntFromInterval(0,e.idsQuestionsDB.length),u=e.idsQuestionsDB[c];if(!this.checkQuestionId(u,r)&&u!==o){var l=e.questionsDB[u],h=l.question_correct_answer;h.answer_text!==a.question_correct_answer.answer_text&&l.question_type===a.question_type&&(this.load.image(h.answer_id,h.answer_illustration_url),r.push(u),s.push(h))}}a.question_optional_incorrect_answers=s,t.push(a)}}return{questionsDB:t,idsQuestionsDB:n}}},{key:"getQuestionsDataByLocation",value:function(e){var t=[],n=[];if("location-1"===e)t=d.ethicsQuestions,n=d.ethicsQuestionsIds,this.maximumQuestionsNumber=5;else if("location-7"===e||"location-8"===e||"location-5"===e){var i=d.historyQuestions;for(var o in i)"personaje hist\xf3rico"===i[o].question_type&&(t[o]=i[o],n.push(o));this.maximumQuestionsNumber="location-7"===e?n.length:1}else this.maximumQuestionsNumber=5,t=d.historyQuestions,n=d.historyQuestionsIds;return{questionsDB:t,idsQuestionsDB:n}}},{key:"loadRiddleImages",value:function(){var e=this;it.forEach((function(t){e.load.image(t.idRiddle,t.ridleIllustration)}))}}]),n}(),nn={type:"image",element:"logo",assetName:"first-logo-background",name:"first-logo",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:275,objectHeight:150,objectPositionX:108,objectPositionY:75},originX:0,originY:0},on={type:"image",element:"logo",assetName:"second-logo-background",name:"second-logo",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:264,objectHeight:208,objectPositionX:643,objectPositionY:20},originX:.5,originY:0},an={type:"image",element:"logo",assetName:"third-logo-background",name:"third-logo",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:325,objectHeight:150,objectPositionX:1258,objectPositionY:75},originX:1,originY:0},sn={type:"text",element:"title",name:"boot-title",content:u,style:{fontFamily:"Wendy One",color:"#DF0013",align:"center",stroke:"#A50000",strokeThickness:34,fontSize:"85"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1150,objectHeight:230,objectPositionX:683,objectPositionY:417}},rn={type:"bar",element:"progressBar",name:"progressBar",content:".",style:{fontFamily:"Fredoka One",color:"#99AEBA",align:"center",fontSize:"50px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1150,objectHeight:50,objectPositionX:683,objectPositionY:610}},cn={type:"text",element:"progressText",name:"progressText",content:"CARGANDO: 0%",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#000000",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:50,objectPositionX:683,objectPositionY:680}},un=[{key:"load-assistant-background",path:"../../assets/game_assets/boot-load-assets/assistants-assets/load-assistant-background.png"},{key:"powerup-assistant-description-background",path:"../../assets/game_assets/boot-load-assets/assistants-assets/powerup-assistant-description-background.png"},{key:"instruction-assistant-background",path:"../../assets/game_assets/boot-load-assets/assistants-assets/instruction-assistant-background.png"},{key:"epn-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/epn-button-background.png"},{key:"guest-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/guest-button-background.png"},{key:"play-game-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/play-game-button-background.png"},{key:"continue-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/continue-button-background.png"},{key:"sign-out-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/sign-out-button-background.png"},{key:"view-more-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/view-more-button-background.png"},{key:"play-minigame-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/play-minigame-button-background.png"},{key:"quit-minigame-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/quit-minigame-button-background.png"},{key:"letter-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/letter-button-background.png"},{key:"letter-box-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/letter-box-background.png"},{key:"update-data-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/update-data-button-background.png"},{key:"blue-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/blue-button-background.png"},{key:"green-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/green-button-background.png"},{key:"pink-button-background",path:"../../assets/game_assets/boot-load-assets/buttons-assets/pink-button-background.png"},{key:"info-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/info-icon-background.png"},{key:"score-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/score-icon-background.png"},{key:"settings-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/settings-icon-background.png"},{key:"close-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/close-button-background.png"},{key:"on-switch-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/on-switch-icon-background.png"},{key:"off-switch-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/off-switch-icon-background.png"},{key:"check-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/check-icon-background.png"},{key:"blank-check-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/blank-check-icon-background.png"},{key:"home-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/home-icon-background.png"},{key:"return-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/return-icon-background.png"},{key:"assistant-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/assistant-icon-background.png"},{key:"locked-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/locked-icon-background.png"},{key:"up-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/up-button-background.png"},{key:"virtual-world-access-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/virtual-world-access-icon-background.png"},{key:"down-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/down-button-background.png"},{key:"left-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/left-button-background.png"},{key:"right-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/right-button-background.png"},{key:"enable-gamepad-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/enable-gamepad-button-background.png"},{key:"disable-gamepad-button-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/disable-gamepad-button-background.png"},{key:"enter-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/enter-icon-background.png"},{key:"world-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/world-icon-background.png"},{key:"location-point-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/location-point-icon-background.png"},{key:"selected-location-point-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/selected-location-point-icon-background.png"},{key:"inventory-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/inventory-icon-background.png"},{key:"off-sound-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/off-sound-icon-background.png"},{key:"on-sound-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/on-sound-icon-background.png"},{key:"pause-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/pause-icon-background.png"},{key:"star-icon-obtained-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/star-icon-obtained-background.png"},{key:"star-icon-not-obtained-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/star-icon-not-obtained-background.png"},{key:"big-star-icon-not-obtained-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/big-star-icon-not-obtained-background.png"},{key:"big-star-icon-obtained-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/big-star-icon-obtained-background.png"},{key:"correct-answer-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/correct-answer-icon-background.png"},{key:"incorrect-answer-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/incorrect-answer-icon-background.png"},{key:"continue-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/continue-icon-background.png"},{key:"reset-minigame-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/reset-minigame-icon-background.png"},{key:"quit-icon-background",path:"../../assets/game_assets/boot-load-assets/icons-assets/quit-icon-background.png"},{key:"polytechnic-treasure-not-obtained-background",path:"../../assets/game_assets/boot-load-assets/achievements-assets/polytechnic-treasure-not-obtained-background.png"},{key:"bronze-polybuho-not-obtained-background",path:"../../assets/game_assets/boot-load-assets/achievements-assets/bronze-polybuho-not-obtained-background.png"},{key:"silver-polybuho-not-obtained-background",path:"../../assets/game_assets/boot-load-assets/achievements-assets/silver-polybuho-not-obtained-background.png"},{key:"gold-polybuho-not-obtained-background",path:"../../assets/game_assets/boot-load-assets/achievements-assets/gold-polybuho-not-obtained-background.png"},{key:"avatar-selection-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/avatar-selection-card-background.png"},{key:"panel-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/panel-card-background.png"},{key:"inventory-panel-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/inventory-panel-card-background.png"},{key:"profile-panel-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/profile-panel-background.png"},{key:"building-feedback-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/building-feedback-card-background.png"},{key:"building-locations-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/building-locations-card-background.png"},{key:"feedback-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/feedback-card-background.png"},{key:"feedback-title-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/feedback-title-card-background.png"},{key:"id-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/id-card-background.png"},{key:"load-feedback-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/load-feedback-card-background.png"},{key:"minimap-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/minimap-card-background.png"},{key:"powerups-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/powerups-card-background.png"},{key:"square-powerups-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/square-powerups-card-background.png"},{key:"timer-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/timer-card-background.png"},{key:"score-table-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/score-table-background.png"},{key:"location-data-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/location-data-card-background.png"},{key:"location-box-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/location-box-background.png"},{key:"hide-location-box-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/hide-location-box-background.png"},{key:"powerup-description-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/powerup-description-background.png"},{key:"note-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/note-card-background.png"},{key:"instruction-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/instruction-card-background.png"},{key:"location-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/location-card-background.png"},{key:"answer-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/answer-card-background.png"},{key:"answer-white-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/answer-white-card-background.png"},{key:"minigame-feedback-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/minigame-feedback-card-background.png"},{key:"8-puzzle-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/8-puzzle-card-background.png"},{key:"8-puzzle-end-background",path:"../../assets/game_assets/boot-load-assets/minigames-assets/polimapa-assets/8-puzzle-end-background.png"},{key:"pause-menu-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/pause-menu-card-background.png"},{key:"lyric-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/lyric-card-background.png"},{key:"badge-box-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/badge-box-background.png"},{key:"minigame-feedback-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/minigame-feedback-card-background.png"},{key:"entrada-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/entrada-epn-background.png"},{key:"map-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/map-epn-background.png"},{key:"museo-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/museo-epn-background.png"},{key:"teatro-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/teatro-epn-background.png"},{key:"hemiciclo-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/hemiciclo-epn-background.png"},{key:"biblioteca-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/biblioteca-epn-background.png"},{key:"equipo-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/equipo-epn-background.png"},{key:"dgip-epn-background",path:"../../assets/game_assets/boot-load-assets/feedback-cards-assets/dgip-epn-background.png"},{key:"boy-avatar-background",path:"../../assets/game_assets/boot-load-assets/avatar-assets/boy-avatar-background.png"},{key:"boy-avatar-icon",path:"../../assets/game_assets/boot-load-assets/avatar-assets/boy-avatar-icon.png"},{key:"girl-avatar-background",path:"../../assets/game_assets/boot-load-assets/avatar-assets/girl-avatar-background.png"},{key:"girl-avatar-icon",path:"../../assets/game_assets/boot-load-assets/avatar-assets/girl-avatar-icon.png"},{key:"title-bar-background",path:"../../assets/game_assets/boot-load-assets/bars-assets/title-bar-background.png"},{key:"minigame-title-bar-background",path:"../../assets/game_assets/boot-load-assets/bars-assets/minigame-title-bar-background.png"},{key:"area-1-background",path:"../../assets/game_assets/boot-load-assets/world-assets/areas-assets/area-1-background.png"},{key:"area-2-background",path:"../../assets/game_assets/boot-load-assets/world-assets/areas-assets/area-2-background.png"},{key:"area-3-background",path:"../../assets/game_assets/boot-load-assets/world-assets/areas-assets/area-3-background.png"},{key:"area-4-background",path:"../../assets/game_assets/boot-load-assets/world-assets/areas-assets/area-4-background.png"},{key:"area-5-background",path:"../../assets/game_assets/boot-load-assets/world-assets/areas-assets/area-5-background.png"},{key:"area-6-background",path:"../../assets/game_assets/boot-load-assets/world-assets/areas-assets/area-6-background.png"},{key:"map-background",path:"../../assets/game_assets/boot-load-assets/world-assets/maps-assets/map-background.png"},{key:"area-map-2-background",path:"../../assets/game_assets/boot-load-assets/world-assets/maps-assets/area-map-2-background.png"},{key:"virtual-area-2-background",path:"../../assets/game_assets/boot-load-assets/world-assets/virtuals-worlds-assets/virtual-area-2-background.png"},{key:"virtual-area-background",path:"../../assets/game_assets/boot-load-assets/world-assets/virtuals-worlds-assets/virtual-area-background.png"},{key:"locked-poliburger-powerup",path:"../../assets/game_assets/boot-load-assets/powerups-assets/locked-poliburger-powerup.png"},{key:"locked-polibus-powerup",path:"../../assets/game_assets/boot-load-assets/powerups-assets/locked-polibus-powerup.png"},{key:"locked-policuaderno-powerup",path:"../../assets/game_assets/boot-load-assets/powerups-assets/locked-policuaderno-powerup.png"},{key:"locked-polifiesta-powerup",path:"../../assets/game_assets/boot-load-assets/powerups-assets/locked-polifiesta-powerup.png"},{key:"locked-poliperro-powerup",path:"../../assets/game_assets/boot-load-assets/powerups-assets/locked-poliperro-powerup.png"},{key:"poliburger-powerup-box-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/poliburger-powerup-box-background.png"},{key:"polibus-powerup-box-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/polibus-powerup-box-background.png"},{key:"policuaderno-powerup-box-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/policuaderno-powerup-box-background.png"},{key:"polifiesta-powerup-box-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/polifiesta-powerup-box-background.png"},{key:"poliperro-powerup-box-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/poliperro-powerup-box-background.png"},{key:"poliburger-powerup-button-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/poliburger-powerup-button-background.png"},{key:"polibus-powerup-button-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/polibus-powerup-button-background.png"},{key:"policuaderno-powerup-button-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/policuaderno-powerup-button-background.png"},{key:"polifiesta-powerup-button-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/polifiesta-powerup-button-background.png"},{key:"poliperro-powerup-button-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/poliperro-powerup-button-background.png"},{key:"poliburger-powerup-icon-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/poliburger-powerup-icon-background.png"},{key:"polibus-powerup-icon-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/polibus-powerup-icon-background.png"},{key:"policuaderno-powerup-icon-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/policuaderno-powerup-icon-background.png"},{key:"polifiesta-powerup-icon-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/polifiesta-powerup-icon-background.png"},{key:"poliperro-powerup-icon-background",path:"../../assets/game_assets/boot-load-assets/powerups-assets/poliperro-powerup-icon-background.png"},{key:"base-scene-background",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/base-scene-background.png"},{key:"start-scene-background",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/start-scene-background.png"},{key:"minigame-stars-scene-background",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/minigame-stars-scene-background.png"},{key:"minigame-badge-scene-background",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/minigame-badge-scene-background.png"},{key:"politonada-scene-background",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/politonada-scene-background.png"},{key:"modal-scene-background",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/modal-scene-background.png"},{key:"party-scene-background-1",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/party-scene-background-1.png"},{key:"party-scene-background-2",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/party-scene-background-2.png"},{key:"party-scene-background-3",path:"../../assets/game_assets/boot-load-assets/scene-backgrounds-assets/party-scene-background-3.png"},{key:"minigame-panel-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/minigame-panel-background.png"},{key:"minigame-illustration-panel-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/minigame-illustration-panel-background.png"},{key:"question-card-background",path:"../../assets/game_assets/boot-load-assets/cards-assets/question-card-background.png"}],ln=n("Wcq6"),hn=(n("LOEa"),n("NSPt"),n("wj3C")),dn=n.n(hn),pn=n("S+S0"),mn=function(){function e(e,t){this.code_=gn(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return gn(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),e}();function gn(e){return"storage/"+e}function fn(){return new mn("unknown","An unknown error occurred, please check the error payload for server response.")}function bn(){return new mn("canceled","User canceled the upload/download.")}function yn(){return new mn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function vn(){return new mn("no-download-url","The given file does not have any download URLs.")}function _n(e,t,n){return new mn("invalid-argument","Invalid argument in `"+t+"` at index "+e+": "+n)}function wn(){return new mn("app-deleted","The Firebase app was deleted.")}function kn(e,t){return new mn("invalid-format","String does not match format '"+e+"': "+t)}function jn(e){throw new mn("internal-error","Internal error: "+e)}var Sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function On(e){switch(e){case Sn.RAW:case Sn.BASE64:case Sn.BASE64URL:case Sn.DATA_URL:return;default:throw"Expected one of the event types: ["+Sn.RAW+", "+Sn.BASE64+", "+Sn.BASE64URL+", "+Sn.DATA_URL+"]."}}var Pn=function(e,t){this.data=e,this.contentType=t||null};function En(e,t){switch(e){case Sn.RAW:return new Pn(In(t));case Sn.BASE64:case Sn.BASE64URL:return new Pn(Cn(e,t));case Sn.DATA_URL:return new Pn((n=new Nn(t)).base64?Cn(Sn.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw kn(Sn.DATA_URL,"Malformed data URL.")}return In(t)}(n.rest),new Nn(t).contentType)}var n;throw fn()}function In(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296==(64512&i))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var o=i,a=e.charCodeAt(++n);t.push(240|(i=65536|(1023&o)<<10|1023&a)>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189);else 56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Cn(e,t){switch(e){case Sn.BASE64:var n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i)throw kn(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Sn.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a)throw kn(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(u){throw kn(e,"Invalid character found")}for(var r=new Uint8Array(s.length),c=0;c<s.length;c++)r[c]=s.charCodeAt(c);return r}var Nn=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw kn(Sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,i=t[1]||null;null!=i&&(this.base64=(n=i).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=e.substring(e.indexOf(",")+1)},Tn={STATE_CHANGED:"state_changed"},Rn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fn(e){switch(e){case"running":case"pausing":case"canceling":return Rn.RUNNING;case"paused":return Rn.PAUSED;case"success":return Rn.SUCCESS;case"canceled":return Rn.CANCELED;case"error":default:return Rn.ERROR}}function An(e){return null!=e}function Dn(e){return void 0!==e}function xn(e){return"function"==typeof e}function Bn(e){return"object"==typeof e}function Hn(e){return Bn(e)&&null!==e}function Wn(e){return"string"==typeof e||e instanceof String}function Mn(e){return Ln(e)&&Number.isInteger(e)}function Ln(e){return"number"==typeof e||e instanceof Number}function qn(e){return Gn()&&e instanceof Blob}function Gn(){return"undefined"!=typeof Blob}var Un=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({}),zn=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Un.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=Un.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=Un.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,i){if(this.sent_)throw jn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),An(i))for(var o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return An(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw jn("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw jn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw jn("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){An(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){An(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),Yn=function(){function e(){}return e.prototype.createXhrIo=function(){return new zn},e}();function Xn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xn();if(void 0!==n){for(var i=new n,o=0;o<e.length;o++)i.append(e[o]);return i.getBlob()}if(Gn())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var Jn=function(){function e(e,t){var n=0,i="";qn(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(qn(this.data_)){var i=(a=t,s=n,(o=this.data_).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new e(i)}var o,a,s;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Gn()){var i=t.map((function(t){return t instanceof e?t.data_:t}));return new e(Vn.apply(null,i))}var o=t.map((function(e){return Wn(e)?En(Sn.RAW,e).data:e.data_})),a=0;o.forEach((function(e){a+=e.byteLength}));var s=new Uint8Array(a),r=0;return o.forEach((function(e){for(var t=0;t<e.length;t++)s[r++]=e[t]})),new e(s,!0)},e.prototype.uploadData=function(){return this.data_},e}(),Qn=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(i){return new e(t,"")}if(""===n.path)return n;throw new mn("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var a="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],r=0;r<s.length;r++){var c=s[r],u=c.regex.exec(t);if(u){var l=u[c.indices.path];l||(l=""),n=new e(u[c.indices.bucket],l),c.postModify(n);break}}if(null==n)throw function(e){return new mn("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}();function Kn(e){var t,n;try{t=JSON.parse(e)}catch(i){return null}return Bn(n=t)&&!Array.isArray(n)?t:null}function $n(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Zn(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ei(e){return"https://firebasestorage.googleapis.com/v0"+e}function ti(e){var t=encodeURIComponent,n="?";for(var i in e)e.hasOwnProperty(i)&&(n=n+(t(i)+"=")+t(e[i])+"&");return n.slice(0,-1)}function ni(e,t){return t}var ii=function(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||ni},oi=null;function ai(e,t,n){var i=Kn(t);return null===i?null:function(e,t,n){for(var i={type:"file"},o=n.length,a=0;a<o;a++){var s=n[a];i[s.local]=s.xform(i,t[s.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new Qn(e.bucket,e.fullPath);return t.makeStorageReference(n)}})}(i,e),i}(e,i,n)}function si(e,t){for(var n={},i=t.length,o=0;o<i;o++){var a=t[o];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function ri(e){if(!Bn(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!Bn(n))throw"Expected object for 'customMetadata' mapping."}else if(Hn(n))throw"Mapping for '"+t+"' cannot be an object."}}function ci(e){if(!Bn(e)||!e)throw"Expected ListOptions object.";for(var t in e)if("maxResults"===t){if(!Mn(e.maxResults)||e.maxResults<=0)throw"Expected maxResults to be a positive number.";if(e.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==t)throw"Unknown option: "+t;if(e.pageToken&&!Wn(e.pageToken))throw"Expected pageToken to be string."}}var ui=function(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function li(e){if(!e)throw fn()}function hi(e,t){return function(n,i){var o=ai(e,i,t);return li(null!==o),o}}function di(e){return function(t,n){var i;return(i=401===t.getStatus()?new mn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new mn("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new mn("unauthorized","User does not have permission to access '"+e.path+"'."):n).setServerResponseProp(n.serverResponseProp()),i}}function pi(e){var t=di(e);return function(n,i){var o=t(n,i);return 404===n.getStatus()&&(o=new mn("object-not-found","Object '"+e.path+"' does not exist.")),o.setServerResponseProp(i.serverResponseProp()),o}}function mi(e,t,n){var i=ei(t.fullServerUrl()),o=e.maxOperationRetryTime,a=new ui(i,"GET",hi(e,n),o);return a.errorHandler=pi(t),a}function gi(e,t,n,i,o){var a={};a.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(a.delimiter=n),i&&(a.pageToken=i),o&&(a.maxResults=o);var s=ei(t.bucketOnlyServerUrl()),r=e.maxOperationRetryTime,c=new ui(s,"GET",function(e,t){return function(n,i){var o=function(e,t,n){var i=Kn(n);return null===i?null:function(e,t,n){var i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var o=0,a=n.prefixes;o<a.length;o++){var s=a[o].replace(/\/$/,""),r=e.makeStorageReference(new Qn(t,s));i.prefixes.push(r)}if(n.items)for(var c=0,u=n.items;c<u.length;c++)r=e.makeStorageReference(new Qn(t,u[c].name)),i.items.push(r);return i}(e,t,i)}(e,t,i);return li(null!==o),o}}(e,t.bucket),r);return c.urlParams=a,c.errorHandler=di(t),c}function fi(e,t,n){var i=ei(t.fullServerUrl()),o=e.maxOperationRetryTime,a=new ui(i,"GET",function(e,t){return function(n,i){var o=ai(e,i,t);return li(null!==o),function(e,t){var n=Kn(t);if(null===n)return null;if(!Wn(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var n=e.fullPath;return ei("/b/"+o(e.bucket)+"/o/"+o(n))+ti({alt:"media",token:t})}))[0]}(o,i)}}(e,n),o);return a.errorHandler=pi(t),a}function bi(e,t,n,i){var o=ei(t.fullServerUrl()),a=si(n,i),s=e.maxOperationRetryTime,r=new ui(o,"PATCH",hi(e,i),s);return r.headers={"Content-Type":"application/json; charset=utf-8"},r.body=a,r.errorHandler=pi(t),r}function yi(e,t){var n=ei(t.fullServerUrl()),i=new ui(n,"DELETE",(function(e,t){}),e.maxOperationRetryTime);return i.successCodes=[200,204],i.errorHandler=pi(t),i}function vi(e,t,n){var i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),i}var _i=function(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null};function wi(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){li(!1)}return li(!!n&&-1!==(t||["active"]).indexOf(n)),n}var ki=function(e,t,n){if(xn(e)||An(t)||An(n))this.next=e,this.error=t||null,this.complete=n||null;else{var i=e;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}},ji=function(e,t,n,i,o,a){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=i,this.task=o,this.ref=a};function Si(e,t,n){for(var i=t.length,o=t.length,a=0;a<t.length;a++)if(t[a].optional){i=a;break}var s,r,c,u;if(!(i<=n.length&&n.length<=o))throw(s=i)===(r=o)?(c=s,u=1===s?"argument":"arguments"):(c="between "+s+" and "+r,u="arguments"),new mn("invalid-argument-count","Invalid argument count in `"+e+"`: Expected "+c+" "+u+", received "+n.length+".");for(a=0;a<n.length;a++)try{t[a].validator(n[a])}catch(l){throw l instanceof Error?_n(a,e,l.message):_n(a,e,l)}}var Oi=function(e,t){var n=this;this.validator=function(t){n.optional&&!Dn(t)||e(t)},this.optional=!!t};function Pi(e,t){function n(e){if(!Wn(e))throw"Expected string."}var i,o,a;return e?(o=n,a=e,i=function(e){o(e),a(e)}):i=n,new Oi(i,t)}function Ei(){return new Oi((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Gn()&&e instanceof Blob))throw"Expected Blob or File."}))}function Ii(e){return new Oi(ri,e)}function Ci(e){return new Oi(ci,e)}function Ni(){return new Oi((function(e){if(!(Ln(e)&&e>=0))throw"Expected a number 0 or greater."}))}function Ti(e,t){return new Oi((function(t){if(!(null===t||An(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function Ri(e){return new Oi((function(e){if(null!==e&&!xn(e))throw"Expected a Function."}),e)}function Fi(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var Ai,Di,xi=function(){function e(e,t,n,i,o,a){var s=this;void 0===a&&(a=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.service_=t,this.location_=n,this.blob_=o,this.metadata_=a,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_("error"))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals("canceled")?s.completeTransitions_():(s.error_=e,s.transition_("error"))},this.promise_=new Promise((function(e,t){s.resolve_=e,s.reject_=t,s.start_()})),this.promise_.then(null,(function(){}))}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.service_.getAuthToken().then((function(n){switch(t.state_){case"running":e(n);break;case"canceling":t.transition_("canceled");break;case"pausing":t.transition_("paused")}}))},e.prototype.createResumable_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,i,o){var a=t.bucketOnlyServerUrl(),s=vi(t,i,o),r={name:s.fullPath},c=ei(a),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=si(s,n),h=new ui(c,"POST",(function(e){var t;wi(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){li(!1)}return li(Wn(t)),t}),e.maxUploadRetryTime);return h.urlParams=r,h.headers=u,h.body=l,h.errorHandler=di(t),h}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.service_.makeRequest(n,t);e.request_=i,i.getPromise().then((function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_((function(n){var i=function(e,t,n,i){var o=new ui(n,"POST",(function(e){var t=wi(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){li(!1)}n||li(!1);var o=Number(n);return li(!isNaN(o)),new _i(o,i.size(),"final"===t)}),e.maxUploadRetryTime);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=di(t),o}(e.service_,e.location_,t,e.blob_),o=e.service_.makeRequest(i,n);e.request_=o,o.getPromise().then((function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new _i(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_((function(o){var a;try{a=function(e,t,n,i,o,a,s,r){var c=new _i(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw new mn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var u=c.total-c.current,l=u;o>0&&(l=Math.min(l,o));var h=c.current,d={"X-Goog-Upload-Command":l===u?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},p=i.slice(h,h+l);if(null===p)throw yn();var m=new ui(n,"POST",(function(e,n){var o,s=wi(e,["active","final"]),r=c.current+l,u=i.size();return o="final"===s?hi(t,a)(e,n):null,new _i(r,u,"final"===s,o)}),t.maxUploadRetryTime);return m.headers=d,m.body=p.uploadData(),m.progressCallback=r||null,m.errorHandler=di(e),m}(e.location_,e.service_,i,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(r){return e.error_=r,void e.transition_("error")}var s=e.service_.makeRequest(a,o);e.request_=s,s.getPromise().then((function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_("success")):e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var n=mi(e.service_,e.location_,e.mappings_),i=e.service_.makeRequest(n,t);e.request_=i,i.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_("success")}),e.metadataErrorHandler_)}))},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,i,o){var a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},r=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+r;var c=vi(t,i,o),u=si(c,n),l=Jn.getBlob("--"+r+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+r+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+r+"--");if(null===l)throw yn();var h={name:c.fullPath},d=ei(a),p=e.maxUploadRetryTime,m=new ui(d,"POST",hi(e,n),p);return m.urlParams=h,m.headers=s,m.body=l.uploadData(),m.errorHandler=di(t),m}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.service_.makeRequest(n,t);e.request_=i,i.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_("success")}),e.errorHandler_)}))},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case"canceling":case"pausing":this.state_=e,null!==this.request_&&this.request_.cancel();break;case"running":var t="paused"===this.state_;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=e,this.notifyObservers_();break;case"canceled":this.error_=bn(),this.state_=e,this.notifyObservers_();break;case"error":case"success":this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Fn(this.state_);return new ji(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,i){function o(){if(e!==Tn.STATE_CHANGED)throw"Expected one of the event types: ["+Tn.STATE_CHANGED+"]."}var a="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=Ri(!0).validator,r=Ti(null,!0).validator;function c(e){try{return void s(e)}catch(t){}try{if(r(e),!(Dn(e.next)||Dn(e.error)||Dn(e.complete)))throw"";return}catch(t){throw a}}var u=[Pi(o),Ti(c,!0),Ri(!0),Ri(!0)];Si("on",u,arguments);var l=this;function h(e){return function(t,n,o){null!==e&&Si("on",e,arguments);var a=new ki(t,n,i);return l.addObserver_(a),function(){l.removeObserver_(a)}}}function d(e){if(null===e)throw a;c(e)}var p=[Ti(d),Ri(!0),Ri(!0)],m=!(Dn(t)||Dn(n)||Dn(i));return m?h(p):h(null)(t,n,i)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach((function(t){e.notifyObserver_(t)}))},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(Fn(this.state_)){case Rn.SUCCESS:Fi(this.resolve_.bind(null,this.snapshot))();break;case Rn.CANCELED:case Rn.ERROR:Fi(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(Fn(this.state_)){case Rn.RUNNING:case Rn.PAUSED:e.next&&Fi(e.next.bind(e,this.snapshot))();break;case Rn.SUCCESS:e.complete&&Fi(e.complete.bind(e))();break;case Rn.CANCELED:case Rn.ERROR:e.error&&Fi(e.error.bind(e,this.error_))();break;default:e.error&&Fi(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Si("resume",[],arguments);var e="paused"===this.state_||"pausing"===this.state_;return e&&this.transition_("running"),e},e.prototype.pause=function(){Si("pause",[],arguments);var e="running"===this.state_;return e&&this.transition_("pausing"),e},e.prototype.cancel=function(){Si("cancel",[],arguments);var e="running"===this.state_||"pausing"===this.state_;return e&&this.transition_("canceling"),e},e}(),Bi=function(){function e(e,t){this.service=e,this.location=t instanceof Qn?t:Qn.makeFromUrl(t)}return e.prototype.toString=function(){return Si("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return function(){if(oi)return oi;var e=[];e.push(new ii("bucket")),e.push(new ii("generation")),e.push(new ii("metageneration")),e.push(new ii("name","fullPath",!0));var t=new ii("name");t.xform=function(e,t){return function(e){return!Wn(e)||e.length<2?e:Zn(e)}(t)},e.push(t);var n=new ii("size");return n.xform=function(e,t){return An(t)?Number(t):t},e.push(n),e.push(new ii("timeCreated")),e.push(new ii("updated")),e.push(new ii("md5Hash",null,!0)),e.push(new ii("cacheControl",null,!0)),e.push(new ii("contentDisposition",null,!0)),e.push(new ii("contentEncoding",null,!0)),e.push(new ii("contentLanguage",null,!0)),e.push(new ii("contentType",null,!0)),e.push(new ii("metadata","customMetadata",!0)),oi=e}()},e.prototype.child=function(e){Si("child",[Pi()],arguments);var t=$n(this.location.path,e),n=new Qn(this.location.bucket,t);return this.newRef(this.service,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new Qn(this.location.bucket,e);return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new Qn(this.location.bucket,"");return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Zn(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Si("put",[Ei(),Ii(!0)],arguments),this.throwIfRoot_("put"),new xi(this,this.service,this.location,this.mappings(),new Jn(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=Sn.RAW),Si("putString",[Pi(),Pi(On,!0),Ii(!0)],arguments),this.throwIfRoot_("putString");var i=En(t,e),o=Object.assign({},n);return!An(o.contentType)&&An(i.contentType)&&(o.contentType=i.contentType),new xi(this,this.service,this.location,this.mappings(),new Jn(i.data,!0),o)},e.prototype.delete=function(){var e=this;return Si("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(t){var n=yi(e.service,e.location);return e.service.makeRequest(n,t).getPromise()}))},e.prototype.listAll=function(){Si("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then((function(){return e}))},e.prototype.listAllHelper=function(e,t){return Object($e.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return Object($e.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.list({pageToken:t})];case 1:return n=a.sent(),(i=e.prefixes).push.apply(i,n.prefixes),(o=e.items).push.apply(o,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(e,n.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.list=function(e){Si("list",[Ci(!0)],arguments);var t=this;return this.service.getAuthToken().then((function(n){var i=e||{},o=gi(t.service,t.location,"/",i.pageToken,i.maxResults);return t.service.makeRequest(o,n).getPromise()}))},e.prototype.getMetadata=function(){var e=this;return Si("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(t){var n=mi(e.service,e.location,e.mappings());return e.service.makeRequest(n,t).getPromise()}))},e.prototype.updateMetadata=function(e){var t=this;return Si("updateMetadata",[Ii()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var i=bi(t.service,t.location,e,t.mappings());return t.service.makeRequest(i,n).getPromise()}))},e.prototype.getDownloadURL=function(){var e=this;return Si("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(t){var n=fi(e.service,e.location,e.mappings());return e.service.makeRequest(n,t).getPromise().then((function(e){if(null===e)throw vn();return e}))}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new mn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),Hi=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),Wi=function(){function e(e,t,n,i,o,a,s,r,c,u,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=o.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=s,this.errorCallback_=r,this.progressCallback_=u,this.timeout_=c,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var i,o=e.resolve_,a=e.reject_,s=n.xhr;if(n.wasSuccessCode)try{var r=e.callback_(s,s.getResponseText());Dn(r)?o(r):o()}catch(c){a(c)}else null!==s?((i=fn()).setServerResponseProp(s.getResponseText()),a(e.errorCallback_?e.errorCallback_(s,i):i)):a(i=n.canceled?e.appDelete_?wn():bn():new mn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Mi(!1,null,!0)):this.backoffId_=function(t,n,i){var o=1,a=null,s=!1,r=0;function c(){return 2===r}var u=!1;function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u||(u=!0,n.apply(null,e))}function h(t){a=setTimeout((function(){a=null,function(t,n){if(n)t(!1,new Mi(!1,null,!0));else{var i=e.pool_.createXhrIo();e.pendingXhr_=i,null!==e.progressCallback_&&i.addUploadProgressListener(o),i.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(o),e.pendingXhr_=null;var i=(n=n).getErrorCode()===Un.NO_ERROR,a=n.getStatus();if(i&&!e.isRetryStatusCode_(a)){var s=-1!==e.successCodes_.indexOf(a);t(!0,new Mi(s,n))}else{var r=n.getErrorCode()===Un.ABORT;t(!1,new Mi(!1,null,r))}}))}function o(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}}(d,c())}),t)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)l.call.apply(l,Object($e.__spreadArrays)([null,e],t));else{var i,a=c()||s;a?l.call.apply(l,Object($e.__spreadArrays)([null,e],t)):(o<64&&(o*=2),1===r?(r=2,i=0):i=1e3*(o+Math.random()),h(i))}}var p=!1;function m(e){p||(p=!0,u||(null!==a?(e||(r=2),clearTimeout(a),h(0)):e||(r=1)))}return h(0),setTimeout((function(){s=!0,m(!0)}),i),m}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||i},e}(),Mi=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n},Li=function(){function e(t,n,i,o){var a;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=i,this.bucket_=null!=o?Qn.makeFromBucketSpec(o):e.extractBucket_(null===(a=this.app_)||void 0===a?void 0:a.options),this.internals_=new qi(this)}return e.extractBucket_=function(e){var t=null==e?void 0:e.storageBucket;return null==t?null:Qn.makeFromBucketSpec(t)},e.prototype.getAuthToken=function(){return Object($e.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object($e.__generator)(this,(function(n){switch(n.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(e){return e.cancel()})),this.requests_.clear()},e.prototype.makeStorageReference=function(e){return new Bi(this,e)},e.prototype.makeRequest=function(e,t){var n=this;if(this.deleted_)return new Hi(wn());var i=function(e,t,n,i){var o=ti(e.urlParams),a=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e){e["X-Firebase-Storage-Version"]="webjs/"+(void 0!==dn.a?dn.a.SDK_VERSION:"AppManager")}(s),new Wi(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this.appId_,t,this.pool_);return this.requests_.add(i),i.getPromise().then((function(){return n.requests_.delete(i)}),(function(){return n.requests_.delete(i)})),i},e.prototype.ref=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(Si("ref",[Pi(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Bi(this,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{Qn.makeFromUrl(e)}catch(t){throw"Expected valid full URL but got an invalid one."}}return Si("refFromURL",[Pi(t,!1)],arguments),new Bi(this,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Si("setMaxUploadRetryTime",[Ni()],arguments),this.maxUploadRetryTime_=e},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){Si("setMaxOperationRetryTime",[Ni()],arguments),this.maxOperationRetryTime_=e},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),e}(),qi=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},e}();Di={TaskState:Rn,TaskEvent:Tn,StringFormat:Sn,Storage:Li,Reference:Bi},(Ai=dn.a).INTERNAL.registerComponent(new pn.Component("storage",(function(e,t){var n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return new Li(n,i,new Yn,t)}),"PUBLIC").setServiceProps(Di).setMultipleInstances(!0)),Ai.registerVersion("@firebase/storage","0.3.42");var Gi=n("AytR");function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=JSON.parse(JSON.stringify(e));for(var n in d.ethicsQuestions=t.ethics_questions,d.ethicsQuestions)d.ethicsQuestionsIds.push(n),m.loadFeedbackIds.push(n);for(var i in d.historyQuestions=t.history_questions,d.historyQuestions)d.historyQuestionsIds.push(i)}var zi=n("A0Lk"),Yi=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,{key:"BootLoadScene"})}return _createClass(n,[{key:"preload",value:function(){var e=this;!function(){$e.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["Wendy One","Fredoka One","Comfortaa"].map((function(e){return new zi(e)})).map((function(e){return e.load()})),e.next=3,Promise.all(t).then((function(){})).catch((function(e){return console.log("No se pudo cargar las fuentes",e)}));case 3:case"end":return e.stop()}}),e)})))}(),this.load.image("first-logo-background",".../../assets/game_assets/boot-load-assets/logos-assets/first-logo-background.png"),this.load.on("filecomplete-image-first-logo-background",(function(){e.load.image("second-logo-background",".../../assets/game_assets/boot-load-assets/logos-assets/second-logo-background.png")})),this.load.on("filecomplete-image-second-logo-background",(function(){e.load.image("third-logo-background",".../../assets/game_assets/boot-load-assets/logos-assets/third-logo-background.png")})),this.load.on("filecomplete-image-third-logo-background",(function(){e.createScene(),e.startLoad(),e.load.on("progress",(function(t){e.updateLoadBar(t)}))}))}},{key:"getEpnDependencesData",value:function(){g.bestDependenceQuery=p.firebaseApp.database().ref("epn_dependence").orderByChild("dependence_totalScore"),g.bestDependenceQuery.once("value").then((function(e){var t=[];e.forEach((function(e){t.push(e.val())})),t.reverse(),g.topBestDependence=t}))}},{key:"getPlayersData",value:function(){g.scoreTableFirebaseConection=p.firebaseApp.database().ref("score_table"),g.bestMemberOfQuery=g.scoreTableFirebaseConection.orderByChild("player_totalScore"),g.bestPlayerQuery=g.scoreTableFirebaseConection.orderByChild("player_totalScore").limitToLast(10),g.bestPlayerQuery.once("value").then((function(e){var t=[];e.forEach((function(e){t.push(e.val())})),t.reverse(),g.topBestPlayers=t}))}},{key:"logInGame",value:function(){var e=this;this.firebaseApp.auth().onAuthStateChanged((function(t){if(e.bootGameMusic(),t){var n=p.firebaseApp.database().ref("questions/"),i=p.firebaseApp.database().ref("players/"+t.uid);n.once("value").then((function(e){Ui(e.val())})),i.once("value").then((function(t){var n={returnSceneName:"",accessType:m.accessType,userData:JSON.parse(JSON.stringify(t)),playerFirebaseConection:i};m.status="startedGame","register"===m.accessType?(h.returnButton.setVisible(!1),h.registerElement.setVisible(!1),h.loginElement.setVisible(!1),new Ee(h.scene,"account-created-message",n).updatePopUpWithOneOnlyButton()):(e.scene.stop(m.currentScene),e.scene.start("MainScene",n))}))}else"bootLoad"==m.status&&(Ui(),e.scene.stop(e.scene.key),e.scene.start("StartScene"))}))}},{key:"createScene",value:function(){var e=this,t=JSON.parse(JSON.stringify(nn));this.generateLogo(t);var n=JSON.parse(JSON.stringify(on));this.generateLogo(n);var i=JSON.parse(JSON.stringify(an));this.generateLogo(i);var o=JSON.parse(JSON.stringify(sn));this.generateText(o);var a=JSON.parse(JSON.stringify(cn));this.progressBarText=this.generateText(a);var s=JSON.parse(JSON.stringify(rn));s.scale=R(this,s.scale),this.generateBar(s.scale);var r=JSON.parse(JSON.stringify(rn)),c=JSON.parse(JSON.stringify(rn));r.scale.objectPositionY+=110,c.scale.objectPositionY-=10,this.progressText=this.generateText(r),this.progressAnimation=this.generateText(c),this.animateTextBar(),this.load.on("fileprogress",(function(t){null!=e.progressText&&(e.progressText.setFontSize(25),e.progressText.setText("Cargando recurso: "+t.key))}))}},{key:"animateTextBar",value:function(){var e=this;null!=this.progressAnimation&&setTimeout((function(){e.addPointText("."),setTimeout((function(){e.addPointText(". ."),setTimeout((function(){e.addPointText(". . ."),setTimeout((function(){e.animateTextBar()}),300)}),300)}),300)}),300)}},{key:"addPointText",value:function(e){null!=this.progressAnimation&&this.progressAnimation.setText(e)}},{key:"generateLogo",value:function(e){e.scale=R(this,e.scale);var t=A(this,e);t.setOrigin(e.originX,e.originY),this.add.existing(t)}},{key:"generateText",value:function(e){e.scale=R(this,e.scale);var t=F(this,e);return this.add.existing(t),t}},{key:"generateBar",value:function(e){this.graphics=this.add.graphics(),this.newGraphics=this.add.graphics(),this.progressBarScale=e,this.progressBarScale.objectPositionX=e.objectPositionX-e.objectWidth/2,this.progressBarScale.objectPositionY=e.objectPositionY-e.objectHeight/2;var t=new Phaser.Geom.Rectangle(this.progressBarScale.objectPositionX,this.progressBarScale.objectPositionY,this.progressBarScale.objectWidth,this.progressBarScale.objectHeight);this.graphics.fillStyle(22951,1),this.graphics.fillRectShape(t),this.loadBarScale=e,this.loadBarScale.objectWidth=e.objectWidth-10,this.loadBarScale.objectHeight=e.objectHeight-10,this.loadBarScale.objectPositionX=this.progressBarScale.objectPositionX+5,this.loadBarScale.objectPositionY=this.progressBarScale.objectPositionY+5,this.updateLoadBar(3e-4)}},{key:"updateLoadBar",value:function(e){this.newGraphics.clear(),this.newGraphics.fillStyle(4129150,1),this.newGraphics.fillRectShape(new Phaser.Geom.Rectangle(this.loadBarScale.objectPositionX,this.loadBarScale.objectPositionY,e*this.loadBarScale.objectWidth,this.loadBarScale.objectHeight)),this.progressBarText.setText("CARGANDO: "+(e*=100).toFixed(2)+"%")}},{key:"startLoad",value:function(){this.firebaseApp=ln.initializeApp(Gi.a.firebaseConfig),p.firebaseApp=this.firebaseApp,this.connectedInfoDatabase=p.firebaseApp.database().ref(".info/connected"),this.connectedInfoDatabase.on("value",(function(e){m.conectionStatus=e.val(),!0===e.val()&&(m.conectionStatus=!0)})),this.load.html("register-form","/assets/html/auth/register.html"),this.load.html("login-form","/assets/html/auth/login.html"),this.load.html("user-data-update-form","/assets/html/auth/data_update.html"),this.load.html("restore-password-form","/assets/html/auth/password_restore.html"),this.load.html("user-password-update-form","/assets/html/auth/password_update.html"),this.load.video("area-2-video","../../assets/game_assets/boot-load-assets/video-assets/area-2-video.mp4","loadeddata",!1,!1),this.load.spritesheet("boy-avatar-sprite","../../assets/game_assets/boot-load-assets/players-assets/boy_player.png",{frameWidth:440,frameHeight:715}),this.load.spritesheet("girl-avatar-sprite","../../assets/game_assets/boot-load-assets/players-assets/girl_player.png",{frameWidth:440,frameHeight:715}),this.load.spritesheet("boy-avatar-singer-sprite","../../assets/game_assets/boot-load-assets/players-assets/boy_player_singer.png",{frameWidth:440,frameHeight:715}),this.load.spritesheet("girl-avatar-singer-sprite","../../assets/game_assets/boot-load-assets/players-assets/girl_player_singer.png",{frameWidth:440,frameHeight:715}),this.load.audio("game-music-audio",["assets/game_assets/boot-load-assets/audios-assets/game-music-audio.mp3"]),this.load.json("virtual-area-2","../../assets/game_assets/boot-load-assets/world-assets/virtuals-worlds-assets/virtual-area-2-specifications.json"),this.load.spritesheet("black-piece-background","../../assets/game_assets/boot-load-assets/minigames-assets/polimapa-assets/black-piece-background.png",{frameWidth:400,frameHeight:350}),Zt(this,un)}},{key:"create",value:function(){var e=this;this.input.setDefaultCursor("url(assets/game_assets/boot-load-assets/cursors-assets/cursor-pointer.cur), pointer"),this.progressBarText.setText("CONSTRUYENDO JUEGO . . ."),m.showGamepad=!!m.isDeviceMobile,setTimeout((function(){e.progressBarText.setText("SINCRONIZANDO DATOS . . ."),setTimeout((function(){e.updateGameData()}),1e3),setTimeout((function(){e.progressText=null,e.progressAnimation=null}),1e3)}),1500)}},{key:"updateGameData",value:function(){return $e.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEpnDependencesData();case 2:return e.next=4,this.getPlayersData();case 4:return e.next=6,this.logInGame();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"bootGameMusic",value:function(){m.isSoundMuted=!0,this.sound.mute=!0,m.gameMusic=this.sound.add("game-music-audio"),this.sound.pauseOnBlur=!1}}]),n}(),Xi=[{type:"image",element:"background",assetName:"base-scene-background",name:"base-scene-background",scale:y},{type:"interactiveObject",element:"center-button",name:"scene-title-bar",content:"ELIGE TU AVATAR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:100,objectPositionX:683,objectPositionY:60}},{type:"interactiveObject",element:"button",assetName:"return-icon-background",name:"return-button",content:"ATR\xc1S",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:146,objectHeight:76,objectPositionX:127,objectPositionY:62}},{type:"interactiveObject",element:"bottom-title-button",assetName:"boy-avatar-background",name:"boy-avatar",content:"CHICO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:14,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:428,objectPositionX:433,objectPositionY:375}},{type:"interactiveObject",element:"bottom-title-button",assetName:"girl-avatar-background",name:"girl-avatar",content:"CHICA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:14,fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:428,objectPositionX:933,objectPositionY:375}},{type:"image",element:"background",assetName:"avatar-selection-card-background",name:"avatar-selector",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:327,objectHeight:480,objectPositionX:445,objectPositionY:370}},{type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"continue-button",content:"CONTINUAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:330,objectHeight:90,objectPositionX:684,objectPositionY:684}}],Vi=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"AvatarSelectionScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){this.generateScene(),this.getElements(),this.addFunctionality(),this.disableContinueButton()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Xi),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.returnButton=this.sceneGameObjects.get("return-button").gameObject,this.boyAvatarButton=this.sceneGameObjects.get("boy-avatar").gameObject,this.girlAvatarButton=this.sceneGameObjects.get("girl-avatar").gameObject,this.continueButton=this.sceneGameObjects.get("continue-button").gameObject,this.avatarSelector=this.sceneGameObjects.get("avatar-selector").gameObject,this.avatarSelector.setVisible(!1)}},{key:"addFunctionality",value:function(){var e=this;le(this.returnButton),this.returnButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.start(e.gameData.returnSceneName)})),this.returnButton.setVisible("guest"===this.gameData.accessType),le(this.boyAvatarButton),this.boyAvatarButton.setInteractive().on("pointerdown",(function(){e.enableContinueButton(),e.girlAvatarButton.setInteractive(),e.boyAvatarButton.disableInteractive(),e.putSelectorOnAvatar(e.boyAvatarButton.x),e.avatarId="boy-avatar"})),le(this.girlAvatarButton),this.girlAvatarButton.setInteractive().on("pointerdown",(function(){e.enableContinueButton(),e.boyAvatarButton.setInteractive(),e.girlAvatarButton.disableInteractive(),e.putSelectorOnAvatar(e.girlAvatarButton.x),e.avatarId="girl-avatar"})),le(this.continueButton),this.continueButton.setInteractive().on("pointerdown",(function(){e.gameData.userData.player_avatarId=e.avatarId,"guest"!==e.gameData.accessType&&m.conectionStatus&&(e.gameData.accessType="login",e.gameData.playerFirebaseConection.update({player_avatarId:e.avatarId})),e.scene.stop(e.scene.key),e.scene.start("MainScene",e.gameData)}))}},{key:"putSelectorOnAvatar",value:function(e){this.avatarSelector.setVisible(!0);var t=e+Math.trunc(this.sys.canvas.width/1366*12);this.avatarSelector.setX(t)}},{key:"disableContinueButton",value:function(){var e=this.continueButton.getByName("button-Background"),t=this.continueButton.getByName("button-text");e.setTint(6124414),t.setTint(6124414),this.continueButton.disableInteractive()}},{key:"enableContinueButton",value:function(){var e=this.continueButton.getByName("button-Background"),t=this.continueButton.getByName("button-text");e.clearTint(),t.clearTint(),this.continueButton.setInteractive()}}]),n}(),Ji=[_,{type:"interactiveObject",element:"center-button",name:"scene-title-bar",content:"TOP MEJOR POLIT\xc9CNICO",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:100,objectPositionX:683,objectPositionY:60}},{type:"interactiveObject",element:"button",assetName:"return-icon-background",name:"return-button",content:"ATR\xc1S",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:146,objectHeight:76,objectPositionX:127,objectPositionY:62}},{type:"interactiveObject",element:"score-table-top-10",assetName:"score-table-background",name:"best-players-score-table",content:"TOP 10\nMEJOR POLIT\xc9CNICO",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:520,objectHeight:590,objectPositionX:317,objectPositionY:434}},{type:"interactiveObject",element:"score-table-top-10",assetName:"score-table-background",name:"dependence-score-table",content:"TOP 10\nMEJOR FACULTAD",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:520,objectHeight:590,objectPositionX:1050,objectPositionY:434}},{type:"interactiveObject",element:"bottom-title-button",assetName:"assistant-icon-background",name:"assistant-button",content:"AYUDA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:140,objectPositionX:683,objectPositionY:434}}],Qi=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,{key:"TopBestPlayerScene"})}return _createClass(n,[{key:"init",value:function(e){this.sceneData=e}}]),_createClass(n,[{key:"create",value:function(){this.gameScene=new Ce(this),this.sceneGameObjects=new Map,this.generateScene(),this.getElements(),this.addFunctionality(),this.updateSceneData()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Ji),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.returnButton=this.sceneGameObjects.get("return-button").gameObject,this.topBestPlayers=this.sceneGameObjects.get("best-players-score-table").gameObject,this.topBestDependence=this.sceneGameObjects.get("dependence-score-table").gameObject,this.assistantButton=this.sceneGameObjects.get("assistant-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;le(this.returnButton),this.returnButton.setInteractive().on("pointerdown",(function(){e.disableUpdateSceneData(),e.scene.stop(e.scene.key),e.scene.wake(e.sceneData.returnSceneName)})),Se(this,this.assistantButton)}},{key:"updateSceneData",value:function(){var e=this;this.topBestPlayers.updatePlayersScoreTable("","TOP 10\nMEJORES POLIT\xc9CNICOS",g.topBestPlayers),g.bestPlayerQuery.on("value",(function(t){var n=[];t.forEach((function(e){n.push(e.val())})),n.reverse(),g.topBestPlayers=n,e.topBestPlayers.updatePlayersScoreTable("","TOP 10\nMEJORES POLIT\xc9CNICOS",n)})),this.topBestDependence.updateDependenceScoreTable("TOP 10\nMEJORES FACULTADES EPN",g.topBestDependence),g.bestDependenceQuery.on("value",(function(t){var n=[];t.forEach((function(e){n.push(e.val())})),n.reverse(),g.topBestDependence=n,e.topBestDependence.updateDependenceScoreTable("TOP 10\nMEJORES FACULTADES EPN",n)}))}},{key:"disableUpdateSceneData",value:function(){m.conectionStatus&&(g.bestPlayerQuery.off("value"),g.bestMemberOfQuery.off("value"),g.bestDependenceQuery.off("value"))}}]),n}(),Ki=[_,{type:"interactiveObject",element:"center-button",name:"scene-title-bar",content:"PERFIL DEL JUGADOR",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:100,objectPositionX:683,objectPositionY:60}},{type:"interactiveObject",element:"button",assetName:"return-icon-background",name:"return-button",content:"ATR\xc1S",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:146,objectHeight:76,objectPositionX:127,objectPositionY:62}},{type:"image",element:"background",assetName:"profile-panel-background",name:"user-data-panel",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:640,objectHeight:300,objectPositionX:350,objectPositionY:270}},{type:"text",element:"title",name:"user-data-title",content:"DATOS DEL JUGADOR",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:40,objectPositionX:340,objectPositionY:150}},{type:"interactiveObject",element:"profile-card",name:"detailed-profile-card",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:570,objectHeight:170,objectPositionX:340,objectPositionY:263}},{type:"interactiveObject",element:"simple-button",assetName:"update-data-button-background",name:"update-password-button",content:"CAMBIAR CONTRASE\xd1A",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:270,objectHeight:45,objectPositionX:190,objectPositionY:384}},{type:"interactiveObject",element:"simple-button",assetName:"update-data-button-background",name:"update-data-button",content:"ACTUALIZAR PERFIL",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"20"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:270,objectHeight:45,objectPositionX:490,objectPositionY:384}},{type:"image",element:"background",assetName:"profile-panel-background",name:"score-panel",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:640,objectHeight:300,objectPositionX:350,objectPositionY:595}},{type:"text",element:"total-score",name:"total-score",content:"POLIPUNTOS: 0",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:40,objectPositionX:347,objectPositionY:475}},{type:"image",element:"background",assetName:"profile-panel-background",name:"trophies-panel",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:640,objectHeight:300,objectPositionX:1019,objectPositionY:270}},{type:"text",element:"title",name:"trophy-data-title",content:"TROFEOS OBTENIDOS",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:40,objectPositionX:1015,objectPositionY:150}},{type:"image",element:"background",assetName:"gold-polybuho-not-obtained-background",name:"gold-trophy",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:245,objectHeight:90,objectPositionX:851,objectPositionY:240}},{type:"image",element:"background",assetName:"silver-polybuho-not-obtained-background",name:"silver-trophy",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:90,objectPositionX:913,objectPositionY:340}},{type:"image",element:"background",assetName:"bronze-polybuho-not-obtained-background",name:"bronze-trophy",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:90,objectPositionX:788,objectPositionY:340}},{type:"image",element:"background",assetName:"polytechnic-treasure-not-obtained-background",name:"treasure",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:190,objectPositionX:1154,objectPositionY:290}},{type:"image",element:"background",assetName:"profile-panel-background",name:"badges-panel",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:640,objectHeight:300,objectPositionX:1019,objectPositionY:595}},{type:"text",element:"title",name:"badged-data-title",content:"INSIGNIAS OBTENIDAS",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:500,objectHeight:40,objectPositionX:1019,objectPositionY:475}},{type:"user-data-update-form",element:"form",name:"user-data-update-form",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:683,objectPositionY:384}}],$i=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"PlayerProfileScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e.locationBox=new Map,e.badgeBox=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){var e=this;this.generateScene(),this.getElements(),this.addFunctionality(),this.updateSceneData(this.gameData.userData),"guest"!==this.gameData.accessType&&m.conectionStatus&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.updateSceneData(n)}))}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Ki),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects,this.generateLocationsBox(this.gameData.userData.player_areas["area-2"].area_locations),this.generateBadgesBox(this.gameData.userData.player_achievements)}},{key:"generateLocationsBox",value:function(e){void 0===this.locationBox&&this.locationBox.forEach((function(e){e.destroy()}));var t=JSON.parse(JSON.stringify(Lt)),n=JSON.parse(JSON.stringify(qt));t.scale=R(this,t.scale),n.scale=R(this,n.scale),this.locationBox=Yt(this,"locations",e,0,10,2,5,t.scale,n)}},{key:"generateBadgesBox",value:function(e){void 0===this.badgeBox&&null===this.badgeBox&&this.badgeBox.forEach((function(e){e.destroy()}));var t=JSON.parse(JSON.stringify(Gt)),n=JSON.parse(JSON.stringify(Ut));t.scale=R(this,t.scale),n.scale=R(this,n.scale),this.badgeBox=Yt(this,"badges",e,0,10,2,5,t.scale,n)}},{key:"getElements",value:function(){this.returnButton=this.sceneGameObjects.get("return-button").gameObject,this.profileCardComponent=this.sceneGameObjects.get("detailed-profile-card").gameObject,this.updateDataButton=this.sceneGameObjects.get("update-data-button").gameObject,this.updatePasswordButton=this.sceneGameObjects.get("update-password-button").gameObject,this.updateUserDataForm=this.sceneGameObjects.get("user-data-update-form").gameObject,this.totalScore=this.sceneGameObjects.get("total-score").gameObject,this.goldTrophy=this.sceneGameObjects.get("gold-trophy").gameObject,this.silverTrophy=this.sceneGameObjects.get("silver-trophy").gameObject,this.bronzeTrophy=this.sceneGameObjects.get("bronze-trophy").gameObject,this.treasure=this.sceneGameObjects.get("treasure").gameObject}},{key:"addFunctionality",value:function(){var e=this;le(this.returnButton),this.returnButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.scene.stop(e.scene.key),e.scene.start("MainScene",e.gameData)})),"guest"!==this.gameData.accessType?(le(this.updateDataButton),this.updateDataButton.setInteractive().on("pointerdown",(function(){e.updateUserDataForm.activateComponent(e.gameData)}))):this.updateDataButton.setAlpha(.25),"guest"!==this.gameData.accessType?(le(this.updatePasswordButton),this.updatePasswordButton.setInteractive().on("pointerdown",(function(){e.updatePasswordButton.disableInteractive(),p.firebaseApp.auth().sendPasswordResetEmail(p.firebaseApp.auth().currentUser.email).then((function(){var t=new Ee(h.scene,"update-user-data-message",e.gameData),n="El enlace de actualizaci\xf3n de la contrase\xf1a fue enviado a: \n"+p.firebaseApp.auth().currentUser.email+".\n\nSi no has recibido el enlace de recuperaci\xf3n\nrevisa la carpeta de SPAM o vuele a reenviarlo.";t.updatePopUpMessage("NOTA",n);var i=t.updatePopUpWithOneOnlyButton();le(i),i.setInteractive().on("pointerdown",(function(){t.destroy(),e.updatePasswordButton.setInteractive()}))}))}))):this.updatePasswordButton.setAlpha(.25)}},{key:"updateSceneData",value:function(e){this.profileCardComponent.updateProfilCardData(e),this.totalScore.setText("POLIPUNTOS: "+e.player_totalScore),this.locationBox.forEach((function(t){var n=e.player_areas["area-2"].area_locations[t.getData("boxId")];t.updateLocationStars(n.location_starsNumber),t.updateLocationScore(n.location_score)})),this.badgeBox.forEach((function(t){var n=t.getByName("button-Background"),i=t.getByName("button-text");e.player_achievements[t.getData("boxId")].achievement_obtained?(n.clearTint(),i.style.setColor("#FFFFFF"),i.style.setStroke("#FFFFFF",1)):(n.setTint(0),i.style.setColor("#99AEBA"),i.style.setStroke("#99AEBA",1))})),this.checkTrophy(this.goldTrophy,e.player_achievements["gold-trophy"].achievement_obtained),this.checkTrophy(this.silverTrophy,e.player_achievements["silver-trophy"].achievement_obtained),this.checkTrophy(this.bronzeTrophy,e.player_achievements["bronze-trophy"].achievement_obtained),this.checkTrophy(this.treasure,e.player_achievements.treasure.achievement_obtained)}},{key:"checkTrophy",value:function(e,t){t?e.clearTint():e.setTint(9342606)}}]),n}(),Zi=[{type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:y},{type:"image",element:"background",assetName:"inventory-panel-card-background",name:"inventory-panel-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1255,objectHeight:600,objectPositionX:683,objectPositionY:384}},{type:"interactiveObject",element:"bottom-title-button",assetName:"close-button-background",name:"close-button",content:"CERRAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"25",strokeThickness:10,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:90,objectHeight:110,objectPositionX:1290,objectPositionY:108}},{type:"text",element:"title",name:"instruction-title",content:"POLIMOCHILA",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:70,objectPositionX:683,objectPositionY:135}},{type:"text",element:"title",name:"description-card-title",content:"DESCRIPCI\xd3N DE POWERUPS",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:525,objectHeight:50,objectPositionX:997,objectPositionY:210}},{type:"image",element:"background",assetName:"powerup-assistant-description-background",name:"powerup-assistant-description-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:350,objectHeight:300,objectPositionX:997,objectPositionY:385}},{type:"interactiveObject",element:"button",assetName:"note-card-background",name:"power-note-card",content:"Da clic sobre cualquier powerup para descrubir su poder en el juego.",style:{fontFamily:"Comfortaa",color:"#0059A7",align:"center",fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:524,objectHeight:100,objectPositionX:997,objectPositionY:585}},{type:"interactiveObject",element:"bottom-title-button",assetName:"powerup-selected-background",name:"powerup-selected",content:"powerupName",style:{fontFamily:"Fredoka One",color:"#0059A7",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:160,objectHeight:160,objectPositionX:997,objectPositionY:310}},{type:"image",element:"background",assetName:"powerup-description-background",name:"powerup-description-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:535,objectHeight:247,objectPositionX:997,objectPositionY:523}},{type:"text",element:"description",name:"powerup-selected-description",content:"Es un elemento propio de la EPN",style:{fontFamily:"Comfortaa",color:"#0059A7",align:"center",stroke:"#0059A7",strokeThickness:1,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:495,objectHeight:170,objectPositionX:997,objectPositionY:523}},{type:"text",element:"title",name:"powerups-card-title",content:"COLECCI\xd3N DE \xedTEMS",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:525,objectHeight:50,objectPositionX:356,objectPositionY:210}},{type:"text",element:"title",name:"items-title",content:"AYUDAS",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:40,objectPositionX:356,objectPositionY:260}},{type:"interactiveObject",element:"bottom-title-button",assetName:"poliburger-powerup-box-background",name:"poliburger-powerup",content:"POLIBURGER",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:132,objectHeight:154,objectPositionX:202,objectPositionY:380}},{type:"interactiveObject",element:"bottom-title-button",assetName:"polibus-powerup-box-background",name:"polibus-powerup",content:"POLIBUS",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:132,objectHeight:154,objectPositionX:377,objectPositionY:380}},{type:"interactiveObject",element:"bottom-title-button",assetName:"poliperro-powerup-box-background",name:"poliperro-powerup",content:"POLIPERRO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:132,objectHeight:154,objectPositionX:555,objectPositionY:380}},{type:"interactiveObject",element:"bottom-title-button",assetName:"policuaderno-powerup-box-background",name:"policuaderno-powerup",content:"POLICUADERNO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:132,objectHeight:154,objectPositionX:262,objectPositionY:558}},{type:"interactiveObject",element:"bottom-title-button",assetName:"polifiesta-powerup-box-background",name:"polifiesta-powerup",content:"POLIFIESTA",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:132,objectHeight:154,objectPositionX:490,objectPositionY:558}},{type:"text",element:"quantity",name:"number-of-poliburgers",content:"5",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#D60654",strokeThickness:20,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:100,objectPositionX:202,objectPositionY:362}},{type:"text",element:"quantity",name:"number-of-polibuses",content:"5",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#D60654",strokeThickness:20,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:100,objectPositionX:377,objectPositionY:362}},{type:"text",element:"quantity",name:"number-of-poliperros",content:"5",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#D60654",strokeThickness:20,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:100,objectPositionX:555,objectPositionY:362}},{type:"text",element:"quantity",name:"number-of-policuadernos",content:"5",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#D60654",strokeThickness:20,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:100,objectPositionX:262,objectPositionY:540}},{type:"text",element:"quantity",name:"number-of-polifiestas",content:"5",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",stroke:"#D60654",strokeThickness:20,fontSize:"75"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:120,objectHeight:100,objectPositionX:490,objectPositionY:540}}],eo=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,{key:"InventoryScene"})}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){var e=this;this.generateScene(),this.getElements(),this.addFunctionality(),this.updateSceneData(this.gameData.userData),"guest"!==this.gameData.accessType&&this.gameData.playerFirebaseConection.on("value",(function(t){var n=JSON.parse(JSON.stringify(t.val()));e.gameData.userData=n,e.updateSceneData(n)}))}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(Zi),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.sceneGameObjects.get("scene-backgroud").gameObject.setTint(0),this.closeButton=this.sceneGameObjects.get("close-button").gameObject,this.poliburgerButton=this.sceneGameObjects.get("poliburger-powerup"),this.polibusButton=this.sceneGameObjects.get("polibus-powerup"),this.policuadernoButton=this.sceneGameObjects.get("policuaderno-powerup"),this.poliperroButton=this.sceneGameObjects.get("poliperro-powerup"),this.polifiestaButton=this.sceneGameObjects.get("polifiesta-powerup"),this.numberOfPoliburgers=this.sceneGameObjects.get("number-of-poliburgers").gameObject,this.numberOfPolibuses=this.sceneGameObjects.get("number-of-polibuses").gameObject,this.numberOfPolicuadernos=this.sceneGameObjects.get("number-of-policuadernos").gameObject,this.numberOfPolifiestas=this.sceneGameObjects.get("number-of-polifiestas").gameObject,this.numberOfPoliperros=this.sceneGameObjects.get("number-of-poliperros").gameObject,this.powerUpAssistant=this.sceneGameObjects.get("powerup-assistant-description-background").gameObject,this.powerNote=this.sceneGameObjects.get("power-note-card").gameObject,this.powerUpSelectedBackground=this.sceneGameObjects.get("powerup-selected").gameObject,this.powerUpSelectedBackground.setVisible(!1),this.powerUpDescriptionBackground=this.sceneGameObjects.get("powerup-description-background").gameObject,this.powerUpDescriptionBackground.setVisible(!1),this.powerUpSelectedDescription=this.sceneGameObjects.get("powerup-selected-description").gameObject,this.powerUpSelectedDescription.setVisible(!1)}},{key:"addFunctionality",value:function(){var e=this;he(this.closeButton),this.closeButton.setInteractive().on("pointerdown",(function(){je(e.gameData),e.scene.stop(e.scene.key),e.scene.wake(e.gameData.returnSceneName)})),this.addPowerUpButtonFuncionality(this.poliburgerButton,this.numberOfPoliburgers),this.addPowerUpButtonFuncionality(this.policuadernoButton,this.numberOfPolicuadernos),this.addPowerUpButtonFuncionality(this.polibusButton,this.numberOfPolibuses),this.addPowerUpButtonFuncionality(this.poliperroButton,this.numberOfPoliperros),this.addPowerUpButtonFuncionality(this.polifiestaButton,this.numberOfPolifiestas)}},{key:"addPowerUpButtonFuncionality",value:function(e,t){var n=this;e.gameObject.setInteractive({cursor:l});var i=t,o=e.gameObject,a=o.getByName("button-Background");a.setInteractive({cursor:l}).on("pointerover",(function(){a.setTint(2752256),o.y+=7,i.y+=7})),a.setInteractive().on("pointerout",(function(){a.clearTint(),o.y-=7,i.y-=7})),a.setInteractive().on("pointerdown",(function(){n.powerUpAssistant.setVisible(!1),n.powerNote.setVisible(!1),n.powerUpSelectedBackground.setVisible(!0),n.powerUpDescriptionBackground.setVisible(!0),n.powerUpSelectedDescription.setVisible(!0),n.showPowerUpDescription(e.gameObjectSpecifications)}))}},{key:"showPowerUpDescription",value:function(e){var t=this.powerUpSelectedBackground.getByName("button-Background"),n=this.powerUpSelectedBackground.getByName("button-text");D(t,qe[e.name].icon_key,e.scale.objectWidth,t.displayHeight),n.setText(qe[e.name].title),this.powerUpSelectedDescription.setText(qe[e.name].description)}},{key:"updateSceneData",value:function(e){this.numberOfPoliburgers.setText(e.player_powerUps["poliburger-powerup"].powerups_number),this.numberOfPolibuses.setText(e.player_powerUps["polibus-powerup"].powerups_number),this.numberOfPoliperros.setText(e.player_powerUps["poliperro-powerup"].powerups_number),this.numberOfPolicuadernos.setText(e.player_powerUps["policuaderno-powerup"].powerups_number),this.numberOfPolifiestas.setText(e.player_powerUps["polifiesta-powerup"].powerups_number)}}]),n}(),to=[{type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:y},{type:"image",element:"background",assetName:"panel-card-background",name:"assistant-panel-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1255,objectHeight:600,objectPositionX:683,objectPositionY:384}},{type:"interactiveObject",element:"bottom-title-button",assetName:"close-button-background",name:"close-button",content:"CERRAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"25",strokeThickness:10,stroke:"#FFFFFF"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:90,objectHeight:110,objectPositionX:1290,objectPositionY:108}},{type:"image",element:"background",assetName:"instruction-assistant-background",name:"instruction-assistant-background",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:300,objectHeight:350,objectPositionX:240,objectPositionY:425}},{type:"text",element:"title",name:"instruction-title",content:"INSTRUCCIONES",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:70,objectPositionX:683,objectPositionY:180}},{type:"text",element:"instrucctions",name:"instructions",content:"Instrucciones...",style:{fontFamily:"Comfortaa",color:"#0067FF",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:800,objectHeight:350,objectPositionX:855,objectPositionY:415}}],no=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"AssistantScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.sceneData=e}}]),_createClass(n,[{key:"create",value:function(){this.generateScene(),this.getElements(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(to),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){var e="MinigamePauseMenuScene"===this.sceneData.returnSceneName?this.sceneData.idMinigame:this.sceneData.returnSceneName;this.sceneBackground=this.sceneGameObjects.get("scene-backgroud").gameObject,this.sceneBackground.setTint(0),this.instructionTitle=this.sceneGameObjects.get("instruction-title").gameObject,this.instructionTitle.setText(It[e].title),this.instructions=this.sceneGameObjects.get("instructions").gameObject,this.instructions.setText(It[e].instructions),this.closeButton=this.sceneGameObjects.get("close-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;he(this.closeButton),this.closeButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.wake(e.sceneData.returnSceneName)}))}}]),n}(),io={type:"interactiveObject",element:"button",assetName:"title-bar-background",name:"scene-title-bar",content:"ACCESO PARA MIEMBROS DE LA EPN",style:{fontFamily:"Fredoka One",color:"#FFFFFF",align:"center",fontSize:"50"},scale:v},oo={type:"html",element:"form",name:"register-form",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:342,objectPositionY:430}},ao={type:"html",element:"form",name:"login-form",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:1024,objectPositionY:420}},so={type:"restore-password-form",element:"form",name:"restore-password-form",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:0,objectHeight:0,objectPositionX:683,objectPositionY:384}},ro={player_achievements:{"badge-1":{achievement_id:"badge-1",achievement_name:"Ciencias",achievement_obtained:!1},"badge-10":{achievement_id:"badge-10",achievement_name:"Formaci\xf3n B\xe1sica",achievement_obtained:!1},"badge-2":{achievement_id:"badge-2",achievement_name:"Ciencias Administrativas",achievement_obtained:!1},"badge-3":{achievement_id:"badge-3",achievement_name:"Ingenier\xeda Civil y Ambiental",achievement_obtained:!1},"badge-4":{achievement_id:"badge-4",achievement_name:"Ingenier\xeda El\xe9ctrica y Electr\xf3nica",achievement_obtained:!1},"badge-5":{achievement_id:"badge-5",achievement_name:"Geolog\xeda y Petroleos",achievement_obtained:!1},"badge-6":{achievement_id:"badge-6",achievement_name:"Ingenier\xeda Mec\xe1nica",achievement_obtained:!1},"badge-7":{achievement_id:"badge-7",achievement_name:"Ingenier\xeda Qu\xedmica y Agroind.",achievement_obtained:!1},"badge-8":{achievement_id:"badge-8",achievement_name:"Ingenier\xeda de Sistemas",achievement_obtained:!1},"badge-9":{achievement_id:"badge-9",achievement_name:"ESFOT",achievement_obtained:!1},"bronze-trophy":{achievement_id:"bronze-trophy",achievement_name:"POLIB\xdaHO DE BRONCE",achievement_obtained:!1},"gold-trophy":{achievement_id:"gold-trophy",achievement_name:"POLIB\xdaHO DE ORO",achievement_obtained:!1},"silver-trophy":{achievement_id:"silver-trophy",achievement_name:"POLIB\xdaHO DE PLATA",achievement_obtained:!1},treasure:{achievement_id:"treasure",achievement_name:"SOY UN POLIT\xc9CNICO",achievement_obtained:!1}},player_areas:{"area-2":{area_id:"area-2",area_locations:{"hide-location":{location_id:"hide-location",location_name:"Polimapa",location_score:0,location_starsNumber:0},"location-1":{location_id:"location-1",location_name:"Entrada EPN",location_score:0,location_starsNumber:0},"location-2":{location_id:"location-2",location_name:"Museo EPN",location_score:0,location_starsNumber:0},"location-3":{location_id:"location-3",location_name:"Teatro",location_score:0,location_starsNumber:0},"location-4":{location_id:"location-4",location_name:"Hemiciclo",location_score:0,location_starsNumber:0},"location-5":{location_id:"location-5",location_name:"Biblioteca General",location_score:0,location_starsNumber:0},"location-6":{location_id:"location-6",location_name:"Vicerrectorado",location_score:0,location_starsNumber:0},"location-7":{location_id:"location-7",location_name:"Rectorado",location_score:0,location_starsNumber:0},"location-8":{location_id:"location-8",location_name:"Concejo Polit\xe9cnico",location_score:0,location_starsNumber:0},"location-9":{location_id:"location-9",location_name:"DGIP",location_score:0,location_starsNumber:0}},area_name:"Zona Administrativa",area_score:0,area_starsNumber:0}},player_powerUps:{"poliburger-powerup":{powerup_id:"poliburger-powerup",powerup_name:"POLIBURGUER",powerups_number:0},"polibus-powerup":{powerup_id:"polibus-powerup",powerup_name:"POLIBUS",powerups_number:0},"policuaderno-powerup":{powerup_id:"policuaderno-powerup",powerup_name:"POLICUADERNO",powerups_number:0},"polifiesta-powerup":{powerup_id:"polifiesta-powerup",powerup_name:"POLIFIESTA",powerups_number:0},"poliperro-powerup":{powerup_id:"poliperro-powerup",powerup_name:"POLIPERRO",powerups_number:0}},player_avatarId:"boy-avatar",player_id:"new-player",player_name:"nombre",player_lastName:"apellido",player_emailAddress:"nombre.apellido@epn.edu.ec",player_memberOf:"epn",player_relationshipEpn:"polit\xe9cnico",player_totalScore:0},co={type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1366,objectHeight:768,objectPositionX:683,objectPositionY:384}},uo=function(e){_inherits(n,Phaser.GameObjects.Container);var t=_createSuper(n);function n(e,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,i.scale.objectPositionX,i.scale.objectPositionY)).scene=e,o.restorePasswordSpecifications=i,o.generateComponent(),o}return _createClass(n,[{key:"generateComponent",value:function(){var e=JSON.parse(JSON.stringify(co));e.scale=R(this.scene,e.scale),this.restorePasswordBackground=A(this.scene,e),this.restorePasswordBackground.setTint(0),this.restorePasswordBackground.setPosition(0,0),this.add(this.restorePasswordBackground),this.setPosition(e.scale.objectPositionX,e.scale.objectPositionY),this.setSize(e.scale.objectWidth,e.scale.objectHeight),this.restorePasswordForm=me(this.scene,this.restorePasswordSpecifications,.55*this.scene.cameras.main.width),this.restorePasswordForm.setPosition(0,0),this.add(this.restorePasswordForm),this.setVisible(!1)}},{key:"activateComponent",value:function(e,t,n){var i=this;this.setDepth(1),this.setVisible(!0);var o=this.restorePasswordForm.getChildByID("restore-password-form"),a=this.restorePasswordForm.getChildByID("restore-email"),s=this.restorePasswordForm.getChildByID("cancel-restore-button"),r=this.restorePasswordForm.getChildByID("send-button"),c=this.restorePasswordForm.getChildByID("input-contenedor"),u=this.restorePasswordForm.getChildByID("label-message"),l=this.restorePasswordForm.getChildByID("password-restore-note"),h=this.restorePasswordForm.getChildByID("password-restore-form-note"),d=!1;s.onclick=function(){d=!0,null!==n&&n.setVisible(!0),null!==e&&e.setVisible(!0),null!==t&&t.setVisible(!0),setTimeout((function(){i.destroy()}),1)},o.onsubmit=function(e){e.preventDefault(),d||p.firebaseApp.auth().sendPasswordResetEmail(a.value).then((function(){l.style.visibility="hidden",l.style.margin="0px",h.style.padding="0px",h.style.fontSize="0px",r.style.display="none",c.style.display="none",u.innerText="El enlace de actualizaci\xf3n de contrase\xf1a fue enviado a: \n"+a.value+".\n\nSi no has recibido el enlace de recuperaci\xf3n\nrevisa la carpeta de SPAM o vuele a reenviarlo.",s.className="send-button",s.innerText="Continuar"})).catch((function(e){var t="Se produjo un error intenta de nuevo";"auth/user-not-found"==e.code&&(t="El correo electr\xf3nico que has introducido no coincide con ninguna cuenta, corr\xedgelo e intenta nuevamente"),h.innerHTML=t,l.style.visibility="visible"}))}}}]),n}(),lo=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,{key:"GameAccessScene"})}return _createClass(n,[{key:"init",value:function(){m.currentScene=this.scene.key}}]),_createClass(n,[{key:"create",value:function(){var e=new Ce(this);this.titleBar=e.generateGameObject(io),e.addGameObject(this.titleBar),this.returnButton=e.generateGameObject(I),e.addGameObject(this.returnButton);var t=JSON.parse(JSON.stringify(oo));t.scale=R(this,t.scale),this.registerElement=me(this,t,.45*this.cameras.main.width);var n=JSON.parse(JSON.stringify(ao));n.scale=R(this,n.scale),this.loginElement=me(this,n,.45*this.cameras.main.width),h.scene=this,h.returnButton=this.returnButton,h.registerElement=this.registerElement,h.loginElement=this.loginElement,this.addFuncionality()}},{key:"addFuncionality",value:function(){this.addRegisterFuncionality(),this.addLoginFuncionality()}},{key:"addRegisterFuncionality",value:function(){var e=this.registerElement.getChildByID("register-first-name"),t=this.registerElement.getChildByID("register-last-name"),n=this.registerElement.getChildByID("register-email"),i=this.registerElement.getChildByID("register-password"),o=this.registerElement.getChildByID("register-password-confirmed"),a=this.registerElement.getChildByID("register-memberOf"),s=this.registerElement.getChildByID("register-relationshipEpn"),r=this.registerElement.getChildByID("register-form-note"),c=this.registerElement.getChildByID("register-note");o.onkeyup=function(){o.setCustomValidity(o.value===i.value?"":"El password debe ser el mismo al anterior")},this.registerElement.getChildByID("register-form").onsubmit=function(i){i.preventDefault(),m.accessType="register",p.firebaseApp.auth().createUserWithEmailAndPassword(n.value,o.value).then((function(i){ro.player_id=i.user.uid,ro.player_name=e.value,ro.player_lastName=t.value,ro.player_emailAddress=n.value,ro.player_memberOf=a.value,ro.player_relationshipEpn=s.value,p.firebaseApp.database().ref("players/"+i.user.uid).set(ro),m.accessType="register";var o={player_id:i.user.uid,player_name:e.value+" "+t.value,player_memberOf:a.value,player_relationshipEpn:s.value,player_totalScore:0};p.firebaseApp.database().ref("score_table/"+i.user.uid).set(o)})).catch((function(e){var t="Se produjo un error en el registro, intenta nuevamente.";"auth/email-already-in-use"==e.code&&(t="El correo ingresado pertenece a una cuenta ya registrada, c\xe1mbialo o inicia sesi\xf3n con esa cuenta."),r.innerHTML=t,c.style.visibility="visible"}))}}},{key:"addLoginFuncionality",value:function(){var e=this;le(this.returnButton),this.returnButton.setInteractive().on("pointerdown",(function(){h.returnButton=null,h.registerElement=null,h.loginElement=null,e.scene.stop(e.scene.key),e.scene.start("StartScene")}));var t=this.loginElement.getChildByID("login-email"),n=this.loginElement.getChildByID("login-password"),i=this.loginElement.getChildByID("login-form"),o=this.loginElement.getChildByID("restore-password"),a=this.loginElement.getChildByID("login-note"),s=this.loginElement.getChildByID("login-form-note");o.onclick=function(){var t=new uo(e,so);e.add.existing(t),e.returnButton.setVisible(!1),e.registerElement.setVisible(!1),e.loginElement.setVisible(!1),t.activateComponent(e.registerElement,e.loginElement,e.returnButton)},i.onsubmit=function(e){e.preventDefault(),p.firebaseApp.auth().signInWithEmailAndPassword(t.value,n.value).catch((function(e){var t="Se produjo un error al inicar sesi\xf3n, intenta nuevamente.";"auth/wrong-password"==e.code&&(t="Correo o contrase\xf1a son incorrectos, corr\xedgelos e intenta nuevamente."),"auth/too-many-requests"==e.code&&(t="Has intendado iniciar sesi\xf3n sin exito muchas veces.\nTu cuenta se bloquear\xe1 temporalmente, intentalo m\xe1s tarde."),"auth/user-not-found"==e.code&&(t="El correo electr\xf3nico que has introducido no coincide con ninguna cuenta, c\xe1mbialo o registrate para crear una cuenta."),s.innerHTML=t,a.style.visibility="visible"}))}}}]),n}(),ho=[{type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:y},{type:"image",element:"background",assetName:"panel-card-background",name:"settings-menu-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1066,objectHeight:600,objectPositionX:683,objectPositionY:384}},N,{type:"text",element:"title",name:"scene-title",content:"AJUSTES DEL JUEGO",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:70,objectPositionX:683,objectPositionY:154}},{type:"text",element:"title",name:"sound-title",content:"SONIDO DEL JUEGO",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:60,objectPositionX:683,objectPositionY:241}},{type:"image",element:"icon",assetName:"on-switch-icon-background",name:"sound-switch",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:200,objectHeight:70,objectPositionX:668,objectPositionY:340}},{type:"text",element:"label",name:"off-sound-title",content:"APAGADO",style:{fontFamily:"Fredoka One",color:"#9A5BD7",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:170,objectHeight:50,objectPositionX:475,objectPositionY:340}},{type:"text",element:"label",name:"on-sound-title",content:"ENCENDIDO",style:{fontFamily:"Fredoka One",color:"#9A5BD7",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:170,objectHeight:50,objectPositionX:885,objectPositionY:340}},{type:"text",element:"title",name:"gamepad-title",content:"CONTROL DEL MUNDO VIRTUAL",style:{fontFamily:"Fredoka One",color:"#3F017E",align:"center",fontSize:"35"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:60,objectPositionX:683,objectPositionY:445}},{type:"image",element:"icon",assetName:"check-icon-background",name:"keyboard-check",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:70,objectPositionX:416,objectPositionY:530}},{type:"image",element:"icon",assetName:"blank-check-icon-background",name:"gamepad-check",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:70,objectPositionX:944,objectPositionY:530}},{type:"text",element:"label",name:"keyboard-subtitle",content:"TECLADO Y MOUSE",style:{fontFamily:"Fredoka One",color:"#9A5BD7",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:50,objectPositionX:416,objectPositionY:592}},{type:"text",element:"label",name:"gamepad-subtitle",content:"MANDO EN PANTALLA",style:{fontFamily:"Fredoka One",color:"#9A5BD7",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:400,objectHeight:50,objectPositionX:944,objectPositionY:592}},{type:"interactiveObject",element:"simple-button",assetName:"continue-button-background",name:"save-settings-button",content:"GUARDAR AJUSTES",style:{fontFamily:"Fredoka One",color:"#008514",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:410,objectHeight:75,objectPositionX:683,objectPositionY:684}}],po=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"SettingsScene"})).settingsStatus={soundStatus:!1,showGamepad:!1},e.gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.sceneData=e}},{key:"create",value:function(){this.generateScene(),this.getElements(),this.settingsStatus={soundStatus:this.game.sound.mute,showGamepad:m.showGamepad},this.settingsStatus.soundStatus?this.offSwitchIcon():this.onSwitchIcon(),this.updateCheckStatus(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(ho),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.sceneBackground=this.sceneGameObjects.get("scene-backgroud").gameObject,this.sceneBackground.setTint(0),this.closeButton=this.sceneGameObjects.get("close-button").gameObject,this.soundSwitchButton=this.sceneGameObjects.get("sound-switch").gameObject,this.keyboardCheckIcon=this.sceneGameObjects.get("keyboard-check").gameObject,this.gamepadCheckIcon=this.sceneGameObjects.get("gamepad-check").gameObject,this.keyboardText=this.sceneGameObjects.get("keyboard-subtitle").gameObject,this.gamepadText=this.sceneGameObjects.get("gamepad-subtitle").gameObject,this.saveSettingsButtons=this.sceneGameObjects.get("save-settings-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;he(this.closeButton),this.closeButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.wake(e.sceneData.returnSceneName)})),le(this.saveSettingsButtons),this.saveSettingsButtons.setInteractive().on("pointerdown",(function(){m.showGamepad=e.settingsStatus.showGamepad,m.isMusicPlaying||e.settingsStatus.soundStatus||(m.gameMusic.play({loop:!0}),m.isMusicPlaying=!0),m.isSoundMuted=e.settingsStatus.soundStatus,e.game.sound.mute=e.settingsStatus.soundStatus,e.scene.stop(e.scene.key),e.scene.wake(e.sceneData.returnSceneName)})),this.soundSwitchButton.setInteractive().on("pointerdown",(function(){e.settingsStatus.soundStatus=!e.settingsStatus.soundStatus,e.settingsStatus.soundStatus?e.offSwitchIcon():e.onSwitchIcon()})),Pe(this.keyboardCheckIcon),this.keyboardCheckIcon.setInteractive().on("pointerdown",(function(){e.settingsStatus.showGamepad=!1,e.keyboardCheckIcon.setTexture("check-icon-background"),e.gamepadCheckIcon.setTexture("blank-check-icon-background"),e.gamepadText.style.setColor("#9A5BD7"),e.keyboardText.style.setColor("#6C31AA")})),Pe(this.gamepadCheckIcon),this.gamepadCheckIcon.setInteractive().on("pointerdown",(function(){e.settingsStatus.showGamepad=!0,e.gamepadCheckIcon.setTexture("check-icon-background"),e.keyboardCheckIcon.setTexture("blank-check-icon-background"),e.keyboardText.style.setColor("#9A5BD7"),e.gamepadText.style.setColor("#6C31AA")}))}},{key:"updateCheckStatus",value:function(){m.showGamepad?(this.keyboardCheckIcon.setTexture("blank-check-icon-background"),this.gamepadCheckIcon.setTexture("check-icon-background"),this.keyboardText.style.setColor("#9A5BD7"),this.gamepadText.style.setColor("#6C31AA")):(this.keyboardCheckIcon.setTexture("check-icon-background"),this.gamepadCheckIcon.setTexture("blank-check-icon-background"),this.gamepadText.style.setColor("#9A5BD7"),this.keyboardText.style.setColor("#6C31AA"))}},{key:"offSwitchIcon",value:function(){var e=this.sceneGameObjects.get("on-sound-title").gameObject,t=this.sceneGameObjects.get("off-sound-title").gameObject;this.soundSwitchButton.setTexture("off-switch-icon-background"),e.style.setColor("#9A5BD7"),t.style.setColor("#6C31AA")}},{key:"onSwitchIcon",value:function(){var e=this.sceneGameObjects.get("on-sound-title").gameObject,t=this.sceneGameObjects.get("off-sound-title").gameObject;this.soundSwitchButton.setTexture("on-switch-icon-background"),t.style.setColor("#9A5BD7"),e.style.setColor("#6C31AA")}}]),n}(),mo=[{type:"image",element:"background",assetName:"modal-scene-background",name:"scene-backgroud",scale:y},{type:"image",element:"background",assetName:"panel-card-background",name:"settings-menu-backgroud",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1066,objectHeight:600,objectPositionX:683,objectPositionY:384}},N,{type:"text",element:"title",name:"scene-title",content:"INFORMACI\xd3N",style:{fontFamily:"Fredoka One",color:"#0067FF",align:"center",fontSize:"50"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:720,objectHeight:70,objectPositionX:683,objectPositionY:150}},{type:"text",element:"title",name:"game-info",content:"El Tesoro de Ser Polit\xe9cnico es un Juego Serio creado con el objetivo de fomentar los principios \xe9ticos e historia de la Escuela Polit\xe9cnica Nacional (EPN), de una manera divertida.",style:{fontFamily:"Comfortaa",color:"#0067FF",align:"center",fontSize:"33"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1e3,objectHeight:174,objectPositionX:683,objectPositionY:255}},{type:"image",element:"background",assetName:"info-horizontal-line-large-background",name:"fisrt-horizontal-line",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1e3,objectHeight:3,objectPositionX:683,objectPositionY:345}},{type:"image",element:"logo",assetName:"third-logo-background",name:"third-logo",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:270,objectHeight:110,objectPositionX:345,objectPositionY:435}},{type:"text",element:"paragraph",name:"manager-info",content:"DIRECTORES DEL PROYECTO\nPhD. Marco Santorum - marco.santorum@epn.edu.ec\nMSc. Mayra Carri\xf3n - mayra.carrion@epn.edu.ec",style:{fontFamily:"Comfortaa",color:"#0067FF",align:"center",strokeThickness:1,stroke:"#0067FF",fontSize:"26px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:700,objectHeight:150,objectPositionX:825,objectPositionY:435}},{type:"image",element:"background",assetName:"info-horizontal-line-large-background",name:"second-horizontal-line",scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:1e3,objectHeight:3,objectPositionX:683,objectPositionY:530}},{type:"text",element:"paragraph",name:"developer-info",content:"DISE\xd1O Y DESAROLLO\nJonathan Paul Caiza LLumitaxi - jpaul.snp@gmail.com",style:{fontFamily:"Comfortaa",color:"#0067FF",align:"center",strokeThickness:1,stroke:"#0067FF",fontSize:"26px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:800,objectHeight:120,objectPositionX:683,objectPositionY:590}}],go=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"InfoScene"})).gameScene=new Ce(_assertThisInitialized(e)),e.sceneGameObjects=new Map,e}return _createClass(n,[{key:"init",value:function(e){this.sceneData=e}}]),_createClass(n,[{key:"create",value:function(){this.generateScene(),this.getElements(),this.addFunctionality()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),this.gameScene.generateGameObjects(mo),this.gameScene.loadGameObjects(),this.sceneGameObjects=this.gameScene.getGameObjects}},{key:"getElements",value:function(){this.sceneBackground=this.sceneGameObjects.get("scene-backgroud").gameObject,this.sceneBackground.setTint(0),this.closeButton=this.sceneGameObjects.get("close-button").gameObject}},{key:"addFunctionality",value:function(){var e=this;he(this.closeButton),this.closeButton.setInteractive().on("pointerdown",(function(){e.scene.stop(e.scene.key),e.scene.wake(e.sceneData.returnSceneName)}))}}]),n}(),fo={type:"video",element:"scene-video",assetName:"modal-scene-background",name:"scene-backgroud",scale:y},bo={type:"interactiveObject",element:"bottom-title-button",assetName:"on-sound-icon-background",name:"sound-button",content:"SONIDO",style:{fontFamily:"Fredoka One",color:"#000000",align:"center",stroke:"#FFFFFF",strokeThickness:10,fontSize:"25"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:100,objectHeight:110,objectPositionX:1270,objectPositionY:582}},yo={type:"interactiveObject",element:"simple-button",assetName:"sign-out-button-background",name:"skip-video-button",content:"SALTAR",style:{fontFamily:"Fredoka One",color:"#DF0013",align:"center",fontSize:"30px"},scale:{objectWidthRatio:1,objectHeightRatio:1,objectWidth:200,objectHeight:58,objectPositionX:1220,objectPositionY:698}},vo=function(e){_inherits(n,Phaser.Scene);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,{key:"MapVideoScene"})).gameScene=new Ce(_assertThisInitialized(e)),e}return _createClass(n,[{key:"init",value:function(e){this.gameData=e}}]),_createClass(n,[{key:"create",value:function(){m.gameMusic.pause(),this.generateScene(),this.addFunctionality(),this.soundButton.getByName("button-Background").setTexture(m.isSoundMuted?"off-sound-icon-background":"on-sound-icon-background")}},{key:"update",value:function(){this.sceneVideo.isPlaying()||null==this.sceneVideo||this.playVideo()}},{key:"generateScene",value:function(){this.gameScene=new Ce(this),fo.assetName=this.gameData.locationData.areaId+"-video",this.sceneVideo=this.gameScene.generateGameObject(fo),this.gameScene.addGameObject(this.sceneVideo),this.skipButton=this.gameScene.generateGameObject(yo),this.gameScene.addGameObject(this.skipButton),this.soundButton=this.gameScene.generateGameObject(bo),this.gameScene.addGameObject(this.soundButton)}},{key:"playVideo",value:function(){var e=this;this.sceneVideo.play(),this.sceneVideo.once("play",(function(){m.isSoundMuted?(e.sceneVideo.setMute(!0),e.sceneVideo.setVolume(0)):(e.sceneVideo.setMute(!1),e.sceneVideo.setVolume(1))}))}},{key:"addFunctionality",value:function(){var e=this;this.playVideo(),this.sceneVideo.on("complete",(function(){e.endSceneVideo()})),le(this.skipButton),this.skipButton.setInteractive().on("pointerdown",(function(){e.sceneVideo.stop(),e.endSceneVideo()})),le(this.soundButton),this.soundButton.setInteractive().on("pointerdown",(function(){e.switchVideSceneoSoundStatus()}))}},{key:"switchVideSceneoSoundStatus",value:function(){var e=this.soundButton.getByName("button-Background");this.sceneVideo.isMuted()?(this.sceneVideo.setMute(!1),this.sceneVideo.setVolume(1),m.isSoundMuted=!1,e.setTexture("on-sound-icon-background")):(this.sceneVideo.setMute(!0),this.sceneVideo.setVolume(0),m.isSoundMuted=!0,e.setTexture("off-sound-icon-background"))}},{key:"endSceneVideo",value:function(){this.game.sound.mute=m.isSoundMuted,m.gameMusic.play(),this.scene.stop(this.scene.key),this.scene.start("MapAreaScene",this.gameData)}}]),n}(),_o={physics:{default:"matter",matter:{gravity:{y:0}}},backgroundColor:"#fff",parent:"phaser_game",type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:window.innerWidth/window.innerHeight>21/9?1366:window.innerWidth/window.innerHeight>=1.6&&window.innerWidth/window.innerHeight<=21/9?window.innerWidth>1440?1440:window.innerWidth<1024?1366:window.innerWidth:window.innerWidth/window.innerHeight>4/3&&window.innerWidth/window.innerHeight<1.6?1366:window.innerWidth/window.innerHeight>=1&&window.innerWidth/window.innerHeight<=4/3?1024:1366,height:window.innerWidth/window.innerHeight>21/9?761:window.innerWidth/window.innerHeight>=1.6&&window.innerWidth/window.innerHeight<=21/9?window.innerHeight>800||window.innerHeight<655?761:window.innerHeight:window.innerWidth/window.innerHeight>4/3&&window.innerWidth/window.innerHeight<1.6?761:window.innerWidth/window.innerHeight>=1&&window.innerWidth/window.innerHeight<=4/3?720:761},render:{antialias:!0},scene:[Yi,Fe,Vi,Qi,De,lo,$i,kt,vo,_t,tn,Pt,Xt,Ct,Ye,Ke,ut,ot,ht,Je,Jt,Rt,xt,Ht,eo,po,go,no],title:"TESORO POLITECNICO",input:{keyboard:{target:window}},dom:{createContainer:!0},audio:{disableWebAudio:!0}};function wo(e){return function(){document.querySelector("canvas")&&(m.isDeviceMobile=c())}}var ko=function(){function e(){_classCallCheck(this,e),this.startGame()}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),_createClass(e,[{key:"startGame",value:function(){var e=this;setTimeout((function(){e.game=new Phaser.Game(_o),e.resizeGame()}),1)}},{key:"resizeGame",value:function(){document.oncontextmenu=function(){return!0},setTimeout((function(){wo()(),window.addEventListener("resize",wo(),!1)}),1)}}]),e}(),jo=i.xb({encapsulation:0,styles:[[""]],data:{}});function So(e){return i.Nb(0,[(e()(),i.zb(0,0,null,null,2,"ion-content",[],null,null,null,s.d,s.b)),i.yb(1,49152,null,0,r.r,[i.j,i.p,i.F],null,null),(e()(),i.zb(2,0,null,0,0,"div",[["id","phaser_game"],["style","background: black;"]],null,null,null,null,null))],null,null)}var Oo=i.vb("app-home",ko,(function(e){return i.Nb(0,[(e()(),i.zb(0,0,null,null,1,"app-home",[],null,null,null,So,jo)),i.yb(1,114688,null,0,ko,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),Po=n("SVse"),Eo=n("s7LF"),Io=n("iInd");n.d(t,"HomePageModuleNgFactory",(function(){return Co}));var Co=i.wb(o,[],(function(e){return i.Hb([i.Ib(512,i.m,i.ib,[[8,[a.a,Oo]],[3,i.m],i.D]),i.Ib(4608,Po.i,Po.h,[i.z,[2,Po.o]]),i.Ib(4608,Eo.d,Eo.d,[]),i.Ib(4608,r.a,r.a,[i.F,i.g]),i.Ib(4608,r.Db,r.Db,[r.a,i.m,i.w]),i.Ib(4608,r.Gb,r.Gb,[r.a,i.m,i.w]),i.Ib(1073742336,Po.b,Po.b,[]),i.Ib(1073742336,Eo.c,Eo.c,[]),i.Ib(1073742336,Eo.a,Eo.a,[]),i.Ib(1073742336,r.Bb,r.Bb,[]),i.Ib(1073742336,Io.o,Io.o,[[2,Io.t],[2,Io.m]]),i.Ib(1073742336,o,o,[]),i.Ib(1024,Io.k,(function(){return[[{path:"",component:ko}]]}),[])])}))},LOEa:function(e,t,n){(function(){var e,t=n("wj3C").default,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}return globalThis}(this);function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function s(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}!function(e,t){if(t){var n=o;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];s in n||(n[s]={}),n=n[s]}(t=t(a=n[e=e[e.length-1]]))!=a&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=o.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(i){this.f(i)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.w(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)r.b(this.a[e]);this.a=null}};var r=new n;return t.prototype.s=function(e){var t=this.f();e.Oa(t.resolve,t.reject)},t.prototype.w=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(i){n.reject(i)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{o(e(t))}catch(n){a(n)}}:t}var o,a,s=new t((function(e,t){o=e,a=t}));return this.Oa(i(e,o),i(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Oa=function(e,t){function n(){switch(i.b){case 1:e(i.c);break;case 2:t(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?r.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var o=s(e),a=o.next();!a.done;a=o.next())i(a.value).Oa(t,n)}))},t.all=function(e){var n=s(e),o=n.next();return o.done?i([]):new t((function(e,t){function a(t){return function(n){s[t]=n,0==--r&&e(s)}}var s=[],r=0;do{s.push(void 0),r++,i(o.value).Oa(a(s.length-1),t),o=n.next()}while(!o.done)}))},t}));var r=r||{},c=this||self,u=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==d(e)}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function f(e){return Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++y)}var b="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:_).apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var j=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.Za=t.prototype,e.prototype=new n,e.prototype.constructor=e}function O(e,t,n){this.code=I+e,this.message=t||C[e]||"",this.a=n||null}function P(e){var t=e&&e.code;return t?new O(t.substring(I.length),e.message,e.serverResponse):null}S(O,Error),O.prototype.v=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},O.prototype.toJSON=function(){return this.v()};var E,I="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function T(e){for(var t in N)if(N[t].id===e)return{firebaseEndpoint:(e=N[t]).Ra,secureTokenEndpoint:e.Xa,identityPlatformEndpoint:e.Ua};return null}function R(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function F(e){if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function A(e,t){for(var n="",i=(e=e.split("%s")).length-1,o=0;o<i;o++)n+=e[o]+(o<t.length?t[o]:"%s");F.call(this,n+e[i])}function D(e,t){throw new A("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function x(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function B(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function H(){this.b=this.a=null}E=T("__EID__")?"__EID__":void 0,S(F,Error),F.prototype.name="CustomError",S(A,F),A.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var W=new x((function(){return new L}),(function(e){e.reset()}));function M(){var e=bt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function L(){this.next=this.b=this.a=null}H.prototype.add=function(e,t){var n=W.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},L.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},L.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},G=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,o="string"==typeof e?e.split(""):e,a=0;a<i;a++)a in o&&t.call(n,o[a],a,e)},U=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=[],o=0,a="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in a){var r=a[s];t.call(void 0,r,s,e)&&(i[o++]=r)}return i},z=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),o="string"==typeof e?e.split(""):e,a=0;a<n;a++)a in o&&(i[a]=t.call(void 0,o[a],a,e));return i},Y=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i="string"==typeof e?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(void 0,i[o],o,e))return!0;return!1};function X(e,t){return 0<=q(e,t)}function V(e,t){var n;return(n=0<=(t=q(e,t)))&&Array.prototype.splice.call(e,t,1),n}function J(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,i=e.length-1;0<=i;--i)i in n&&t.call(void 0,n[i],i,e)}(e,(function(n,i){t.call(void 0,n,i,e)&&Array.prototype.splice.call(e,i,1)}))}function Q(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}var $,Z=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ee=/&/g,te=/</g,ne=/>/g,ie=/"/g,oe=/'/g,ae=/\x00/g,se=/[\x00&<>"']/;function re(e,t){return-1!=e.indexOf(t)}function ce(e,t){return e<t?-1:e>t?1:0}e:{var ue=c.navigator;if(ue){var le=ue.userAgent;if(le){$=le;break e}}$=""}function he(e){return re($,e)}function de(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function pe(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(e,t){for(var n,i,o=1;o<arguments.length;o++){for(n in i=arguments[o])e[n]=i[n];for(var a=0;a<ge.length;a++)n=ge[a],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function be(e,t){e:{try{var n=e&&e.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||c).Element&&i.Location){var o=i;break e}}catch(s){}o=null}if(o&&void 0!==o[t]&&(!e||!(e instanceof o[t])&&(e instanceof o.Location||e instanceof o.Element))){if(g(e))try{var a=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(s){a="<object could not be stringified>"}else a=void 0===e?"undefined":null===e?"null":typeof e;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,a)}}function ye(e,t){this.a=e===we&&t||"",this.b=_e}function ve(e){return e instanceof ye&&e.constructor===ye&&e.b===_e?e.a:(D("expected object of type Const, got '"+e+"'"),"type_error:Const")}ye.prototype.ra=!0,ye.prototype.qa=function(){return this.a},ye.prototype.toString=function(){return"Const{"+this.a+"}"};var _e={},we={},ke=new ye(we,"");function je(e,t){this.a=e===Ce&&t||"",this.b=Ie}function Se(e){return e instanceof je&&e.constructor===je&&e.b===Ie?e.a:(D("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function Oe(e,t){var n=ve(e);if(!Ee.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Pe,(function(e,i){if(!Object.prototype.hasOwnProperty.call(t,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[i])instanceof ye?ve(e):encodeURIComponent(String(e))})),new je(Ce,e)}je.prototype.ra=!0,je.prototype.qa=function(){return this.a.toString()},je.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Pe=/%{(\w+)}/g,Ee=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ie={},Ce={};function Ne(e,t){this.a=e===De&&t||"",this.b=Ae}function Te(e){return e instanceof Ne&&e.constructor===Ne&&e.b===Ae?e.a:(D("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}Ne.prototype.ra=!0,Ne.prototype.qa=function(){return this.a.toString()},Ne.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Re=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Fe(e){return e instanceof Ne?e:(e="object"==typeof e&&e.ra?e.qa():String(e),Re.test(e)||(e="about:invalid#zClosurez"),new Ne(De,e))}var Ae={},De={};function xe(){this.a="",this.b=He}function Be(e){return e instanceof xe&&e.constructor===xe&&e.b===He?e.a:(D("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}xe.prototype.ra=!0,xe.prototype.qa=function(){return this.a.toString()},xe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var He={};function We(e){var t=new xe;return t.a=e,t}We("<!DOCTYPE html>");var Me=We("");function Le(e,t){for(var n=e.split("%s"),i="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)i+=n.shift()+o.shift();return i+n.join("%s")}function qe(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ee,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(te,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ne,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ae,"&#0;"))),e}function Ge(e){return Ge[" "](e),e}We("<br>"),Ge[" "]=h;var Ue,ze,Ye=he("Opera"),Xe=he("Trident")||he("MSIE"),Ve=he("Edge"),Je=Ve||Xe,Qe=he("Gecko")&&!(re($.toLowerCase(),"webkit")&&!he("Edge"))&&!(he("Trident")||he("MSIE"))&&!he("Edge"),Ke=re($.toLowerCase(),"webkit")&&!he("Edge");function $e(){var e=c.document;return e?e.documentMode:void 0}e:{var Ze="",et=(ze=$,Qe?/rv:([^\);]+)(\)|;)/.exec(ze):Ve?/Edge\/([\d\.]+)/.exec(ze):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ze):Ke?/WebKit\/(\S+)/.exec(ze):Ye?/(?:Version)[ \/]?(\S+)/.exec(ze):void 0);if(et&&(Ze=et?et[1]:""),Xe){var tt=$e();if(null!=tt&&tt>parseFloat(Ze)){Ue=String(tt);break e}}Ue=Ze}var nt,it={};function ot(e){return function(e,t){var n=it;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=Z(String(Ue)).split("."),i=Z(String(e)).split("."),o=Math.max(n.length,i.length),a=0;0==t&&a<o;a++){var s=n[a]||"",r=i[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;t=ce(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||ce(0==s[2].length,0==r[2].length)||ce(s[2],r[2]),s=s[3],r=r[3]}while(0==t)}return 0<=t}))}nt=c.document&&Xe?$e():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ze){}var at=!Xe||9<=Number(nt);function st(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function rt(e,t){de(t,(function(t,n){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:lt.hasOwnProperty(n)?e.setAttribute(lt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ct,ut,lt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ht(e,t,n){function i(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!p(a)||g(a)&&0<a.nodeType?i(a):G(pt(a)?K(a):a,i)}}function dt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function pt(e){if(e&&"number"==typeof e.length){if(g(e))return"function"==typeof e.item||"string"==typeof e.item;if(m(e))return"function"==typeof e.item}return!1}function mt(e){c.setTimeout((function(){throw e}),0)}function gt(e,t){ut||function(){if(c.Promise&&c.Promise.resolve){var e=c.Promise.resolve(void 0);ut=function(){e.then(yt)}}else ut=function(){var e=yt;!m(c.setImmediate)||c.Window&&c.Window.prototype&&!he("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(ct||(ct=function(){var e=c.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!he("Presto")&&(e=function(){var e=dt(document,"IFRAME");e.style.display="none",function(e){var t=new je(Ce,ve(ke));be(e,"HTMLIFrameElement"),e.src=Se(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Be(Me)),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=w((function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),void 0!==e&&!he("Trident")&&!he("MSIE")){var t=new e,n={},i=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Db;n.Db=null,e()}},function(e){i.next={Db:e},i=i.next,t.port2.postMessage(0)}}return function(e){c.setTimeout(e,0)}}()),ct(e)):c.setImmediate(e)}}(),ft||(ut(),ft=!0),bt.add(e,t)}var ft=!1,bt=new H;function yt(){for(var e;e=M();){try{e.a.call(e.b)}catch(t){mt(t)}B(W,e)}ft=!1}function vt(e,t){if(this.a=_t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){Rt(n,wt,e)}),(function(e){if(!(e instanceof Wt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Rt(n,kt,e)}))}catch(i){Rt(this,kt,i)}}var _t=0,wt=2,kt=3;function jt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}jt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var St=new x((function(){return new jt}),(function(e){e.reset()}));function Ot(e,t,n){var i=St.get();return i.g=e,i.b=t,i.f=n,i}function Pt(e){if(e instanceof vt)return e;var t=new vt(h);return Rt(t,wt,e),t}function Et(e){return new vt((function(t,n){n(e)}))}function It(e,t,n){Ft(e,t,n,null)||gt(k(t,e))}function Ct(e){return new vt((function(t){var n=e.length,i=[];if(n)for(var o=function(e,o,a){n--,i[e]=o?{Mb:!0,value:a}:{Mb:!1,reason:a},0==n&&t(i)},a=0;a<e.length;a++)It(e[a],k(o,a,!0),k(o,a,!1));else t(i)}))}function Nt(e,t){e.b||e.a!=wt&&e.a!=kt||At(e),e.f?e.f.next=t:e.b=t,e.f=t}function Tt(e,t,n,i){var o=Ot(null,null,null);return o.a=new vt((function(e,a){o.g=t?function(n){try{var o=t.call(i,n);e(o)}catch(s){a(s)}}:e,o.b=n?function(t){try{var o=n.call(i,t);void 0===o&&t instanceof Wt?a(t):e(o)}catch(s){a(s)}}:a})),o.a.c=e,Nt(e,o),o.a}function Rt(e,t,n){e.a==_t&&(e===n&&(t=kt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ft(n,e.Yc,e.Zc,e)||(e.i=n,e.a=t,e.c=null,At(e),t!=kt||n instanceof Wt||function(e,t){e.g=!0,gt((function(){e.g&&Ht.call(null,t)}))}(e,n)))}function Ft(e,t,n,i){if(e instanceof vt)return Nt(e,Ot(t||h,n||null,i)),!0;if(R(e))return e.then(t,n,i),!0;if(g(e))try{var o=e.then;if(m(o))return function(e,t,n,i,o){function a(e){s||(s=!0,i.call(o,e))}var s=!1;try{t.call(e,(function(e){s||(s=!0,n.call(o,e))}),a)}catch(r){a(r)}}(e,o,t,n,i),!0}catch(a){return n.call(i,a),!0}return!1}function At(e){e.h||(e.h=!0,gt(e.ec,e))}function Dt(e){var t=null;return e.b&&(e.b=(t=e.b).next,t.next=null),e.b||(e.f=null),t}function xt(e,t,n,i){if(n==kt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Bt(t,n,i);else try{t.c?t.g.call(t.f):Bt(t,n,i)}catch(o){Ht.call(null,o)}B(St,t)}function Bt(e,t,n){t==wt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}vt.prototype.then=function(e,t,n){return Tt(this,m(e)?e:null,m(t)?t:null,n)},vt.prototype.$goog_Thenable=!0,(e=vt.prototype).ma=function(e,t){return(e=Ot(e,e,t)).c=!0,Nt(this,e),this},e.o=function(e,t){return Tt(this,null,e,t)},e.cancel=function(e){if(this.a==_t){var t=new Wt(e);gt((function(){!function e(t,n){if(t.a==_t)if(t.c){var i=t.c;if(i.b){for(var o=0,a=null,s=null,r=i.b;r&&(r.c||(o++,r.a==t&&(a=r),!(a&&1<o)));r=r.next)a||(s=r);a&&(i.a==_t&&1==o?e(i,n):(s?((o=s).next==i.f&&(i.f=o),o.next=o.next.next):Dt(i),xt(i,a,kt,n)))}t.c=null}else Rt(t,kt,n)}(this,t)}),this)}},e.Yc=function(e){this.a=_t,Rt(this,wt,e)},e.Zc=function(e){this.a=_t,Rt(this,kt,e)},e.ec=function(){for(var e;e=Dt(this);)xt(this,e,this.a,this.i);this.h=!1};var Ht=mt;function Wt(e){F.call(this,e)}function Mt(){0!=Lt&&(qt[f(this)]=this),this.wa=this.wa,this.na=this.na}S(Wt,F),Wt.prototype.name="cancel";var Lt=0,qt={};function Gt(e){if(!e.wa&&(e.wa=!0,e.Ba(),0!=Lt)){var t=f(e);if(0!=Lt&&e.na&&0<e.na.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete qt[t]}}Mt.prototype.wa=!1,Mt.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Ut=Object.freeze||function(e){return e},zt=!Xe||9<=Number(nt),Yt=Xe&&!ot("9"),Xt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{c.addEventListener("test",h,t),c.removeEventListener("test",h,t)}catch(n){}return e}();function Vt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Jt(e,t){if(Vt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Qe){e:{try{Ge(t.nodeName);var o=!0;break e}catch(a){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Qt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Vt.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Jt,Vt);var Qt=Ut({2:"touch",3:"pen",4:"mouse"});Jt.prototype.preventDefault=function(){Jt.Za.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Yt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Jt.prototype.f=function(){return this.a};var Kt="closure_listenable_"+(1e6*Math.random()|0),$t=0;function Zt(e,t,n,i,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.Ta=o,this.key=++$t,this.ua=this.Na=!1}function en(e){e.ua=!0,e.listener=null,e.proxy=null,e.src=null,e.Ta=null}function tn(e){this.src=e,this.a={},this.b=0}function nn(e,t){var n=t.type;n in e.a&&V(e.a[n],t)&&(en(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function on(e,t,n,i){for(var o=0;o<e.length;++o){var a=e[o];if(!a.ua&&a.listener==t&&a.capture==!!n&&a.Ta==i)return o}return-1}tn.prototype.add=function(e,t,n,i,o){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.b++);var s=on(e,t,i,o);return-1<s?(t=e[s],n||(t.Na=!1)):((t=new Zt(t,this.src,a,!!i,o)).Na=n,e.push(t)),t};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function rn(e,t,n,i,o){if(i&&i.once)un(e,t,n,i,o);else if(Array.isArray(t))for(var a=0;a<t.length;a++)rn(e,t[a],n,i,o);else n=yn(n),e&&e[Kt]?_n(e,t,n,g(i)?!!i.capture:!!i,o):cn(e,t,n,!1,i,o)}function cn(e,t,n,i,o,a){if(!t)throw Error("Invalid event type");var s=g(o)?!!o.capture:!!o,r=fn(e);if(r||(e[an]=r=new tn(e)),!(n=r.add(t,n,i,s,a)).proxy)if(i=function(){var e=gn,t=zt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Xt||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),i,o);else if(e.attachEvent)e.attachEvent(dn(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}}function un(e,t,n,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)un(e,t[a],n,i,o);else n=yn(n),e&&e[Kt]?wn(e,t,n,g(i)?!!i.capture:!!i,o):cn(e,t,n,!0,i,o)}function ln(e,t,n,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)ln(e,t[a],n,i,o);else i=g(i)?!!i.capture:!!i,n=yn(n),e&&e[Kt]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=on(a=e.a[t],n,i,o))&&(en(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.a[t],e.b--))):e&&(e=fn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=on(t,n,i,o)),(n=-1<e?t[e]:null)&&hn(n))}function hn(e){if("number"!=typeof e&&e&&!e.ua){var t=e.src;if(t&&t[Kt])nn(t.u,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(dn(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=fn(t))?(nn(n,e),0==n.b&&(n.src=null,t[an]=null)):en(e)}}}function dn(e){return e in sn?sn[e]:sn[e]="on"+e}function pn(e,t,n,i){var o=!0;if((e=fn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var a=t[e];a&&a.capture==n&&!a.ua&&(a=mn(a,i),o=o&&!1!==a)}return o}function mn(e,t){var n=e.listener,i=e.Ta||e.src;return e.Na&&hn(e),n.call(i,t)}function gn(e,t){if(e.ua)return!0;if(!zt){if(!t)e:{t=["window","event"];for(var n=c,i=0;i<t.length;i++)if(null==(n=n[t[i]])){t=null;break e}t=n}if(t=new Jt(i=t,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){e:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(s){o=!0}(o||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=t.b;o;o=o.parentNode)i.push(o);for(e=e.type,o=i.length-1;0<=o;o--){t.b=i[o];var a=pn(i[o],e,!0,t);n=n&&a}for(o=0;o<i.length;o++)t.b=i[o],a=pn(i[o],e,!1,t),n=n&&a}return n}return mn(e,new Jt(t,this))}function fn(e){return(e=e[an])instanceof tn?e:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(e){return m(e)?e:(e[bn]||(e[bn]=function(t){return e.handleEvent(t)}),e[bn])}function vn(){Mt.call(this),this.u=new tn(this),this.Yb=this,this.eb=null}function _n(e,t,n,i,o){e.u.add(String(t),n,!1,i,o)}function wn(e,t,n,i,o){e.u.add(String(t),n,!0,i,o)}function kn(e,t,n,i){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var o=!0,a=0;a<t.length;++a){var s=t[a];if(s&&!s.ua&&s.capture==n){var r=s.listener,c=s.Ta||s.src;s.Na&&nn(e.u,s),o=!1!==r.call(c,i)&&o}}return o&&!i.defaultPrevented}function jn(e,t,n){if(m(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:c.setTimeout(e,t||0)}function Sn(e){var t=null;return new vt((function(n,i){-1==(t=jn((function(){n(void 0)}),e))&&i(Error("Failed to schedule timer."))})).o((function(e){throw c.clearTimeout(t),e}))}function On(e){if(e.V&&"function"==typeof e.V)return e.V();if("string"==typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}function Pn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.V||"function"!=typeof e.V){if(p(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var i in t=[],n=0,e)t[n++]=i;return t}}function En(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof En)for(n=e.X(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function In(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];Cn(e.b,i)&&(e.a[n++]=i),t++}e.a.length=n}if(e.c!=e.a.length){var o={};for(n=t=0;t<e.a.length;)Cn(o,i=e.a[t])||(e.a[n++]=i,o[i]=1),t++;e.a.length=n}}function Cn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(vn,Mt),vn.prototype[Kt]=!0,vn.prototype.addEventListener=function(e,t,n,i){rn(this,e,t,n,i)},vn.prototype.removeEventListener=function(e,t,n,i){ln(this,e,t,n,i)},vn.prototype.dispatchEvent=function(e){var t,n=this.eb;if(n)for(t=[];n;n=n.eb)t.push(n);n=this.Yb;var i=e.type||e;if("string"==typeof e)e=new Vt(e,n);else if(e instanceof Vt)e.target=e.target||n;else{var o=e;fe(e=new Vt(i,n),o)}if(o=!0,t)for(var a=t.length-1;0<=a;a--){var s=e.b=t[a];o=kn(s,i,!0,e)&&o}if(o=kn(s=e.b=n,i,!0,e)&&o,o=kn(s,i,!1,e)&&o,t)for(a=0;a<t.length;a++)o=kn(s=e.b=t[a],i,!1,e)&&o;return o},vn.prototype.Ba=function(){if(vn.Za.Ba.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],i=0;i<n.length;i++)en(n[i]);delete t.a[e],t.b--}}this.eb=null},(e=En.prototype).V=function(){In(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return In(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Cn(this.b,e)?this.b[e]:t},e.set=function(e,t){Cn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),i=0;i<n.length;i++){var o=n[i],a=this.get(o);e.call(t,a,o,this)}};var Nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof Tn?(this.h=void 0!==t?t:e.h,Rn(this,e.f),this.i=e.i,this.b=e.b,Fn(this,e.l),this.c=e.c,An(this,Zn(e.a)),this.g=e.g):e&&(n=String(e).match(Nn))?(this.h=!!t,Rn(this,n[1]||"",!0),this.i=Wn(n[2]||""),this.b=Wn(n[3]||"",!0),Fn(this,n[4]),this.c=Wn(n[5]||"",!0),An(this,n[6]||"",!0),this.g=Wn(n[7]||"")):(this.h=!!t,this.a=new Xn(null,this.h))}function Rn(e,t,n){e.f=n?Wn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Fn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function An(e,t,n){t instanceof Xn?(e.a=t,function(e,t){t&&!e.f&&(Vn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Qn(this,t),$n(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=Mn(t,zn)),e.a=new Xn(t,e.h))}function Dn(e,t,n){e.a.set(t,n)}function xn(e,t){return e.a.get(t)}function Bn(e){return e instanceof Tn?new Tn(e):new Tn(e,void 0)}function Hn(e,t){var n=new Tn(null,void 0);return Rn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Wn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ln),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ln(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Mn(t,qn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(Mn(t,qn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mn(n,"/"==n.charAt(0)?Un:Gn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Mn(n,Yn)),e.join("")},Tn.prototype.resolve=function(e){var t=new Tn(this),n=!!e.f;n?Rn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var i=e.c;if(n)Fn(t,e.l);else if(n=!!e.c){if("/"!=i.charAt(0))if(this.b&&!this.c)i="/"+i;else{var o=t.c.lastIndexOf("/");-1!=o&&(i=t.c.substr(0,o+1)+i)}if(".."==(o=i)||"."==o)i="";else if(re(o,"./")||re(o,"/.")){i=0==o.lastIndexOf("/",0),o=o.split("/");for(var a=[],s=0;s<o.length;){var r=o[s++];"."==r?i&&s==o.length&&a.push(""):".."==r?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&s==o.length&&a.push("")):(a.push(r),i=!0)}i=a.join("/")}else i=o}return n?t.c=i:n=""!==e.a.toString(),n?An(t,Zn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var qn=/[#\/\?@]/g,Gn=/[#\?:]/g,Un=/[#\?]/g,zn=/[#\?@]/g,Yn=/#/g;function Xn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Vn(e){e.a||(e.a=new En,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),o=null;if(0<=i){var a=e[n].substring(0,i);o=e[n].substring(i+1)}else a=e[n];t(a,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jn(e){var t=Pn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Xn(null,void 0);e=On(e);for(var i=0;i<t.length;i++){var o=t[i],a=e[i];Array.isArray(a)?$n(n,o,a):n.add(o,a)}return n}function Qn(e,t){Vn(e),t=ei(e,t),Cn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Cn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&In(e)))}function Kn(e,t){return Vn(e),t=ei(e,t),Cn(e.a.b,t)}function $n(e,t,n){Qn(e,t),0<n.length&&(e.c=null,e.a.set(ei(e,t),K(n)),e.b+=n.length)}function Zn(e){var t=new Xn;return t.c=e.c,e.a&&(t.a=new En(e.a),t.b=e.b),t}function ei(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ti(e){var t=[];return function e(t,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var o=n;n=o.length,i.push("[");for(var a="",s=0;s<n;s++)i.push(a),e(t,o[s],i),a=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(o in i.push("{"),a="",n)Object.prototype.hasOwnProperty.call(n,o)&&"function"!=typeof(s=n[o])&&(i.push(a),ai(o,i),i.push(":"),e(t,s,i),a=",");return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":ai(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new ni,e,t),t.join("")}function ni(){}(e=Xn.prototype).add=function(e,t){Vn(this),this.c=null,e=ei(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Vn(this),this.a.forEach((function(n,i){G(n,(function(n){e.call(t,n,i,this)}),this)}),this)},e.X=function(){Vn(this);for(var e=this.a.V(),t=this.a.X(),n=[],i=0;i<t.length;i++)for(var o=e[i],a=0;a<o.length;a++)n.push(t[i]);return n},e.V=function(e){Vn(this);var t=[];if("string"==typeof e)Kn(this,e)&&(t=Q(t,this.a.get(ei(this,e))));else{e=this.a.V();for(var n=0;n<e.length;n++)t=Q(t,e[n])}return t},e.set=function(e,t){return Vn(this),this.c=null,Kn(this,e=ei(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var i=t[n],o=encodeURIComponent(String(i));i=this.V(i);for(var a=0;a<i.length;a++){var s=o;""!==i[a]&&(s+="="+encodeURIComponent(String(i[a]))),e.push(s)}}return this.c=e.join("&")};var ii={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},oi=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ai(e,t){t.push('"',e.replace(oi,(function(e){var t=ii[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ii[e]=t),t})),'"')}function si(){var e=Si();return Xe&&!!nt&&11==nt||/Edge\/\d+/.test(e)}function ri(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function ci(e,t){t=t||c.window;var n="about:blank";e&&(n=Te(Fe(e))),t.location.href=n}function ui(e){return!!((e=(e||Si()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function li(e){e=e||c.window;try{e.close()}catch(t){}}function hi(e,t,n){var i=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var o=(window.screen.availHeight-n)/2,a=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<o?o:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Si().toLowerCase(),i&&(t.target=i,re(n,"crios/")&&(t.target="_blank")),wi(Si())==_i&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),i=window,t=n instanceof Ne?n:Fe(void 0!==n.href?n.href:String(n)),n=e.target||n.target,o=[],e)switch(s){case"width":case"height":case"top":case"left":o.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:o.push(s+"="+(e[s]?1:0))}var s=o.join(",");if((he("iPhone")&&!he("iPod")&&!he("iPad")||he("iPad")||he("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(be(s=dt(document,"A"),"HTMLAnchorElement"),t instanceof Ne||t instanceof Ne||(t="object"==typeof t&&t.ra?t.qa():String(t),Re.test(t)||(t="about:invalid#zClosurez"),t=new Ne(De,t)),s.href=Te(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=i.open("",n,s),e=Te(t),s&&(Je&&re(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e=We('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qe(e)+'">'),i=s.document)&&(i.write(Be(e)),i.close())):(s=i.open(Te(t),n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(r){}return s}var di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pi=/^[^@]+@[^@]+$/;function mi(){var e=null;return new vt((function(t){"complete"==c.document.readyState?t():(e=function(){t()},un(window,"load",e))})).o((function(t){throw ln(window,"load",e),t}))}function gi(e){return e=e||Si(),!("file:"!==Ci()&&"ionic:"!==Ci()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function fi(){var e=c.window;try{return!(!e||e==e.top)}catch(t){return!1}}function bi(){return void 0!==c.WorkerGlobalScope&&"function"==typeof c.importScripts}function yi(){return t.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.INTERNAL.hasOwnProperty("node")?"Node":bi()?"Worker":"Browser"}function vi(){var e=yi();return"ReactNative"===e||"Node"===e}var _i="Firefox";function wi(e){var t=e.toLowerCase();return re(t,"opera/")||re(t,"opr/")||re(t,"opios/")?"Opera":re(t,"iemobile")?"IEMobile":re(t,"msie")||re(t,"trident/")?"IE":re(t,"edge/")?"Edge":re(t,"firefox/")?_i:re(t,"silk/")?"Silk":re(t,"blackberry")?"Blackberry":re(t,"webos")?"Webos":!re(t,"safari/")||re(t,"chrome/")||re(t,"crios/")||re(t,"android")?!re(t,"chrome/")&&!re(t,"crios/")||re(t,"edge/")?re(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"}var ki={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function ji(e,t){t=t||[];var n,i=[],o={};for(n in ki)o[ki[n]]=!0;for(n=0;n<t.length;n++)void 0!==o[t[n]]&&(delete o[t[n]],i.push(t[n]));return i.sort(),(t=i).length||(t=["FirebaseCore-web"]),"Browser"===(i=yi())?i=wi(o=Si()):"Worker"===i&&(i=wi(o=Si())+"-"+i),i+"/JsCore/"+e+"/"+t.join(",")}function Si(){return c.navigator&&c.navigator.userAgent||""}function Oi(e,t){e=e.split("."),t=t||c;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Pi(){try{var e=c.localStorage,t=Ai();if(e)return e.setItem(t,"1"),e.removeItem(t),!si()||!!c.indexedDB}catch(n){return bi()&&!!c.indexedDB}return!1}function Ei(){return(Ii()||"chrome-extension:"===Ci()||gi())&&!vi()&&Pi()&&!bi()}function Ii(){return"http:"===Ci()||"https:"===Ci()}function Ci(){return c.location&&c.location.protocol||null}function Ni(e){return!ui(e=e||Si())&&wi(e)!=_i}function Ti(e){return void 0===e?null:ti(e)}function Ri(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function Fi(e){if(null!==e)return JSON.parse(e)}function Ai(e){return e||Math.floor(1e9*Math.random()).toString()}function Di(e){return"Safari"!=wi(e=e||Si())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function xi(){var e=c.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Bi(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Si(),t=yi(),this.b=ui(e)||"ReactNative"===t}function Hi(){var e=c.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Wi(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Mi(){return!(!Oi("fireauth.oauthhelper",c)&&!Oi("fireauth.iframe",c))}Bi.prototype.get=function(){var e=c.navigator;return!e||"boolean"!=typeof e.onLine||!Ii()&&"chrome-extension:"!==Ci()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Li,qi={};function Gi(e){qi[e]||(qi[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Ui={};Object.defineProperty(Ui,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ui,"abcd",{configurable:!0,enumerable:!0,value:2}),Li=2==Ui.abcd}catch(ze){Li=!1}function zi(e,t,n){Li?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Yi(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&zi(e,n,t[n])}function Xi(e){var t={};return Yi(t,e),t}function Vi(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)zi(t,n,Vi(e[n]));return t}function Ji(e){var t=e&&(e[eo]?"phone":null);if(!(t&&e&&e[Zi]))throw new O("internal-error","Internal assert: invalid MultiFactorInfo object");zi(this,"uid",e[Zi]),zi(this,"displayName",e[Ki]||null);var n=null;e[$i]&&(n=new Date(e[$i]).toUTCString()),zi(this,"enrollmentTime",n),zi(this,"factorId",t)}function Qi(e){try{var t=new to(e)}catch(n){t=null}return t}Ji.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Ki="displayName",$i="enrolledAt",Zi="mfaEnrollmentId",eo="phoneInfo";function to(e){Ji.call(this,e),zi(this,"phoneNumber",e[eo])}function no(e){var t={},n=e[so],i=e[co],o=e[uo];if(e=Qi(e[ro]),!o||o!=oo&&o!=ao&&!n||o==ao&&!i||o==io&&!e)throw Error("Invalid checkActionCode response!");o==ao?(t[ho]=n||null,t[mo]=n||null,t[lo]=i):(t[ho]=i||null,t[mo]=i||null,t[lo]=n||null),t[po]=e||null,zi(this,fo,o),zi(this,go,Vi(t))}S(to,Ji),to.prototype.v=function(){var e=to.Za.v.call(this);return e.phoneNumber=this.phoneNumber,e};var io="REVERT_SECOND_FACTOR_ADDITION",oo="EMAIL_SIGNIN",ao="VERIFY_AND_CHANGE_EMAIL",so="email",ro="mfaInfo",co="newEmail",uo="requestType",lo="email",ho="fromEmail",po="multiFactorInfo",mo="previousEmail",go="data",fo="operation";function bo(e){var t=xn(e=Bn(e),yo)||null,n=xn(e,vo)||null,i=xn(e,ko)||null;if(i=i&&So[i]||null,!t||!n||!i)throw new O("argument-error",yo+", "+vo+"and "+ko+" are required in a valid action code URL.");Yi(this,{apiKey:t,operation:i,code:n,continueUrl:xn(e,_o)||null,languageCode:xn(e,wo)||null,tenantId:xn(e,jo)||null})}var yo="apiKey",vo="oobCode",_o="continueUrl",wo="languageCode",ko="mode",jo="tenantId",So={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:io,signIn:oo,verifyAndChangeEmail:ao,verifyEmail:"VERIFY_EMAIL"};function Oo(e){try{return new bo(e)}catch(t){return null}}function Po(e){var t=e[To];if(void 0===t)throw new O("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new O("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Eo];if(n&&"object"==typeof n){t=n[Ao];var i=n[Ro];if(n=n[Fo],"string"==typeof t&&t.length){if(this.a=t,void 0!==i&&"boolean"!=typeof i)throw new O("argument-error",Ro+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new O("argument-error",Fo+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new O("argument-error",Ao+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new O("missing-android-pkg-name")}}else if(void 0!==n)throw new O("argument-error",Eo+" property must be a non null object when specified.");if(this.f=null,(t=e[No])&&"object"==typeof t){if("string"==typeof(t=t[Do])&&t.length)this.f=t;else if(void 0!==t)throw new O("argument-error",Do+" property must be a non empty string when specified.")}else if(void 0!==t)throw new O("argument-error",No+" property must be a non null object when specified.");if(void 0!==(t=e[Co])&&"boolean"!=typeof t)throw new O("argument-error",Co+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Io])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new O("argument-error",Io+" property must be a non empty string when specified.");this.i=e||null}var Eo="android",Io="dynamicLinkDomain",Co="handleCodeInApp",No="iOS",To="url",Ro="installApp",Fo="minimumVersion",Ao="packageName",Do="bundleId";function xo(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Bo=null;function Ho(e){var t=Mo(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.g=e,this.c=t.exp,this.h=t.sub,j(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Wo(e){try{return new Ho(e)}catch(t){return null}}function Mo(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),o=Bo[n];if(null!=o)return o;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Bo){Bo={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var i=e.concat(t[n].split("")),o=0;o<i.length;o++){var a=i[o];void 0===Bo[a]&&(Bo[a]=o)}}}();for(var i=0;;){var o=n(-1),a=n(0),s=n(64),r=n(64);if(64===r&&-1===o)break;t(o<<2|a>>4),64!=s&&(t(a<<4&240|s>>2),64!=r&&t(s<<6&192|r))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e))}catch(i){}return null}Ho.prototype.S=function(){return this.f},Ho.prototype.i=function(){return this.b},Ho.prototype.toString=function(){return this.g};var Lo="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),qo=["client_id","response_type","scope","redirect_uri","state"],Go={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:qo},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:qo},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:qo},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Lo},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Uo(e){for(var t in Go)if(Go[t].ea==e)return Go[t];return null}function zo(e){var t={};t["facebook.com"]=Qo,t["google.com"]=$o,t["github.com"]=Ko,t["twitter.com"]=Zo;var n=e&&e[Xo];try{if(n)return t[n]?new t[n](e):new Jo(e);if(void 0!==e[Yo])return new Vo(e)}catch(i){}return null}var Yo="idToken",Xo="providerId";function Vo(e){var t=e[Xo];if(!t&&e[Yo]){var n=Wo(e[Yo]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),zi(this,"providerId",t),zi(this,"isNewUser",n)}function Jo(e){Vo.call(this,e),zi(this,"profile",Vi((e=Fi(e.rawUserInfo||"{}"))||{}))}function Qo(e){if(Jo.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ko(e){if(Jo.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");zi(this,"username",this.profile&&this.profile.login||null)}function $o(e){if(Jo.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Zo(e){if(Jo.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");zi(this,"username",e.screenName||null)}function ea(e){var t=Bn(e),n=xn(t,"link"),i=xn(Bn(n),"link");return t=xn(t,"deep_link_id"),xn(Bn(t),"link")||t||i||n||e}function ta(e,t){if(!e&&!t)throw new O("internal-error","Internal assert: no raw session string available");if(e&&t)throw new O("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?na:ia}S(Jo,Vo),S(Qo,Jo),S(Ko,Jo),S($o,Jo),S(Zo,Jo);var na="enroll",ia="signin";function oa(){}function aa(e,t){return e.then((function(e){if(e[Us]){var n=Wo(e[Us]);if(!n||t!=n.h)throw new O("user-mismatch");return e}throw new O("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==I+"user-not-found"?new O("user-mismatch"):e}))}function sa(e,t){if(!t)throw new O("internal-error","failed to construct a credential");this.a=t,zi(this,"providerId",e),zi(this,"signInMethod",e)}function ra(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function ca(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new sa(e.providerId,e.pendingToken)}catch(t){}return null}function ua(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&zi(this,"idToken",t.idToken),t.accessToken&&zi(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&zi(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new O("internal-error","failed to construct a credential");zi(this,"accessToken",t.oauthToken),zi(this,"secret",t.oauthTokenSecret)}zi(this,"providerId",e),zi(this,"signInMethod",n)}function la(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Jn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function ha(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new ua(e.providerId,t,e.signInMethod)}catch(n){}}return null}function da(e,t){this.Oc=t||[],Yi(this,{providerId:e,isOAuthProvider:!0}),this.Fb={},this.lb=(Uo(e)||{}).Ha||null,this.kb=null}function pa(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new O("argument-error",'SAML provider IDs must be prefixed with "saml."');da.call(this,e,[])}function ma(e){da.call(this,e,qo),this.a=[]}function ga(){ma.call(this,"facebook.com")}function fa(e){if(!e)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new ga).credential({accessToken:t})}function ba(){ma.call(this,"github.com")}function ya(e){if(!e)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new ba).credential({accessToken:t})}function va(){ma.call(this,"google.com"),this.Aa("profile")}function _a(e,t){var n=e;return g(e)&&(n=e.idToken,t=e.accessToken),(new va).credential({idToken:n,accessToken:t})}function wa(){da.call(this,"twitter.com",Lo)}function ka(e,t){var n=e;if(g(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new O("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ua("twitter.com",n,"twitter.com")}function ja(e,t,n){this.a=e,this.f=t,zi(this,"providerId","password"),zi(this,"signInMethod",n===Oa.EMAIL_LINK_SIGN_IN_METHOD?Oa.EMAIL_LINK_SIGN_IN_METHOD:Oa.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Sa(e){return e&&e.email&&e.password?new ja(e.email,e.password,e.signInMethod):null}function Oa(){Yi(this,{providerId:"password",isOAuthProvider:!1})}function Pa(e,t){if(!(t=Ea(t)))throw new O("argument-error","Invalid email link!");return new ja(e,t.code,Oa.EMAIL_LINK_SIGN_IN_METHOD)}function Ea(e){return(e=Oo(e=ea(e)))&&e.operation===oo?e:null}function Ia(e){if(!(e.bb&&e.ab||e.Ja&&e.da))throw new O("internal-error");this.a=e,zi(this,"providerId","phone"),this.ea="phone",zi(this,"signInMethod","phone")}function Ca(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Ia(t)}return null}function Na(e){return e.a.Ja&&e.a.da?{temporaryProof:e.a.Ja,phoneNumber:e.a.da}:{sessionInfo:e.a.bb,code:e.a.ab}}function Ta(e){try{this.a=e||t.auth()}catch(n){throw new O("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yi(this,{providerId:"phone",isOAuthProvider:!1})}function Ra(e,t){if(!e)throw new O("missing-verification-id");if(!t)throw new O("missing-verification-code");return new Ia({bb:e,ab:t})}function Fa(e){if(e.temporaryProof&&e.phoneNumber)return new Ia({Ja:e.temporaryProof,da:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,i=e&&e.oauthTokenSecret,o=e&&e.nonce,a=e&&e.oauthIdToken,s=e&&e.pendingToken;try{switch(t){case"google.com":return _a(a,n);case"facebook.com":return fa(n);case"github.com":return ya(n);case"twitter.com":return ka(n,i);default:return n||i||a||s?s?0==t.indexOf("saml.")?new sa(t,s):new ua(t,{pendingToken:s,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new ma(t).credential({idToken:a,accessToken:n,rawNonce:o}):null}}catch(r){return null}}function Aa(e){if(!e.isOAuthProvider)throw new O("invalid-oauth-provider")}function Da(e,t,n,i,o,a,s){if(this.c=e,this.b=t||null,this.g=n||null,this.f=i||null,this.i=a||null,this.h=s||null,this.a=o||null,!this.g&&!this.a)throw new O("invalid-auth-event");if(this.g&&this.a)throw new O("invalid-auth-event");if(this.g&&!this.f)throw new O("invalid-auth-event")}function xa(e){return(e=e||{}).type?new Da(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&P(e.error),e.postBody,e.tenantId):null}function Ba(){this.b=null,this.a=[]}ta.prototype.Fa=function(){return Pt(this.a?this.a:this.b)},ta.prototype.v=function(){return this.type==na?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},oa.prototype.ia=function(){},oa.prototype.b=function(){},oa.prototype.c=function(){},oa.prototype.v=function(){},sa.prototype.ia=function(e){return ur(e,ra(this))},sa.prototype.b=function(e,t){var n=ra(this);return n.idToken=t,lr(e,n)},sa.prototype.c=function(e,t){return aa(hr(e,ra(this)),t)},sa.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ua.prototype.ia=function(e){return ur(e,la(this))},ua.prototype.b=function(e,t){var n=la(this);return n.idToken=t,lr(e,n)},ua.prototype.c=function(e,t){return aa(hr(e,la(this)),t)},ua.prototype.v=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},da.prototype.Ia=function(e){return this.Fb=me(e),this},S(pa,da),S(ma,da),ma.prototype.Aa=function(e){return X(this.a,e)||this.a.push(e),this},ma.prototype.Nb=function(){return K(this.a)},ma.prototype.credential=function(e,t){var n;if(!(n=g(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new O("argument-error","credential failed: must provide the ID token and/or the access token.");return new ua(this.providerId,n,this.providerId)},S(ga,ma),zi(ga,"PROVIDER_ID","facebook.com"),zi(ga,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(ba,ma),zi(ba,"PROVIDER_ID","github.com"),zi(ba,"GITHUB_SIGN_IN_METHOD","github.com"),S(va,ma),zi(va,"PROVIDER_ID","google.com"),zi(va,"GOOGLE_SIGN_IN_METHOD","google.com"),S(wa,da),zi(wa,"PROVIDER_ID","twitter.com"),zi(wa,"TWITTER_SIGN_IN_METHOD","twitter.com"),ja.prototype.ia=function(e){return this.signInMethod==Oa.EMAIL_LINK_SIGN_IN_METHOD?Yr(e,vr,{email:this.a,oobCode:this.f}):Yr(e,Lr,{email:this.a,password:this.f})},ja.prototype.b=function(e,t){return this.signInMethod==Oa.EMAIL_LINK_SIGN_IN_METHOD?Yr(e,_r,{idToken:t,email:this.a,oobCode:this.f}):Yr(e,Fr,{idToken:t,email:this.a,password:this.f})},ja.prototype.c=function(e,t){return aa(this.ia(e),t)},ja.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yi(Oa,{PROVIDER_ID:"password"}),Yi(Oa,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yi(Oa,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ia.prototype.ia=function(e){return e.cb(Na(this))},Ia.prototype.b=function(e,t){var n=Na(this);return n.idToken=t,Yr(e,Gr,n)},Ia.prototype.c=function(e,t){var n=Na(this);return n.operation="REAUTH",aa(e=Yr(e,Ur,n),t)},Ia.prototype.v=function(){var e={providerId:"phone"};return this.a.bb&&(e.verificationId=this.a.bb),this.a.ab&&(e.verificationCode=this.a.ab),this.a.Ja&&(e.temporaryProof=this.a.Ja),this.a.da&&(e.phoneNumber=this.a.da),e},Ta.prototype.cb=function(e,t){var n=this.a.b;return Pt(t.verify()).then((function(i){if("string"!=typeof i)throw new O("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var o=g(e)?e.session:null,a=g(e)?e.phoneNumber:e;return(o&&o.type==na?o.Fa().then((function(e){return function(e,t){return Yr(e,Dr,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i}})})):o&&o.type==ia?o.Fa().then((function(t){return function(e,t){return Yr(e,xr,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})})):function(e,t){return Yr(e,Tr,t)}(n,{phoneNumber:a,recaptchaToken:i})).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new O("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yi(Ta,{PROVIDER_ID:"phone"}),Yi(Ta,{PHONE_SIGN_IN_METHOD:"phone"}),Da.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Da.prototype.S=function(){return this.h},Da.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Ha,Wa=null;function Ma(e){var t="unauthorized-domain",n=void 0,i=Bn(e);e=i.b,"chrome-extension"==(i=i.f)?n=Le("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==i||"https"==i?n=Le("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",O.call(this,t,n)}function La(e,t,n){O.call(this,e,n),(e=t||{}).Gb&&zi(this,"email",e.Gb),e.da&&zi(this,"phoneNumber",e.da),e.credential&&zi(this,"credential",e.credential),e.Wb&&zi(this,"tenantId",e.Wb)}function qa(e){if(e.code){var t=e.code||"";0==t.indexOf(I)&&(t=t.substring(I.length));var n={credential:Fa(e),Wb:e.tenantId};if(e.email)n.Gb=e.email;else if(e.phoneNumber)n.da=e.phoneNumber;else if(!n.credential)return new O(t,e.message||void 0);return new La(t,n,e.message)}return null}function Ga(){}function Ua(){}function za(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var i=t[n];try{return new ActiveXObject(i),e.f=i}catch(o){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Ya(){}function Xa(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.oc,this),this.a.onerror=w(this.Pb,this),this.a.onprogress=w(this.pc,this),this.a.ontimeout=w(this.tc,this)}function Va(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ja(e,t,n){this.reset(e,t,n,void 0,void 0)}function Qa(e){this.f=e,this.b=this.c=this.a=null}function Ka(e,t){this.name=e,this.value=t}S(Ma,O),S(La,O),La.prototype.v=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.v();return t&&fe(e,t),e},La.prototype.toJSON=function(){return this.v()},Ga.prototype.c=null,S(Ua,Ga),Ua.prototype.a=function(){var e=za(this);return e?new ActiveXObject(e):new XMLHttpRequest},Ua.prototype.b=function(){var e={};return za(this)&&(e[0]=!0,e[1]=!0),e},Ha=new Ua,S(Ya,Ga),Ya.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Xa;throw Error("Unsupported browser")},Ya.prototype.b=function(){return{}},(e=Xa.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Va(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",Va(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,Va(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ja.prototype.a=null,Ja.prototype.reset=function(e,t,n,i,o){i||j(),delete this.a},Ka.prototype.toString=function(){return this.name};var $a=new Ka("SEVERE",1e3),Za=new Ka("WARNING",900),es=new Ka("CONFIG",700),ts=new Ka("FINE",500);Qa.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(D("Root logger has no level set."),null)}(this).value)for(m(t)&&(t=t()),e=new Ja(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var ns={},is=null;function os(e){var t;if(is||(is=new Qa(""),ns[""]=is,is.c=es),!(t=ns[e])){t=new Qa(e);var n=e.lastIndexOf("."),i=e.substr(n+1);(n=os(e.substr(0,n))).b||(n.b={}),n.b[i]=t,t.a=n,ns[e]=t}return t}function as(e,t){e&&e.log(ts,t,void 0)}function ss(e){this.f=e}function rs(e){vn.call(this),this.s=e,this.readyState=cs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=os("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}S(ss,Ga),ss.prototype.a=function(){return new rs(this.f)},ss.prototype.b=function(e){return function(){return e}}({}),S(rs,vn);var cs=0;function us(e){e.c.read().then(e.nc.bind(e)).catch(e.Sa.bind(e))}function ls(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,hs(e)}function hs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ds(e){vn.call(this),this.headers=new En,this.D=e||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ps,this.w=this.R=!1}(e=rs.prototype).open=function(e,t){if(this.readyState!=cs)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,hs(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.s.fetch(new Request(this.g,t)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ls(this,!1)),this.readyState=cs},e.sc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,hs(this)),this.a&&(this.readyState=3,hs(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==c.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,us(this)):e.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ls(this,!0):hs(this),3==this.readyState&&us(this)}},e.rc=function(e){this.a&&(this.response=this.responseText=e,ls(this,!0))},e.qc=function(e){this.a&&(this.response=e,ls(this,!0))},e.Sa=function(e){var t=this.h;t&&t.log(Za,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&ls(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Za,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Za,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},S(ds,vn);var ps="";ds.prototype.b=os("goog.net.XhrIo");var ms=/^https?$/i,gs=["POST","PUT"];function fs(e){return"content-type"==e.toLowerCase()}function bs(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ys(e),_s(e)}function ys(e){e.N||(e.N=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function vs(e){if(e.c&&void 0!==r)if(e.B[1]&&4==ks(e)&&2==js(e))as(e.b,Ss(e,"Local request error detected and ignored"));else if(e.i&&4==ks(e))jn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==ks(e)){as(e.b,Ss(e,"Request complete")),e.c=!1;try{var t,n=js(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(t=i)){var o;if(o=0===n){var a=String(e.l).match(Nn)[1]||null;if(!a&&c.self&&c.self.location){var s=c.self.location.protocol;a=s.substr(0,s.length-1)}o=!ms.test(a?a.toLowerCase():"")}t=o}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var u=2<ks(e)?e.a.statusText:""}catch(l){as(e.b,"Can not get status: "+l.message),u=""}e.h=u+" ["+js(e)+"]",ys(e)}}finally{_s(e)}}}function _s(e,t){if(e.a){ws(e);var n=e.a,i=e.B[0]?h:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(o){(e=e.b)&&e.log($a,"Problem encountered resetting onreadystatechange: "+o.message,void 0)}}}function ws(e){e.a&&e.w&&(e.a.ontimeout=null),e.s&&(c.clearTimeout(e.s),e.s=null)}function ks(e){return e.a?e.a.readyState:0}function js(e){try{return 2<ks(e)?e.a.status:-1}catch(t){return-1}}function Ss(e,t){return t+" ["+e.P+" "+e.l+" "+js(e)+"]"}function Os(e){var t=xs;this.g=[],this.w=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(e,t,n){e.a=!0,e.c=n,e.f=!t,Ns(e)}function Es(e){if(e.a){if(!e.u)throw new Ts(e);e.u=!1}}function Is(e,t,n,i){e.g.push([t,n,i]),e.a&&Ns(e)}function Cs(e){return Y(e.g,(function(e){return m(e[1])}))}function Ns(e){if(e.h&&e.a&&Cs(e)){var t=e.h,n=As[t];n&&(c.clearTimeout(n.a),delete As[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var i=n=!1;e.g.length&&!e.i;){var o=e.g.shift(),a=o[0],s=o[1];if(o=o[2],a=e.f?s:a)try{var r=a.call(o||e.s,t);void 0!==r&&(e.f=e.f&&(r==t||r instanceof Error),e.c=t=r),(R(t)||"function"==typeof c.Promise&&t instanceof c.Promise)&&(i=!0,e.i=!0)}catch(u){t=u,e.f=!0,Cs(e)||(n=!0)}}e.c=t,i&&(r=w(e.m,e,!0),i=w(e.m,e,!1),t instanceof Os?(Is(t,r,i),t.B=!0):t.then(r,i)),n&&(t=new Fs(t),As[t.a]=t,e.h=t.a)}function Ts(){F.call(this)}function Rs(){F.call(this)}function Fs(e){this.a=c.setTimeout(w(this.c,this),0),this.b=e}(e=ds.prototype).Ka=function(){void 0!==r&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",as(this.b,Ss(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(as(this.b,Ss(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_s(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),_s(this,!0)),ds.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?vs(this):this.Hc())},e.Hc=function(){vs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ps:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log($a,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return as(this.b,"Can not get response: "+t.message),null}},Os.prototype.cancel=function(e){if(this.a)this.c instanceof Os&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(e=new Rs(this),Es(this),Ps(this,!1,e))}},Os.prototype.m=function(e,t){this.i=!1,Ps(this,e,t)},Os.prototype.then=function(e,t,n){var i,o,a=new vt((function(e,t){i=e,o=t}));return Is(this,i,(function(e){e instanceof Rs?a.cancel():o(e)})),a.then(e,t,n)},Os.prototype.$goog_Thenable=!0,S(Ts,F),Ts.prototype.message="Deferred has already fired",Ts.prototype.name="AlreadyCalledError",S(Rs,F),Rs.prototype.message="Deferred was canceled",Rs.prototype.name="CanceledError",Fs.prototype.c=function(){throw delete As[this.a],this.b};var As={};function Ds(e){var t={},n=t.document||document,i=Se(e).toString(),o=dt(document,"SCRIPT"),a={Tb:o,Ka:void 0},s=new Os(a),r=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(r=window.setTimeout((function(){Bs(o,!0);var e=new Ms(Ws,"Timeout reached for loading script "+i);Es(s),Ps(s,!1,e)}),h),a.Ka=r),o.onload=o.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(Bs(o,t.ud||!1,r),Es(s),Ps(s,!0,null))},o.onerror=function(){Bs(o,!0,r);var e=new Ms(Hs,"Error while loading script "+i);Es(s),Ps(s,!1,e)},fe(a=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),rt(o,a),function(e,t){be(e,"HTMLScriptElement"),e.src=Se(t),null===l&&(l=(t=(t=c.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""),(t=l)&&e.setAttribute("nonce",t)}(o,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(o),s}function xs(){if(this&&this.Tb){var e=this.Tb;e&&"SCRIPT"==e.tagName&&Bs(e,!0,this.Ka)}}function Bs(e,t,n){null!=n&&c.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Hs=0,Ws=1;function Ms(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),F.call(this,n),this.code=e}function Ls(e){this.f=e}function qs(e,n,i){if(this.c=e,this.u=(e=n||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||zs,this.g=me(e.secureTokenHeaders||Ys),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=e.firebaseTimeout||Xs,this.a=me(e.firebaseHeaders||Vs),i&&(this.a["X-Client-Version"]=i,this.g["X-Client-Version"]=i),i="Node"==yi(),!(i=c.XMLHttpRequest||i&&t.INTERNAL.node&&t.INTERNAL.node.XMLHttpRequest)&&!bi())throw new O("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=bi()?new ss(self):vi()?new Ls(i):new Ya,this.b=null}S(Ms,F),S(Ls,Ga),Ls.prototype.a=function(){return new this.f},Ls.prototype.b=function(){return{}};var Gs,Us="idToken",zs=new Bi(3e4,6e4),Ys={"Content-Type":"application/x-www-form-urlencoded"},Xs=new Bi(3e4,6e4),Vs={"Content-Type":"application/json"};function Js(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Qs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Ks(e,t,n,i,o,a,s){(function(){var e=Si();return!((e="Chrome"!=wi(e)?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||Xe&&nt&&!(9<nt))})()||bi()?e=w(e.w,e):(Gs||(Gs=new vt((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(c[Zs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Is(e,null,t,void 0)}(Ds(Oe($s,{onload:Zs})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=w(e.s,e)),e(t,n,i,o,a,s)}qs.prototype.S=function(){return this.b},qs.prototype.w=function(e,t,n,i,o,a){if(bi()&&(void 0===c.fetch||void 0===c.Headers||void 0===c.Request))throw new O("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ds(this.f);if(a){s.g=Math.max(0,a);var r=setTimeout((function(){s.dispatchEvent("timeout")}),a)}_n(s,"complete",(function(){r&&clearTimeout(r);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return as(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),wn(s,"ready",(function(){r&&clearTimeout(r),Gt(this)})),wn(s,"timeout",(function(){r&&clearTimeout(r),Gt(this),t&&t(null)})),function(e,t,n,i,o){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Ha.a(),e.B=function(e){return e.c||(e.c=e.b())}(e.D?e.D:Ha),e.a.onreadystatechange=w(e.Sb,e);try{as(e.b,Ss(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(s){return as(e.b,Ss(e,"Error opening Xhr: "+s.message)),void bs(e,s)}t=i||"";var a=new En(e.headers);o&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"==typeof e)G(e,t,void 0);else for(var n=Pn(e),i=On(e),o=i.length,a=0;a<o;a++)t.call(void 0,i[a],n&&n[a],e)}(o,(function(e,t){a.set(t,e)})),o=function(e){e:{for(var t=fs,n=e.length,i="string"==typeof e?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(void 0,i[o],o,e)){t=o;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(a.X()),i=c.FormData&&t instanceof c.FormData,!X(gs,n)||o||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{ws(e),0<e.g&&(e.w=function(e){return Xe&&ot(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),as(e.b,Ss(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=w(e.Ka,e)):e.s=jn(e.Ka,e.g,e)),as(e.b,Ss(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(s){as(e.b,Ss(e,"Send error: "+s.message)),bs(e,s)}}(s,e,n,i,o)};var $s=new ye(we,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function er(e){if("string"!=typeof(e=e.email)||!pi.test(e))throw new O("invalid-email")}function tr(e){"email"in e&&er(e)}function nr(e){if(!e[Us]){if(e.mfaPendingCredential)throw new O("multi-factor-auth-required",null,me(e));throw new O("internal-error")}}function ir(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new O("internal-error")}else{if(!e.sessionInfo)throw new O("missing-verification-id");if(!e.code)throw new O("missing-verification-code")}}qs.prototype.s=function(e,t,n,i,o){var a=this;Gs.then((function(){window.gapi.client.setApiKey(a.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:i,headers:o,authType:"none",callback:function(e){window.gapi.auth.setToken(s),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},qs.prototype.vb=function(){return Yr(this,Ar,{})},qs.prototype.xb=function(e,t){return Yr(this,Rr,{idToken:e,email:t})},qs.prototype.yb=function(e,t){return Yr(this,Fr,{idToken:e,password:t})};var or={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ar(e){if(!e.phoneVerificationInfo)throw new O("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new O("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new O("missing-verification-code")}function sr(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new O("internal-error")}function rr(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Kn(e=new Xn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function cr(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=qa(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=qa(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=qa(e)):e.errorMessage&&(t=Xr(e.errorMessage)),t)throw t;nr(e)}function ur(e,t){return t.returnIdpCredential=!0,Yr(e,Br,t)}function lr(e,t){return t.returnIdpCredential=!0,Yr(e,Wr,t)}function hr(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Yr(e,Hr,t)}function dr(e){if(!e.oobCode)throw new O("invalid-action-code")}(e=qs.prototype).zb=function(e,t){var n={idToken:e},i=[];return de(or,(function(e,o){var a=t[o];null===a?i.push(e):o in t&&(n[o]=a)})),i.length&&(n.deleteAttribute=i),Yr(this,Rr,n)},e.rb=function(e,t){return fe(e={requestType:"PASSWORD_RESET",email:e},t),Yr(this,Er,e)},e.sb=function(e,t){return fe(e={requestType:"EMAIL_SIGNIN",email:e},t),Yr(this,Sr,e)},e.qb=function(e,t){return fe(e={requestType:"VERIFY_EMAIL",idToken:e},t),Yr(this,Or,e)},e.Ab=function(e,t,n){return fe(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),Yr(this,Pr,e)},e.cb=function(e){return Yr(this,qr,e)},e.jb=function(e,t){return Yr(this,Nr,{oobCode:e,newPassword:t})},e.Pa=function(e){return Yr(this,mr,{oobCode:e})},e.fb=function(e){return Yr(this,pr,{oobCode:e})};var pr={endpoint:"setAccountInfo",A:dr,Y:"email",C:!0},mr={endpoint:"resetPassword",A:dr,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new O("internal-error")},C:!0},gr={endpoint:"signupNewUser",A:function(e){if(er(e),!e.password)throw new O("weak-password")},G:nr,U:!0,C:!0},fr={endpoint:"createAuthUri",C:!0},br={endpoint:"deleteAccount",M:["idToken"]},yr={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(e){if("array"!=d(e.deleteProvider))throw new O("internal-error")}},vr={endpoint:"emailLinkSignin",M:["email","oobCode"],A:er,G:nr,U:!0,C:!0},_r={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:er,G:nr,U:!0},wr={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ar,G:nr,C:!0,La:!0},kr={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ar,G:nr,C:!0,La:!0},jr={endpoint:"getAccountInfo"},Sr={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new O("internal-error");er(e)},Y:"email",C:!0},Or={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new O("internal-error")},Y:"email",C:!0},Pr={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new O("internal-error")},Y:"email",C:!0},Er={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new O("internal-error");er(e)},Y:"email",C:!0},Ir={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Cr={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new O("internal-error")}},Nr={endpoint:"resetPassword",A:dr,Y:"email",C:!0},Tr={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Rr={endpoint:"setAccountInfo",M:["idToken"],A:tr,U:!0},Fr={endpoint:"setAccountInfo",M:["idToken"],A:function(e){if(tr(e),!e.password)throw new O("weak-password")},G:nr,U:!0},Ar={endpoint:"signupNewUser",G:nr,U:!0,C:!0},Dr={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new O("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new O("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new O("internal-error")},C:!0,La:!0},xr={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new O("internal-error")},C:!0,La:!0},Br={endpoint:"verifyAssertion",A:sr,Wa:rr,G:cr,U:!0,C:!0},Hr={endpoint:"verifyAssertion",A:sr,Wa:rr,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new O("user-not-found");if(e.errorMessage)throw Xr(e.errorMessage);nr(e)},U:!0,C:!0},Wr={endpoint:"verifyAssertion",A:function(e){if(sr(e),!e.idToken)throw new O("internal-error")},Wa:rr,G:cr,U:!0},Mr={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new O("invalid-custom-token")},G:nr,U:!0,C:!0},Lr={endpoint:"verifyPassword",A:function(e){if(er(e),!e.password)throw new O("wrong-password")},G:nr,U:!0,C:!0},qr={endpoint:"verifyPhoneNumber",A:ir,G:nr,C:!0},Gr={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new O("internal-error");ir(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",qa(e);nr(e)}},Ur={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ir,G:nr,C:!0},zr={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Us]^!!e.refreshToken)throw new O("internal-error")},C:!0,La:!0};function Yr(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var i=e[t[n]];if(null==i||""===i)return!1}return!0}(n,t.M))return Et(new O("internal-error"));var i,o=!!t.La,a=t.Rb||"POST";return Pt(n).then(t.A).then((function(){return t.U&&(n.returnSecureToken=!0),t.C&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,i,o,a,s){var r=Bn(t+n);Dn(r,"key",e.c),s&&Dn(r,"cb",j().toString());var c="GET"==i;if(c)for(var u in o)o.hasOwnProperty(u)&&Dn(r,u,o[u]);return new vt((function(t,n){Ks(e,r.toString(),(function(e){e?e.error?n(Vr(e,a||{})):t(e):n(new O("network-request-failed"))}),i,c?void 0:ti(Ri(o)),e.a,e.i.get())}))}(e,o?e.l:e.h,t.endpoint,a,n,t.Eb,t.hb||!1)})).then((function(e){return i=e,t.Wa?t.Wa(n,i):i})).then(t.G).then((function(){if(!t.Y)return i;if(!(t.Y in i))throw new O("internal-error");return i[t.Y]}))}function Xr(e){return Vr({error:{errors:[{message:e}],code:400,message:e}})}function Vr(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new O(i[n]):null)return n;for(var o in n=e.error&&e.error.message||"",fe(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,i)if(0===n.indexOf(o))return new O(i[o],t);return!t&&e&&(t=Ti(e)),new O("internal-error",t)}function Jr(e){this.b=e,this.a=null,this.nb=function(e){return(Zr||(Zr=new vt((function(e,t){function n(){xi(),Oi("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){xi(),t(Error("Network Error"))},timeout:Kr.get()})}if(Oi("gapi.iframes.Iframe"))e();else if(Oi("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[i]=function(){Oi("gapi.load")?n():t(Error("Network Error"))},Pt(Ds(i=Oe(Qr,{onload:i}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw Zr=null,e})))).then((function(){return new vt((function(t,n){Oi("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Oi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(i){function o(){clearTimeout(a),t()}e.a=i,e.a.restyle({setHideOnLeave:!1});var a=setTimeout((function(){n(Error("Network Error"))}),$r.get());i.ping(o).then(o,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Qr=new ye(we,"https://apis.google.com/js/api.js?onload=%{onload}"),Kr=new Bi(3e4,6e4),$r=new Bi(5e3,15e3),Zr=null;function ec(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Hn(this.i,"/__/auth/iframe"),Dn(this.a,"apiKey",this.g),Dn(this.a,"appName",this.h),this.b=null,this.c=[]}function tc(e,t,n,i,o){this.s=e,this.m=t,this.c=n,this.u=i,this.i=this.g=this.l=null,this.a=o,this.h=this.f=null}function nc(e){try{return t.app(e).auth().Ea()}catch(n){return[]}}function ic(e,t,n,i,o){this.u=e,this.f=t,this.b=n,this.c=i||null,this.h=o||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function oc(e){var t=ri();return function(e){return Yr(e,Ir,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Bn(t),i=n.f;n=n.b;for(var o=0;o<e.length;o++){var a=e[o],s=n,r=i;if(0==a.indexOf("chrome-extension://")?s=Bn(a).b==s&&"chrome-extension"==r:"http"!=r&&"https"!=r?s=!1:di.test(a)?s=s==a:(a=a.split(".").join("\\."),s=new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)),s){e=!0;break e}}e=!1}if(!e)throw new Ma(ri())}))}function ac(e){return e.l||(e.l=mi().then((function(){if(!e.s){var t=e.c,n=e.h,i=nc(e.b),o=new ec(e.u,e.f,e.b);o.f=t,o.b=n,o.c=K(i||[]),e.s=o.toString()}e.i=new Jr(e.s),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.nb.then((function(){e.a.register("authEvent",t,Oi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var i=!1;for(t=xa(t.authEvent),n=0;n<e.g.length;n++)i=e.g[n](t)||i;return(n={}).status=i?"ACK":"ERROR",Pt(n)}return n.status="ERROR",Pt(n)}))}(e)}))),e.l}function sc(e){return e.m||(e.w=e.c?ji(e.c,nc(e.b)):null,e.m=new qs(e.f,T(e.h),e.w)),e.m}function rc(e,t,n,i,o,a,s,r,c,u,l){return(e=new tc(e,t,n,i,o)).l=a,e.g=s,e.i=r,e.b=me(c||null),e.f=u,e.ub(l).toString()}function cc(e){if(this.a=e||t.INTERNAL.reactNative&&t.INTERNAL.reactNative.AsyncStorage,!this.a)throw new O("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function uc(e){this.b=e,this.a={},this.f=w(this.c,this)}ec.prototype.toString=function(){return this.f?Dn(this.a,"v",this.f):Qn(this.a.a,"v"),this.b?Dn(this.a,"eid",this.b):Qn(this.a.a,"eid"),this.c.length?Dn(this.a,"fw",this.c.join(",")):Qn(this.a.a,"fw"),this.a.toString()},tc.prototype.ub=function(e){return this.h=e,this},tc.prototype.toString=function(){var e=Hn(this.s,"/__/auth/handler");if(Dn(e,"apiKey",this.m),Dn(e,"appName",this.c),Dn(e,"authType",this.u),this.a.isOAuthProvider){var n=this.a;try{var i=t.app(this.c).auth().ja()}catch(c){i=null}for(var o in n.kb=i,Dn(e,"providerId",this.a.providerId),i=Ri((n=this.a).Fb))i[o]=i[o].toString();o=n.Oc,i=me(i);for(var a=0;a<o.length;a++){var s=o[a];s in i&&delete i[s]}n.lb&&n.kb&&!i[n.lb]&&(i[n.lb]=n.kb),pe(i)||Dn(e,"customParameters",Ti(i))}if("function"==typeof this.a.Nb&&(n=this.a.Nb()).length&&Dn(e,"scopes",n.join(",")),this.l?Dn(e,"redirectUrl",this.l):Qn(e.a,"redirectUrl"),this.g?Dn(e,"eventId",this.g):Qn(e.a,"eventId"),this.i?Dn(e,"v",this.i):Qn(e.a,"v"),this.b)for(var r in this.b)this.b.hasOwnProperty(r)&&!xn(e,r)&&Dn(e,r,this.b[r]);return this.h?Dn(e,"tid",this.h):Qn(e.a,"tid"),this.f?Dn(e,"eid",this.f):Qn(e.a,"eid"),(r=nc(this.c)).length&&Dn(e,"fw",r.join(",")),e.toString()},(e=ic.prototype).Lb=function(e,t,n){var i=new O("popup-closed-by-user"),o=new O("web-storage-unsupported"),a=this,s=!1;return this.ka().then((function(){(function(e){var t={type:"webStorageSupport"};return ac(e).then((function(){return function(e,t){return e.nb.then((function(){return new vt((function(n){e.a.send(t.type,t,n,Oi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(a).then((function(n){n||(e&&li(e),t(o),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(e){return new vt((function(t){return function n(){Sn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!s)return Sn(n).then((function(){t(i)}))}))},e.Ub=function(){var e=Si();return!Ni(e)&&!Di(e)},e.Qb=function(){return!1},e.Jb=function(e,t,n,i,o,a,s,r){if(!e)return Et(new O("popup-blocked"));if(s&&!Ni())return this.ka().o((function(t){li(e),o(t)})),i(),Pt();this.a||(this.a=oc(sc(this)));var c=this;return this.a.then((function(){var t=c.ka().o((function(t){throw li(e),o(t),t}));return i(),t})).then((function(){Aa(n),s||ci(rc(c.u,c.f,c.b,t,n,null,a,c.c,void 0,c.h,r),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(c.a=null),e}))},e.Kb=function(e,t,n,i){this.a||(this.a=oc(sc(this)));var o=this;return this.a.then((function(){Aa(t),ci(rc(o.u,o.f,o.b,e,t,ri(),n,o.c,void 0,o.h,i))})).o((function(e){throw"auth/network-request-failed"==e.code&&(o.a=null),e}))},e.ka=function(){var e=this;return ac(this).then((function(){return e.i.nb})).o((function(){throw e.a=null,new O("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(e){this.g.push(e)},e.Qa=function(e){J(this.g,(function(t){return t==e}))},(e=cc.prototype).get=function(e){return Pt(this.a.getItem(e)).then((function(e){return e&&Fi(e)}))},e.set=function(e,t){return Pt(this.a.setItem(e,Ti(t)))},e.T=function(e){return Pt(this.a.removeItem(e))},e.ba=function(){},e.ha=function(){};var lc,hc=[];function dc(e,t,n){pe(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function pc(e){this.a=e}function mc(e){this.c=e,this.b=!1,this.a=[]}function gc(e,t,n,i){var o,a,s,r,c=n||{},u=null;if(e.b)return Et(Error("connection_unavailable"));var l=i?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new vt((function(n,i){h?(o=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){i(Error("unsupported_event"))}),l),e.a.push(u={messageChannel:h,onMessage:a=function(e){e.data.eventId===o&&("ack"===e.data.status?(clearTimeout(s),r=setTimeout((function(){i(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(r),void 0!==e.data.response?n(e.data.response):i(Error("unknown_error"))):(clearTimeout(s),clearTimeout(r),i(Error("invalid_response"))))}}),h.port1.addEventListener("message",a),e.c.postMessage({eventType:t,eventId:o,data:c},[h.port2])):i(Error("connection_unavailable"))})).then((function(t){return fc(e,u),t})).o((function(t){throw fc(e,u),t}))}function fc(e,t){if(t){var n=t.messageChannel;n&&(n.port1.removeEventListener("message",t.onMessage),n.port1.close()),J(e.a,(function(e){return e==t}))}}function bc(){if(!vc())throw new O("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=c.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var e=this;bi()&&self?(this.l=function(){var e=bi()?self:null;if(G(hc,(function(n){n.b==e&&(t=n)})),!t){var t=new uc(e);hc.push(t)}return t}(),dc(this.l,"keyChanged",(function(t,n){return Sc(e).then((function(t){return 0<t.length&&G(e.a,(function(e){e(t)})),{keyProcessed:X(t,n.key)}}))})),dc(this.l,"ping",(function(){return Pt(["keyChanged"])}))):function(){var e=c.navigator;return e&&e.serviceWorker?Pt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Pt(null)}().then((function(t){(e.h=t)&&(e.g=new mc(new pc(t)),gc(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&X(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function yc(e){return e.m||(e.m=function e(t){return new vt((function(n,i){var o=t.u.open("firebaseLocalStorageDb",1);o.onerror=function(e){try{e.preventDefault()}catch(t){}i(Error(e.target.error))},o.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){i(t)}},o.onsuccess=function(o){(o=o.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(o):function(e){return new vt((function(t,n){var i=e.u.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){t()},i.onerror=function(e){n(Error(e.target.error))}}))}(t).then((function(){return e(t)})).then((function(e){n(e)})).o((function(e){i(e)}))}}))}(e)),e.m}function vc(){try{return!!c.indexedDB}catch(ze){return!1}}function _c(e){return e.objectStore("firebaseLocalStorage")}function wc(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function kc(e){return new vt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function jc(e,t){return e.g&&e.h&&function(){var e=c.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?gc(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Pt()}function Sc(e){return yc(e).then((function(e){var t=_c(wc(e,!1));return t.getAll?kc(t.getAll()):new vt((function(e,n){var i=[],o=t.openCursor();o.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},o.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},i=[];if(0==e.b){for(i=0;i<t.length;i++)n[t[i].fbase_key]=t[i].value;i=function e(t,n){var i,o=[];for(i in t)i in n?typeof t[i]!=typeof n[i]?o.push(i):"object"==typeof t[i]&&null!=t[i]&&null!=n[i]?0<e(t[i],n[i]).length&&o.push(i):t[i]!==n[i]&&o.push(i):o.push(i);for(i in n)i in t||o.push(i);return o}(e.c,n),e.c=n}return i}))}function Oc(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Pc(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Pt().then((function(){if(vc()){var e=Ai(),i="__sak"+e;return lc||(lc=new bc),(n=lc).set(i,e).then((function(){return n.get(i)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.T(i)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ba((function(e){G(t.a,(function(t){t(e)}))})),e}))}function Ec(){this.a={},this.type="inMemory"}function Ic(){if(!function(){var e="Node"==yi();if(!(e=Cc()||e&&t.INTERNAL.node&&t.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==yi())throw new O("internal-error","The LocalStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.a=Cc()||t.INTERNAL.node.localStorage,this.type="localStorage"}function Cc(){try{var e=c.localStorage,t=Ai();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Nc(){this.type="nullStorage"}function Tc(){if(!function(){var e="Node"==yi();if(!(e=Rc()||e&&t.INTERNAL.node&&t.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==yi())throw new O("internal-error","The SessionStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.a=Rc()||t.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Rc(){try{var e=c.sessionStorage,t=Ai();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Fc(){var e={};e.Browser=xc,e.Node=Bc,e.ReactNative=Hc,e.Worker=Wc,this.a=e[yi()]}uc.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,i=this.a[t];if(i&&0<i.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var o=[];G(i,(function(t){o.push(Pt().then((function(){return t(e.origin,e.data.data)})))})),Ct(o).then((function(i){var o=[];G(i,(function(e){o.push({fulfilled:e.Mb,value:e.value,reason:e.reason?e.reason.message:void 0})})),G(o,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:o})}))}},pc.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},mc.prototype.close=function(){for(;0<this.a.length;)fc(this,this.a[0]);this.b=!0},(e=bc.prototype).set=function(e,t){var n,i=!1,o=this;return yc(this).then((function(t){return kc((t=_c(wc(n=t,!0))).get(e))})).then((function(a){var s=_c(wc(n,!0));return a?(a.value=t,kc(s.put(a))):(o.b++,i=!0,(a={}).fbase_key=e,a.value=t,kc(s.add(a)))})).then((function(){return o.c[e]=t,jc(o,e)})).ma((function(){i&&o.b--}))},e.get=function(e){return yc(this).then((function(t){return kc(_c(wc(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.T=function(e){var t=!1,n=this;return yc(this).then((function(i){return t=!0,n.b++,kc(_c(wc(i,!0)).delete(e))})).then((function(){return delete n.c[e],jc(n,e)})).ma((function(){t&&n.b--}))},e.ba=function(e){0==this.a.length&&function(e){Oc(e),function t(){e.f=setTimeout((function(){e.i=Sc(e).then((function(t){0<t.length&&G(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ha=function(e){J(this.a,(function(t){return t==e})),0==this.a.length&&Oc(this)},(e=Pc.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.T=function(e){return this.b.then((function(t){return t.T(e)}))},e.ba=function(e){this.a.push(e)},e.ha=function(e){J(this.a,(function(t){return t==e}))},(e=Ec.prototype).get=function(e){return Pt(this.a[e])},e.set=function(e,t){return this.a[e]=t,Pt()},e.T=function(e){return delete this.a[e],Pt()},e.ba=function(){},e.ha=function(){},(e=Ic.prototype).get=function(e){var t=this;return Pt().then((function(){return Fi(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Pt().then((function(){var i=Ti(t);null===i?n.T(e):n.a.setItem(e,i)}))},e.T=function(e){var t=this;return Pt().then((function(){t.a.removeItem(e)}))},e.ba=function(e){c.window&&rn(c.window,"storage",e)},e.ha=function(e){c.window&&ln(c.window,"storage",e)},(e=Nc.prototype).get=function(){return Pt(null)},e.set=function(){return Pt()},e.T=function(){return Pt()},e.ba=function(){},e.ha=function(){},(e=Tc.prototype).get=function(e){var t=this;return Pt().then((function(){return Fi(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Pt().then((function(){var i=Ti(t);null===i?n.T(e):n.a.setItem(e,i)}))},e.T=function(e){var t=this;return Pt().then((function(){t.a.removeItem(e)}))},e.ba=function(){},e.ha=function(){};var Ac,Dc,xc={F:Ic,$a:Tc},Bc={F:Ic,$a:Tc},Hc={F:cc,$a:Nc},Wc={F:Ic,$a:Nc},Mc={od:"local",NONE:"none",qd:"session"};function Lc(){var e=!(Di(Si())||!fi()),t=Ni(),n=Pi();this.m=e,this.h=t,this.l=n,this.a={},Ac||(Ac=new Fc),e=Ac;try{this.g=!si()&&Mi()||!c.indexedDB?new e.a.F:new Pc(bi()?new Ec:new e.a.F)}catch(i){this.g=new Ec,this.h=!0}try{this.i=new e.a.$a}catch(i){this.i=new Ec}this.u=new Ec,this.f=w(this.Vb,this),this.b={}}function qc(){return Dc||(Dc=new Lc),Dc}function Gc(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Uc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function zc(e,t,n){return n=Uc(t,n),"local"==t.F&&(e.b[n]=null),Gc(e,t.F).T(n)}function Yc(e){e.c&&(clearInterval(e.c),e.c=null)}function Xc(e){this.a=e,this.b=qc()}(e=Lc.prototype).get=function(e,t){return Gc(this,e.F).get(Uc(e,t))},e.set=function(e,t,n){var i=Uc(e,n),o=this,a=Gc(this,e.F);return a.set(i,t).then((function(){return a.get(i)})).then((function(t){"local"==e.F&&(o.b[i]=t)}))},e.addListener=function(e,t,n){e=Uc(e,t),this.l&&(this.b[e]=c.localStorage.getItem(e)),pe(this.a)&&(Gc(this,"local").ba(this.f),this.h||(si()||!Mi())&&c.indexedDB||!this.l||function(e){Yc(e),e.c=setInterval((function(){for(var t in e.a){var n=c.localStorage.getItem(t),i=e.b[t];n!=i&&(e.b[t]=n,n=new Jt({type:"storage",key:t,target:window,oldValue:i,newValue:n,a:!0}),e.Vb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=Uc(e,t),this.a[e]&&(J(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),pe(this.a)&&(Gc(this,"local").ha(this.f),Yc(this))},e.Vb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var o=c.localStorage.getItem(n);o!==i&&(this.b[n]=o,this.ib(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Gc(this,"local").ha(this.f):Yc(this),this.m)if(n=c.localStorage.getItem(t),(i=e.a.newValue)!==n)null!==i?c.localStorage.setItem(t,i):c.localStorage.removeItem(t);else if(this.b[t]===i&&void 0===e.a.a)return;var a=this;n=function(){void 0===e.a.a&&a.b[t]===c.localStorage.getItem(t)||(a.b[t]=c.localStorage.getItem(t),a.ib(t))},Xe&&nt&&10==nt&&c.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else G(e,w(this.ib,this))},e.ib=function(e){this.a[e]&&G(this.a[e],(function(e){e()}))};var Vc,Jc={name:"authEvent",F:"local"};function Qc(){this.a=qc()}function Kc(e,t){this.b=$c,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===Vc&&(Vc=c.Int32Array?new Int32Array(au):au),this.reset()}S(Kc,(function(){this.b=-1}));for(var $c=64,Zc=$c-1,eu=[],tu=0;tu<Zc;tu++)eu[tu]=0;var nu=Q(128,eu);function iu(e){for(var t=e.f,n=e.l,i=0,o=0;o<t.length;)n[i++]=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3],o=4*i;for(t=16;64>t;t++){var a=(0|n[t-16])+(((o=0|n[t-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3)|0,s=(0|n[t-7])+(((i=0|n[t-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[t]=a+s|0}i=0|e.a[0],o=0|e.a[1];var r=0|e.a[2],c=0|e.a[3],u=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(a=0|e.a[7],t=0;64>t;t++){var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&r^o&r)|0;s=(a=a+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((s=(s=u&l^~u&h)+(0|Vc[t])|0)+(0|n[t])|0)|0,a=h,h=l,l=u,u=c+s|0,c=r,r=o,o=i,i=s+d|0}e.a[0]=e.a[0]+i|0,e.a[1]=e.a[1]+o|0,e.a[2]=e.a[2]+r|0,e.a[3]=e.a[3]+c|0,e.a[4]=e.a[4]+u|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+a|0}function ou(e,t,n){void 0===n&&(n=t.length);var i=0,o=e.c;if("string"==typeof t)for(;i<n;)e.f[o++]=t.charCodeAt(i++),o==e.b&&(iu(e),o=0);else{if(!p(t))throw Error("message must be string or array");for(;i<n;){var a=t[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[o++]=a,o==e.b&&(iu(e),o=0)}}e.c=o,e.g+=n}Kc.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):K(this.h)};var au=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function su(){Kc.call(this,8,ru)}S(su,Kc);var ru=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function cu(e,t,n,i,o){this.u=e,this.i=t,this.l=n,this.m=i||null,this.s=o||null,this.h=t+":"+n,this.w=new Qc,this.g=new Xc(this.h),this.f=null,this.b=[],this.a=this.c=null}function uu(e){return new O("invalid-cordova-configuration",e)}function lu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(i){}}function hu(e){return e.f||(e.f=e.ka().then((function(){return new vt((function(t){e.Ca((function n(i){return t(i),e.Qa(n),!1})),function(e){function t(t){i=!0,o&&o.cancel(),du(e).then((function(i){var o=n;if(i&&t&&t.url){var a=null;-1!=(o=ea(t.url)).indexOf("/__/auth/callback")&&(a=(a="object"==typeof(a=Fi(xn(a=Bn(o),"firebaseError")||null))?P(a):null)?new Da(i.c,i.b,null,null,a,null,i.S()):new Da(i.c,i.b,o,i.f,null,null,i.S())),o=a||n}lu(e,o)}))}var n=new Da("unknown",null,null,null,new O("no-auth-event")),i=!1,o=Sn(500).then((function(){return du(e).then((function(){i||lu(e,n)}))})),a=c.handleOpenURL;c.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Oi("BuildInfo.packageName",c).toLowerCase()+"://")&&t({url:e}),"function"==typeof a)try{a(e)}catch(n){console.error(n)}},Wa||(Wa=new Ba),function(e){var t=Wa;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=Oi("universalLinks.subscribe",c))&&e(null,t.b))}(t)}(e)}))}))),e.f}function du(e){var t=null;return function(e){return e.b.get(Jc,e.a).then((function(e){return xa(e)}))}(e.g).then((function(n){return t=n,zc((n=e.g).b,Jc,n.a)})).then((function(){return t}))}function pu(e){this.a=e,this.b=qc()}(e=cu.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(gi(void 0)?mi().then((function(){return new vt((function(e,t){var n=c.document,i=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(i),e()}),!1)}))})):Et(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Oi("universalLinks.subscribe",c))throw uu("cordova-universal-links-plugin-fix is not installed");if(void 0===Oi("BuildInfo.packageName",c))throw uu("cordova-plugin-buildinfo is not installed");if("function"!=typeof Oi("cordova.plugins.browsertab.openUrl",c))throw uu("cordova-plugin-browsertab is not installed");if("function"!=typeof Oi("cordova.InAppBrowser.open",c))throw uu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new O("cordova-not-ready")}))},e.Lb=function(e,t){return t(new O("operation-not-supported-in-this-environment")),Pt()},e.Jb=function(){return Et(new O("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(e,t,n,i){if(this.c)return Et(new O("redirect-operation-pending"));var o=this,a=c.document,s=null,r=null,u=null,l=null;return this.c=Pt().then((function(){return Aa(t),hu(o)})).then((function(){return function(e,t,n,i,o){var a=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new Da(t,i,null,a,new O("no-auth-event"),null,o),r=Oi("BuildInfo.packageName",c);if("string"!=typeof r)throw new O("invalid-cordova-configuration");var u=Oi("BuildInfo.displayName",c),l={};if(Si().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=r;else{if(!Si().toLowerCase().match(/android/))return Et(new O("operation-not-supported-in-this-environment"));l.apn=r}u&&(l.appDisplayName=u),a=function(e){var t=new su;ou(t,e),e=[];var n=8*t.g;ou(t,nu,56>t.c?56-t.c:t.b-(t.c-56));for(var i=63;56<=i;i--)t.f[i]=255&n,n/=256;for(iu(t),i=n=0;i<t.i;i++)for(var o=24;0<=o;o-=8)e[n++]=t.a[i]>>o&255;return function(e){return z(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(a),l.sessionId=a;var h=rc(e.u,e.i,e.l,t,n,null,i,e.m,l,e.s,o);return e.ka().then((function(){var t=e.h;return e.w.a.set(Jc,s.v(),t)})).then((function(){var t=Oi("cordova.plugins.browsertab.isAvailable",c);if("function"!=typeof t)throw new O("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=Oi("cordova.plugins.browsertab.openUrl",c)))throw new O("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Oi("cordova.InAppBrowser.open",c)))throw new O("invalid-cordova-configuration");t=Si(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(o,e,t,n,i)})).then((function(){return new vt((function(e,t){r=function(){var t=Oi("cordova.plugins.browsertab.close",c);return e(),"function"==typeof t&&t(),o.a&&"function"==typeof o.a.close&&(o.a.close(),o.a=null),!1},o.Ca(r),l=function(){Hi()&&u()},a.addEventListener("resume",u=function(){s||(s=Sn(2e3).then((function(){t(new O("redirect-cancelled-by-user"))})))},!1),Si().toLowerCase().match(/android/)||a.addEventListener("visibilitychange",l,!1)})).o((function(e){return du(o).then((function(){throw e}))}))})).ma((function(){u&&a.removeEventListener("resume",u,!1),l&&a.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),r&&o.Qa(r),o.c=null}))},e.Ca=function(e){this.b.push(e),hu(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Da("unknown",null,null,null,new O("no-auth-event")),e(t))}))},e.Qa=function(e){J(this.b,(function(t){return t==e}))};var mu={name:"pendingRedirect",F:"session"};function gu(e){return zc(e.b,mu,e.a)}function fu(e,t,n){this.i={},this.w=0,this.D=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Nu,this.B=new Du,this.g=new pu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=bu(this.D,this.u,this.m,E)}function bu(e,n,i,o){var a=t.SDK_VERSION||null;return gi()?new cu(e,n,i,a,o):new ic(e,n,i,a,o)}function yu(e){e.f||(e.f=!0,e.a.Ca(e.l));var t=e.a;return e.a.ka().o((function(n){throw e.a==t&&e.reset(),n}))}function vu(e){e.a.Ub()&&yu(e).o((function(t){var n=new Da("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ou(t)&&e.s(n)})),e.a.Qb()||Tu(e.b)}function _u(e,t){X(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(mu,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?gu(e.g).then((function(){yu(e).o((function(t){var n=new Da("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ou(t)&&e.s(n)}))})):vu(e)})).o((function(){vu(e)}))}function wu(e,t){J(e.h,(function(e){return e==t}))}fu.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=bu(this.D,this.u,this.m),this.i={}},fu.prototype.s=function(e){if(!e)throw new O("invalid-auth-event");if(6e5<=j()-this.w&&(this.i={},this.w=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Cb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,i),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.w=j())),t=!0;break}}return Tu(this.b),t};var ku=new Bi(2e3,1e4),ju=new Bi(3e4,6e4);function Su(e,t,n,i,o,a,s){return e.a.Jb(t,n,i,(function(){e.f||(e.f=!0,e.a.Ca(e.l))}),(function(){e.reset()}),o,a,s)}function Ou(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Pu(e,t,n,i,o){var a;return function(e){return e.b.set(mu,"pending",e.a)}(e.g).then((function(){return e.a.Kb(t,n,i,o).o((function(t){if(Ou(t))throw new O("operation-not-supported-in-this-environment");return a=t,gu(e.g).then((function(){throw a}))})).then((function(){return e.a.Xb()?new vt((function(){})):gu(e.g).then((function(){return e.pa()})).then((function(){})).o((function(){}))}))}))}function Eu(e,t,n,i,o){return e.a.Lb(i,(function(e){t.la(n,null,e,o)}),ku.get())}fu.prototype.pa=function(){return this.b.pa()};var Iu={};function Cu(e,t,n){var i=t+":"+n;return Iu[i]||(Iu[i]=new fu(e,t,n)),Iu[i]}function Nu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Tu(e){e.g||(e.g=!0,Au(e,!1,null,null))}function Ru(e){e.g&&!e.i&&Au(e,!1,null,null)}function Fu(e,t){if(e.b=function(){return Pt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Au(e,t,n,i){t?i?function(e,t){if(e.b=function(){return Et(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,i):Fu(e,n):Fu(e,{user:null}),e.f=[],e.c=[]}function Du(){}function xu(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(e){this.Bb=e},enumerable:!1})}function Bu(e,t){this.a=t,zi(this,"verificationId",e)}function Hu(e,t,n,i){return new Ta(e).cb(t,n).then((function(e){return new Bu(e,i)}))}function Wu(e){var t=Mo(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new O("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yi(this,{token:e,expirationTime:Wi(1e3*t.exp),authTime:Wi(1e3*t.auth_time),issuedAtTime:Wi(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function Mu(e,t,n){var i=t&&t[qu];if(!i)throw new O("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new ta(null,i),this.b=[];var o=this;G(t[Lu]||[],(function(e){(e=Qi(e))&&o.b.push(e)})),zi(this,"auth",this.a),zi(this,"session",this.c),zi(this,"hints",this.b)}Nu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Nu.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,i=e.b,o=e.a&&"auth/web-storage-unsupported"==e.a.code,a=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!o&&!a),"unknown"!=n||o||a?e.a?(Au(this,!0,null,e.a),Pt()):t.Da(n,i)?function(e,t,n){n=n.Da(t.c,t.b);var i=t.g,o=t.f,a=t.i,s=t.S(),r=!!t.c.match(/Redirect$/);n(i,o,s,a).then((function(t){Au(e,r,t,null)})).o((function(t){Au(e,r,null,t)}))}(this,e,t):Et(new O("invalid-auth-event")):(Au(this,!1,null,null),Pt())}else Et(new O("invalid-auth-event"))},Nu.prototype.pa=function(){var e=this;return new vt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new O("timeout");e.a&&e.a.cancel(),e.a=Sn(ju.get()).then((function(){e.b||(e.g=!0,Au(e,!0,null,t))}))}(e))}))},Du.prototype.h=function(e,t){if(e){var n=e.c,i=e.b;e.a?(t.la(e.c,null,e.a,e.b),Pt()):t.Da(n,i)?function(e,t){var n=e.b,i=e.c;t.Da(i,n)(e.g,e.f,e.S(),e.i).then((function(e){t.la(i,e,null,n)})).o((function(e){t.la(i,null,e,n)}))}(e,t):Et(new O("invalid-auth-event"))}else Et(new O("invalid-auth-event"))},Bu.prototype.confirm=function(e){return e=Ra(this.verificationId,e),this.a(e)};var Lu="mfaInfo",qu="mfaPendingCredential";function Gu(e,t,n,i){O.call(this,"multi-factor-auth-required",i,t),this.b=new Mu(e,t,n),zi(this,"resolver",this.b)}function Uu(e,t,n){if(e&&g(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new Gu(t,e.serverResponse,n,e.message)}catch(i){}return null}function zu(){}function Yu(e){zi(this,"factorId",e.ea),this.a=e}function Xu(e){if(Yu.call(this,e),this.a.ea!=Ta.PROVIDER_ID)throw new O("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Vu(e,t){for(var n in Vt.call(this,e),t)this[n]=t[n]}function Ju(e,t){this.a=e,this.b=[],this.c=w(this.wc,this),rn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&G(t.multiFactor.enrolledFactors,(function(e){var t=null,i={};if(e){e.uid&&(i[Zi]=e.uid),e.displayName&&(i[Ki]=e.displayName),e.enrollmentTime&&(i[$i]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(i[eo]=e.phoneNumber);try{t=new to(i)}catch(o){}e=t}else e=null;e&&n.push(e)})),Qu(this,n)}function Qu(e,t){e.b=t,zi(e,"enrolledFactors",t)}function Ku(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function $u(e){this.c=e,this.b=this.a=null}function Zu(e){return e.b&&1e3*e.b.c||0}function el(e,t){var n=t.refreshToken;e.b=Wo(t[Us]||""),e.a=n}function tl(e,t){this.a=e||null,this.b=t||null,Yi(this,{lastSignInTime:Wi(t||null),creationTime:Wi(e||null)})}function nl(e,t,n,i,o,a){Yi(this,{uid:e,displayName:i||null,photoURL:o||null,email:n||null,phoneNumber:a||null,providerId:t})}function il(e,n,i){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null,e=t.SDK_VERSION?ji(t.SDK_VERSION):null,this.a=new qs(this.l,T(E),e),this.b=new $u(this.a),ll(this,n[Us]),el(this.b,n),zi(this,"refreshToken",this.b.a),pl(this,i||{}),vn.call(this),this.P=!1,this.s&&Ei()&&(this.i=Cu(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(e){return new Ku((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=Zu(e.b)-j()-3e5;return 0<t?t:0}))}(this),this.Z=w(this.Ma,this);var o=this;this.oa=null,this.za=function(e){o.va(e.g)},this.aa=null,this.W=[],this.ya=function(e){al(o,e.c)},this.$=null,this.O=new Ju(this,i),zi(this,"multiFactor",this.O)}function ol(e,t){e.aa&&ln(e.aa,"languageCodeChanged",e.za),(e.aa=t)&&rn(t,"languageCodeChanged",e.za)}function al(e,n){e.W=n,Qs(e.a,t.SDK_VERSION?ji(t.SDK_VERSION,e.W):null)}function sl(e,t){e.$&&ln(e.$,"frameworkChanged",e.ya),(e.$=t)&&rn(t,"frameworkChanged",e.ya)}function rl(e){try{return t.app(e.m).auth()}catch(n){throw new O("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function cl(e){e.D||e.B.b||(e.B.start(),ln(e,"tokenChanged",e.Z),rn(e,"tokenChanged",e.Z))}function ul(e){ln(e,"tokenChanged",e.Z),e.B.stop()}function ll(e,t){e.xa=t,zi(e,"_lat",t)}function hl(e){for(var t=[],n=0;n<e.R.length;n++)t.push(e.R[n](e));return Ct(t).then((function(){return e}))}function dl(e){e.i&&!e.P&&(e.P=!0,_u(e.i,e))}function pl(e,t){Yi(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new tl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function ml(){}function gl(e){return Pt().then((function(){if(e.D)throw new O("app-deleted")}))}function fl(e){return z(e.providerData,(function(e){return e.providerId}))}function bl(e,t){t&&(yl(e,t.providerId),e.providerData.push(t))}function yl(e,t){J(e.providerData,(function(e){return e.providerId==t}))}function vl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&zi(e,t,n)}function _l(e,t){e!=t&&(Yi(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),zi(e,"metadata",t.metadata?function(e){return new tl(e.a,e.b)}(t.metadata):new tl),G(t.providerData,(function(t){bl(e,t)})),function(e,t){e.b=t.b,e.a=t.a}(e.b,t.b),zi(e,"refreshToken",e.b.a),Qu(e.O,t.O.b))}function wl(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return Yr(e.a,jr,{idToken:t}).then(w(e.Ic,e))}(e,t).then((function(){return n||vl(e,"isAnonymous",!1),t}))}))}function kl(e,t){t[Us]&&e.xa!=t[Us]&&(el(e.b,t),e.dispatchEvent(new Vu("tokenChanged")),ll(e,t[Us]),vl(e,"refreshToken",e.b.a))}function jl(e,t){return wl(e).then((function(){if(X(fl(e),t))return hl(e).then((function(){throw new O("provider-already-linked")}))}))}function Sl(e,t,n){return Xi({user:e,credential:Fa(t),additionalUserInfo:t=zo(t),operationType:n})}function Ol(e,t){return kl(e,t),e.reload().then((function(){return e}))}function Pl(e,n,i,o,a){if(!Ei())return Et(new O("operation-not-supported-in-this-environment"));if(e.h&&!a)return Et(e.h);var s=Uo(i.providerId),r=Ai(e.uid+":::"),c=null;(!Ni()||fi())&&e.s&&i.isOAuthProvider&&(c=rc(e.s,e.l,e.m,n,i,null,r,t.SDK_VERSION||null,null,null,e.tenantId));var u=hi(c,s&&s.ta,s&&s.sa);return o=o().then((function(){if(Il(e),!a)return e.I().then((function(){}))})).then((function(){return Su(e.i,u,n,i,r,!!c,e.tenantId)})).then((function(){return new vt((function(t,i){e.la(n,null,new O("cancelled-popup-request"),e.g||null),e.f=t,e.w=i,e.g=r,e.c=Eu(e.i,e,n,u,r)}))})).then((function(e){return u&&li(u),e?Xi(e):null})).o((function(e){throw u&&li(u),e})),Cl(e,o,a)}function El(e,t,n,i,o){if(!Ei())return Et(new O("operation-not-supported-in-this-environment"));if(e.h&&!o)return Et(e.h);var a=null,s=Ai(e.uid+":::");return i=i().then((function(){if(Il(e),!o)return e.I().then((function(){}))})).then((function(){return e.fa=s,hl(e)})).then((function(t){return e.ga&&(t=(t=e.ga).b.set(Rl,e.v(),t.a)),t})).then((function(){return Pu(e.i,t,n,s,e.tenantId)})).o((function(t){if(a=t,e.ga)return Fl(e.ga);throw a})).then((function(){if(a)throw a})),Cl(e,i,o)}function Il(e){if(!e.i||!e.P){if(e.i&&!e.P)throw new O("internal-error");throw new O("auth-domain-config-required")}}function Cl(e,t,n){var i=function(e,t,n){return e.h&&!n?(t.cancel(),Et(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Vu("userInvalidated")),e.h=t),t}))}(e,t,n);return e.N.push(i),i.ma((function(){V(e.N,i)})),i.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=Uu(t.v(),rl(e),w(e.hc,e))),n||t}))}function Nl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Us]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var i=new il(t,n,e);return e.providerData&&G(e.providerData,(function(e){e&&bl(i,Xi(e))})),e.redirectEventId&&(i.fa=e.redirectEventId),i}function Tl(e){this.a=e,this.b=qc()}Mu.prototype.Pc=function(e){var t=this;return e.ob(this.a.b,this.c).then((function(e){var n=me(t.f);return delete n[Lu],delete n[qu],fe(n,e),t.g(n)}))},S(Gu,O),zu.prototype.ob=function(e,t,n){return t.type==na?function(e,t,n,i){return n.Fa().then((function(n){return n={idToken:n},void 0!==i&&(n.displayName=i),fe(n,{phoneVerificationInfo:Na(e.a)}),Yr(t,wr,n)}))}(this,e,t,n):function(e,t,n){return n.Fa().then((function(n){return fe(n={mfaPendingCredential:n},{phoneVerificationInfo:Na(e.a)}),Yr(t,kr,n)}))}(this,e,t)},S(Yu,zu),S(Xu,Yu),S(Vu,Vt),(e=Ju.prototype).wc=function(e){Qu(this,function(e){var t=[];return G(e.mfaInfo||[],(function(e){(e=Qi(e))&&t.push(e)})),t}(e.ed))},e.Ob=function(){return this.a.I().then((function(e){return new ta(e,null)}))},e.dc=function(e,t){var n=this,i=this.a.a;return this.Ob().then((function(n){return e.ob(i,n,t)})).then((function(e){return kl(n.a,e),n.a.reload()}))},e.$c=function(e){var t=this,n="string"==typeof e?e:e.uid,i=this.a.a;return this.a.I().then((function(e){return Yr(i,zr,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var i=U(t.b,(function(e){return e.uid!=n}));return Qu(t,i),kl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.v=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(e){return e.v()}))}}},Ku.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=Sn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=c.document,t=null;return Hi()||!e?Pt():new vt((function(n){t=function(){Hi()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).o((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},Ku.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},$u.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Zu(this)}},$u.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Et(new O("user-token-expired")):e||!this.b||j()>Zu(this)-3e4?this.a?function(e,t){return function(e,t){return new vt((function(n,i){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Ks(e,e.u+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?i(Vr(e)):e.access_token&&e.refresh_token?n(e):i(new O("internal-error")):i(new O("network-request-failed"))}),"POST",Jn(t).toString(),e.g,e.m.get()):i(new O("internal-error"))}))}(e.c,t).then((function(t){return e.b=Wo(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Pt(null):Pt({accessToken:this.b.toString(),refreshToken:this.a})},tl.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(il,vn),il.prototype.va=function(e){this.oa=e,Js(this.a,e)},il.prototype.ja=function(){return this.oa},il.prototype.Ea=function(){return K(this.W)},il.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},zi(il.prototype,"providerId","firebase"),(e=il.prototype).reload=function(){var e=this;return Cl(this,gl(this).then((function(){return wl(e).then((function(){return hl(e)})).then(ml)})))},e.mc=function(e){return this.I(e).then((function(e){return new Wu(e)}))},e.I=function(e){var t=this;return Cl(this,gl(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new O("internal-error");return e.accessToken!=t.xa&&(ll(t,e.accessToken),t.dispatchEvent(new Vu("tokenChanged"))),vl(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Ic=function(e){if(!(e=e.users)||!e.length)throw new O("internal-error");pl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?z(e,(function(e){return new nl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)bl(this,t[n]);vl(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Vu("userReloaded",{ed:e}))},e.Jc=function(e){return Gi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(e)},e.pb=function(e){var t=this,n=null;return Cl(this,e.c(this.a,this.uid).then((function(e){return kl(t,e),n=Sl(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.Ac=function(e){return Gi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(e)},e.mb=function(e){var t=this,n=null;return Cl(this,jl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Sl(t,e,"link"),Ol(t,e)})).then((function(){return n})))},e.Bc=function(e,t){var n=this;return Cl(this,jl(this,"phone").then((function(){return Hu(rl(n),e,t,w(n.mb,n))})))},e.Kc=function(e,t){var n=this;return Cl(this,Pt().then((function(){return Hu(rl(n),e,t,w(n.pb,n))})),!0)},e.xb=function(e){var t=this;return Cl(this,this.I().then((function(n){return t.a.xb(n,e)})).then((function(e){return kl(t,e),t.reload()})))},e.cd=function(e){var t=this;return Cl(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return kl(t,e),t.reload()})))},e.yb=function(e){var t=this;return Cl(this,this.I().then((function(n){return t.a.yb(n,e)})).then((function(e){return kl(t,e),t.reload()})))},e.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return gl(this);var t=this;return Cl(this,this.I().then((function(n){return t.a.zb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return kl(t,e),vl(t,"displayName",e.displayName||null),vl(t,"photoURL",e.photoUrl||null),G(t.providerData,(function(e){"password"===e.providerId&&(zi(e,"displayName",t.displayName),zi(e,"photoURL",t.photoURL))})),hl(t)})).then(ml))},e.ad=function(e){var t=this;return Cl(this,wl(this).then((function(n){return X(fl(t),e)?function(e,t,n){return Yr(e,yr,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return G(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),G(fl(t),(function(e){n[e]||yl(t,e)})),n[Ta.PROVIDER_ID]||zi(t,"phoneNumber",null),hl(t)})):hl(t).then((function(){throw new O("no-such-provider")}))})))},e.delete=function(){var e=this;return Cl(this,this.I().then((function(t){return Yr(e.a,br,{idToken:t})})).then((function(){e.dispatchEvent(new Vu("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");ol(e,null),sl(e,null),e.N=[],e.D=!0,ul(e),zi(e,"refreshToken",null),e.i&&wu(e.i,e)}))},e.Cb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.fa||null)==t||"reauthViaRedirect"==e&&(this.fa||null)==t)},e.la=function(e,t,n,i){"linkViaPopup"!=e&&"reauthViaPopup"!=e||i!=(this.g||null)||(n&&this.w?this.w(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?w(this.Hb,this):"reauthViaPopup"==e&&t==(this.g||null)?w(this.Ib,this):"linkViaRedirect"==e&&(this.fa||null)==t?w(this.Hb,this):"reauthViaRedirect"==e&&(this.fa||null)==t?w(this.Ib,this):null},e.Cc=function(e){var t=this;return Pl(this,"linkViaPopup",e,(function(){return jl(t,e.providerId).then((function(){return hl(t)}))}),!1)},e.Lc=function(e){return Pl(this,"reauthViaPopup",e,(function(){return Pt()}),!0)},e.Dc=function(e){var t=this;return El(this,"linkViaRedirect",e,(function(){return jl(t,e.providerId)}),!1)},e.Mc=function(e){return El(this,"reauthViaRedirect",e,(function(){return Pt()}),!0)},e.Hb=function(e,t,n,i){var o=this;this.c&&(this.c.cancel(),this.c=null);var a=null;return Cl(this,this.I().then((function(n){return lr(o.a,{requestUri:e,postBody:i,sessionId:t,idToken:n})})).then((function(e){return a=Sl(o,e,"link"),Ol(o,e)})).then((function(){return a})))},e.Ib=function(e,t,n,i){var o=this;this.c&&(this.c.cancel(),this.c=null);var a=null;return Cl(this,Pt().then((function(){return aa(hr(o.a,{requestUri:e,sessionId:t,postBody:i,tenantId:n}),o.uid)})).then((function(e){return a=Sl(o,e,"reauthenticate"),kl(o,e),o.h=null,o.reload()})).then((function(){return a})),!0)},e.qb=function(e){var t=this,n=null;return Cl(this,this.I().then((function(t){return n=t,void 0===e||pe(e)?{}:xo(new Po(e))})).then((function(e){return t.a.qb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Ab=function(e,t){var n=this,i=null;return Cl(this,this.I().then((function(e){return i=e,void 0===t||pe(t)?{}:xo(new Po(t))})).then((function(t){return n.a.Ab(i,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.hc=function(e){var t=null,n=this;return Cl(this,e=aa(Pt(e),n.uid).then((function(e){return t=Sl(n,e,"reauthenticate"),kl(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&fe(e,this.metadata.v()),G(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),fe(e,this.O.v()),e};var Rl={name:"redirectUser",F:"session"};function Fl(e){return zc(e.b,Rl,e.a)}function Al(e){this.a=e,this.b=qc(),this.c=null,this.f=function(e){var t=Bl("local"),n=Bl("session"),i=Bl("none");return function(e,t,n){var i=Uc(t,n),o=Gc(e,t.F);return e.get(t,n).then((function(a){var s=null;try{s=Fi(c.localStorage.getItem(i))}catch(r){}if(s&&!a)return c.localStorage.removeItem(i),e.set(t,s,n);s&&a&&"localStorage"!=o.type&&c.localStorage.removeItem(i)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(o){return o?n:e.b.get(i,e.a).then((function(n){return n?i:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(xl,e.a).then((function(e){return e?Bl(e):t}))}))}))})).then((function(t){return e.c=t,Dl(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(Bl("local"),this.a,w(this.g,this))}function Dl(e,t){var n,i=[];for(n in Mc)Mc[n]!==t&&i.push(zc(e.b,Bl(Mc[n]),e.a));return i.push(zc(e.b,xl,e.a)),function(e){return new vt((function(t,n){var i=e.length,o=[];if(i)for(var a=function(e,n){i--,o[e]=n,0==i&&t(o)},s=function(e){n(e)},r=0;r<e.length;r++)It(e[r],k(a,r),s);else t(o)}))}(i)}Al.prototype.g=function(){var e=this,t=Bl("local");Ll(this,(function(){return Pt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Dl(e,"local").then((function(){e.c=t}))}))}))};var xl={name:"persistence",F:"session"};function Bl(e){return{name:"authUser",F:e}}function Hl(e,t){return Ll(e,(function(){return e.b.set(e.c,t.v(),e.a)}))}function Wl(e){return Ll(e,(function(){return zc(e.b,e.c,e.a)}))}function Ml(e,t){return Ll(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Nl(e||{})}))}))}function Ll(e,t){return e.f=e.f.then(t,t),e.f}function ql(e){if(this.l=!1,zi(this,"settings",new xu),zi(this,"app",e),!Jl(this).options||!Jl(this).options.apiKey)throw new O("invalid-api-key");e=t.SDK_VERSION?ji(t.SDK_VERSION):null,this.b=new qs(Jl(this).options&&Jl(this).options.apiKey,T(E),e),this.P=[],this.m=[],this.O=[],this.$b=t.INTERNAL.createSubscribe(w(this.xc,this)),this.W=void 0,this.ac=t.INTERNAL.createSubscribe(w(this.yc,this)),Xl(this,null),this.i=new Al(Jl(this).options.apiKey+":"+Jl(this).name),this.B=new Tl(Jl(this).options.apiKey+":"+Jl(this).name),this.Z=Zl(this,function(e){var t=Jl(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(Rl,e.a).then((function(e){return e&&t&&(e.authDomain=t),Nl(e||{})}))}(e.B,Jl(e).options.authDomain).then((function(t){return(e.D=t)&&(t.ga=e.B),Fl(e.B)}));return Zl(e,t)}(e).then((function(){return Ml(e.i,t)})).then((function(t){return t?(t.ga=e.B,e.D&&(e.D.fa||null)==(t.fa||null)?t:t.reload().then((function(){return Hl(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Wl(e.i)}))):null})).then((function(t){Xl(e,t||null)}));return Zl(e,n)}(this)),this.h=Zl(this,function(e){return e.Z.then((function(){return Yl(e)})).o((function(){})).then((function(){if(!e.l)return e.oa()})).o((function(){})).then((function(){if(!e.l){e.aa=!0;var t=e.i;t.b.addListener(Bl("local"),t.a,e.oa)}}))}(this)),this.aa=!1,this.oa=w(this.Xc,this),this.Ma=w(this.ca,this),this.xa=w(this.jc,this),this.ya=w(this.uc,this),this.za=w(this.vc,this),this.a=null,function(e){var t=Jl(e).options.authDomain,n=Jl(e).options.apiKey;t&&Ei()&&(e.Zb=e.Z.then((function(){if(!e.l){if(e.a=Cu(t,n,Jl(e).name),_u(e.a,e),Ql(e)&&dl(Ql(e)),e.D){dl(e.D);var i=e.D;i.va(e.ja()),ol(i,e),al(i=e.D,e.N),sl(i,e),e.D=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Ec,this),this.s=0,vn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ja()},set:function(e){this.va(e)},enumerable:!1}),e.$=null,Object.defineProperty(e,"ti",{get:function(){return this.S()},set:function(e){this.ub(e)},enumerable:!1}),e.R=null}(this),this.N=[]}function Gl(e){Vt.call(this,"languageCodeChanged"),this.g=e}function Ul(e){Vt.call(this,"frameworkChanged"),this.c=e}function zl(e){return e.Zb||Et(new O("auth-domain-config-required"))}function Yl(e){if(!Ei())return Et(new O("operation-not-supported-in-this-environment"));var t=zl(e).then((function(){return e.a.pa()})).then((function(e){return e?Xi(e):null}));return Zl(e,t)}function Xl(e,t){Ql(e)&&(function(e,t){J(e.R,(function(e){return e==t}))}(Ql(e),e.Ma),ln(Ql(e),"tokenChanged",e.xa),ln(Ql(e),"userDeleted",e.ya),ln(Ql(e),"userInvalidated",e.za),ul(Ql(e))),t&&(t.R.push(e.Ma),rn(t,"tokenChanged",e.xa),rn(t,"userDeleted",e.ya),rn(t,"userInvalidated",e.za),0<e.s&&cl(t)),zi(e,"currentUser",t),t&&(t.va(e.ja()),ol(t,e),al(t,e.N),sl(t,e))}function Vl(e,t){var n=null,i=null;return Zl(e,t.then((function(t){return n=Fa(t),i=zo(t),function(e,t){var n={};return n.apiKey=Jl(e).options.apiKey,n.authDomain=Jl(e).options.authDomain,n.appName=Jl(e).name,e.Z.then((function(){return function(e,t,n,i){var o=new il(e,t);return n&&(o.ga=n),i&&al(o,i),o.reload().then((function(){return o}))}(n,t,e.B,e.Ea())})).then((function(t){return Ql(e)&&t.uid==Ql(e).uid?(_l(Ql(e),t),e.ca(t)):(Xl(e,t),dl(t),e.ca(t))})).then((function(){$l(e)}))}(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=Uu(t.v(),e,w(e.ic,e))),n||t})).then((function(){return Xi({user:Ql(e),credential:n,additionalUserInfo:i,operationType:"signIn"})})))}function Jl(e){return e.app}function Ql(e){return e.currentUser}function Kl(e){return Ql(e)&&Ql(e)._lat||null}function $l(e){if(e.aa){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Kl(e));if(e.W!==e.getUid()&&e.O.length)for(e.W=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](Kl(e))}}function Zl(e,t){return e.P.push(t),t.ma((function(){V(e.P,t)})),t}function eh(){}function th(){this.a={},this.b=1e12}Al.prototype.tb=function(e){var t=null,n=this;return function(e){var t=new O("invalid-persistence-type"),n=new O("unsupported-persistence-type");e:{for(i in Mc)if(Mc[i]==e){var i=!0;break e}i=!1}if(!i||"string"!=typeof e)throw t;switch(yi()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!vc()&&"none"!==e)throw n;break;default:if(!Pi()&&"none"!==e)throw n}}(e),Ll(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(i){return t=i,Dl(n,e)})).then((function(){if(n.c=Bl(e),t)return n.b.set(n.c,t,n.a)})):Pt()}))},S(ql,vn),S(Gl,Vt),S(Ul,Vt),(e=ql.prototype).tb=function(e){return Zl(this,e=this.i.tb(e))},e.va=function(e){this.$===e||this.l||(this.$=e,Js(this.b,this.$),this.dispatchEvent(new Gl(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var e=c.navigator;this.va(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.Ec=function(e){this.N.push(e),Qs(this.b,t.SDK_VERSION?ji(t.SDK_VERSION,this.N):null),this.dispatchEvent(new Ul(this.N))},e.Ea=function(){return K(this.N)},e.ub=function(e){this.R===e||this.l||(this.R=e,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:Jl(this).options.apiKey,authDomain:Jl(this).options.authDomain,appName:Jl(this).name,currentUser:Ql(this)&&Ql(this).v()}},e.Cb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.la=function(e,t,n,i){"signInViaPopup"==e&&this.g==i&&(n&&this.w?this.w(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?w(this.gc,this):null},e.gc=function(e,t,n,i){var o=this,a={requestUri:e,postBody:i,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),o.Z.then((function(){return Vl(o,ur(o.b,a))}))},e.Vc=function(e){if(!Ei())return Et(new O("operation-not-supported-in-this-environment"));var n=this,i=Uo(e.providerId),o=Ai(),a=null;(!Ni()||fi())&&Jl(this).options.authDomain&&e.isOAuthProvider&&(a=rc(Jl(this).options.authDomain,Jl(this).options.apiKey,Jl(this).name,"signInViaPopup",e,null,o,t.SDK_VERSION||null,null,null,this.S()));var s=hi(a,i&&i.ta,i&&i.sa);return Zl(this,i=zl(this).then((function(t){return Su(t,s,"signInViaPopup",e,o,!!a,n.S())})).then((function(){return new vt((function(e,t){n.la("signInViaPopup",null,new O("cancelled-popup-request"),n.g),n.f=e,n.w=t,n.g=o,n.c=Eu(n.a,n,"signInViaPopup",s,o)}))})).then((function(e){return s&&li(s),e?Xi(e):null})).o((function(e){throw s&&li(s),e})))},e.Wc=function(e){if(!Ei())return Et(new O("operation-not-supported-in-this-environment"));var t=this;return Zl(this,zl(this).then((function(){return function(e){return Ll(e,(function(){return e.b.set(xl,e.c.F,e.a)}))}(t.i)})).then((function(){return Pu(t.a,"signInViaRedirect",e,void 0,t.S())})))},e.pa=function(){var e=this;return Yl(this).then((function(t){return e.a&&Ru(e.a.b),t})).o((function(t){throw e.a&&Ru(e.a.b),t}))},e.bd=function(e){if(!e)return Et(new O("null-user"));if(this.R!=e.tenantId)return Et(new O("tenant-id-mismatch"));var t=this,n={};n.apiKey=Jl(this).options.apiKey,n.authDomain=Jl(this).options.authDomain,n.appName=Jl(this).name;var i=function(e,t,n,i){var o=e.b,a={};return a[Us]=o.b&&o.b.toString(),a.refreshToken=o.a,t=new il(t||{apiKey:e.l,authDomain:e.s,appName:e.m},a),n&&(t.ga=n),i&&al(t,i),_l(t,e),t}(e,n,t.B,t.Ea());return Zl(this,this.h.then((function(){if(Jl(t).options.apiKey!=e.l)return i.reload()})).then((function(){return Ql(t)&&e.uid==Ql(t).uid?(_l(Ql(t),e),t.ca(e)):(Xl(t,i),dl(i),t.ca(i))})).then((function(){$l(t)})))},e.wb=function(){var e=this;return Zl(this,this.h.then((function(){return e.a&&Ru(e.a.b),Ql(e)?(Xl(e,null),Wl(e.i).then((function(){$l(e)}))):Pt()})))},e.Xc=function(){var e=this;return Ml(this.i,Jl(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Ql(e)&&t){n=Ql(e).uid;var i=t.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return _l(Ql(e),t),Ql(e).I();(Ql(e)||t)&&(Xl(e,t),t&&(dl(t),t.ga=e.B),e.a&&_u(e.a,e),$l(e))}}))},e.ca=function(e){return Hl(this.i,e)},e.jc=function(){$l(this),this.ca(Ql(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(e){var t=this;return this.h.then((function(){return Vl(t,Pt(e))}))},e.xc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Ql(t))}))},e.yc=function(e){var t=this;!function(e,t){e.O.push(t),Zl(e,e.h.then((function(){!e.l&&X(e.O,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(Kl(e)))})))}(this,(function(){e.next(Ql(t))}))},e.Gc=function(e,t,n){var i=this;return this.aa&&Promise.resolve().then((function(){"function"==typeof e?e(Ql(i)):"function"==typeof e.next&&e.next(Ql(i))})),this.$b(e,t,n)},e.Fc=function(e,t,n){var i=this;return this.aa&&Promise.resolve().then((function(){i.W=i.getUid(),"function"==typeof e?e(Ql(i)):"function"==typeof e.next&&e.next(Ql(i))})),this.ac(e,t,n)},e.kc=function(e){var t=this;return Zl(this,this.h.then((function(){return Ql(t)?Ql(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Rc=function(e){var t=this;return this.h.then((function(){return Vl(t,Yr(t.b,Mr,{token:e}))})).then((function(e){var n=e.user;return vl(n,"isAnonymous",!1),t.ca(n),e}))},e.Sc=function(e,t){var n=this;return this.h.then((function(){return Vl(n,Yr(n.b,Lr,{email:e,password:t}))}))},e.cc=function(e,t){var n=this;return this.h.then((function(){return Vl(n,Yr(n.b,gr,{email:e,password:t}))}))},e.Ya=function(e){var t=this;return this.h.then((function(){return Vl(t,e.ia(t.b))}))},e.Qc=function(e){return Gi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(e)},e.vb=function(){var e=this;return this.h.then((function(){var t=Ql(e);if(t&&t.isAnonymous){var n=Xi({providerId:null,isNewUser:!1});return Xi({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Vl(e,e.b.vb()).then((function(t){var n=t.user;return vl(n,"isAnonymous",!0),e.ca(n),t}))}))},e.getUid=function(){return Ql(this)&&Ql(this).uid||null},e.bc=function(e){this.addAuthTokenListener(e),this.s++,0<this.s&&Ql(this)&&cl(Ql(this))},e.Nc=function(e){var t=this;G(this.m,(function(n){n==e&&t.s--})),0>this.s&&(this.s=0),0==this.s&&Ql(this)&&ul(Ql(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Zl(this,this.h.then((function(){t.l||X(t.m,e)&&e(Kl(t))})))},e.removeAuthTokenListener=function(e){J(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(Bl("local"),e.a,this.oa),this.a&&(wu(this.a,this),Ru(this.a.b)),Promise.resolve()},e.fc=function(e){return Zl(this,function(e,t){return Yr(e,fr,{identifier:t,continueUri:Ii()?ri():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.zc=function(e){return!!Ea(e)},e.sb=function(e,t){var n=this;return Zl(this,Pt().then((function(){var e=new Po(t);if(!e.c)throw new O("argument-error",Co+" must be true when sending sign in link to email");return xo(e)})).then((function(t){return n.b.sb(e,t)})).then((function(){})))},e.fd=function(e){return this.Pa(e).then((function(e){return e.data.email}))},e.jb=function(e,t){return Zl(this,this.b.jb(e,t).then((function(){})))},e.Pa=function(e){return Zl(this,this.b.Pa(e).then((function(e){return new no(e)})))},e.fb=function(e){return Zl(this,this.b.fb(e).then((function(){})))},e.rb=function(e,t){var n=this;return Zl(this,Pt().then((function(){return void 0===t||pe(t)?{}:xo(new Po(t))})).then((function(t){return n.b.rb(e,t)})).then((function(){})))},e.Uc=function(e,t){return Zl(this,Hu(this,e,t,w(this.Ya,this)))},e.Tc=function(e,t){var n=this;return Zl(this,Pt().then((function(){var i=t||ri(),o=Pa(e,i);if(!(i=Ea(i)))throw new O("argument-error","Invalid email link!");if(i.tenantId!==n.S())throw new O("tenant-id-mismatch");return n.Ya(o)})))},eh.prototype.render=function(){},eh.prototype.reset=function(){},eh.prototype.getResponse=function(){},eh.prototype.execute=function(){};var nh=null;function ih(e,t){return(t=oh(t))&&e.a[t]||null}function oh(e){return(e=void 0===e?1e12:e)?e.toString():null}function ah(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=st(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():rn(this.f,"click",this.i)}function sh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function rh(){}function ch(){}th.prototype.render=function(e,t){return this.a[this.b.toString()]=new ah(e,t),this.b++},th.prototype.reset=function(e){var t=ih(this,e);e=oh(e),t&&e&&(t.delete(),delete this.a[e])},th.prototype.getResponse=function(e){return(e=ih(this,e))?e.getResponse():null},th.prototype.execute=function(e){(e=ih(this,e))&&e.execute()},ah.prototype.getResponse=function(){return sh(this),this.b},ah.prototype.execute=function(){sh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(i){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(i){}e.h&&e.execute()}),6e4)}),500))},ah.prototype.delete=function(){sh(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},zi(rh,"FACTOR_ID","phone"),ch.prototype.g=function(){return nh||(nh=new th),Pt(nh)},ch.prototype.c=function(){};var uh=null;function lh(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var hh=new ye(we,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),dh=new Bi(3e4,6e4);lh.prototype.g=function(e){var t=this;return new vt((function(n,i){var o=setTimeout((function(){i(new O("network-request-failed"))}),dh.get());!c.grecaptcha||e!==t.f&&!t.b?(c[t.a]=function(){if(c.grecaptcha){t.f=e;var a=c.grecaptcha.render;c.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(o),n(c.grecaptcha)}else clearTimeout(o),i(new O("internal-error"));delete c[t.a]},Pt(Ds(Oe(hh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(o),i(new O("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(o),n(c.grecaptcha))}))},lh.prototype.c=function(){this.b--};var ph=null;function mh(e,t,n,i,o,a,s){if(zi(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=t,this.g=null,s?(uh||(uh=new ch),s=uh):(ph||(ph=new lh),s=ph),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[bh])throw new O("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[yh],!c.document)throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!st(t)||!this.i&&st(t).hasChildNodes())throw new O("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qs(e,a||null,o||null),this.w=i||function(){return null};var r=this;this.l=[];var u=this.a[gh];this.a[gh]=function(e){if(vh(r,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=Oi(u,c);"function"==typeof t&&t(e)}};var l=this.a[fh];this.a[fh]=function(){if(vh(r,null),"function"==typeof l)l();else if("string"==typeof l){var e=Oi(l,c);"function"==typeof e&&e()}}}var gh="callback",fh="expired-callback",bh="sitekey",yh="size";function vh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(i){}}function _h(e,t){return e.h.push(t),t.ma((function(){V(e.h,t)})),t}function wh(e){if(e.D)throw new O("internal-error","RecaptchaVerifier instance has been destroyed.")}function kh(e,n,i){var o=!1;try{this.b=i||t.app()}catch(r){throw new O("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new O("invalid-api-key");i=this.b.options.apiKey;var a=this,s=null;try{s=this.b.auth().Ea()}catch(r){}try{o=this.b.auth().settings.appVerificationDisabledForTesting}catch(r){}s=t.SDK_VERSION?ji(t.SDK_VERSION,s):null,mh.call(this,i,e,n,(function(){try{var e=a.b.auth().ja()}catch(t){e=null}return e}),s,T(E),o)}function jh(e,t,n,i){e:{n=Array.prototype.slice.call(n);for(var o=0,a=!1,s=0;s<t.length;s++)if(t[s].optional)a=!0;else{if(a)throw new O("internal-error","Argument validator encountered a required argument after an optional argument.");o++}if(a=t.length,n.length<o||a<n.length)i="Expected "+(o==a?1==o?"1 argument":o+" arguments":o+"-"+a+" arguments")+" but got "+n.length+".";else{for(o=0;o<n.length;o++)if(a=t[o].optional&&void 0===n[o],!t[o].K(n[o])&&!a){if(t=t[o],0>o||o>=Sh.length)throw new O("internal-error","Argument validator received an unsupported number of arguments.");n=Sh[o],i=(i?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.J+".";break e}i=null}}if(i)throw new O("argument-error",e+" failed: "+i)}(e=mh.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=_h(this,Pt().then((function(){if(Ii()&&!bi())return mi();throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.w())})).then((function(t){return e.g=t,Yr(e.s,Cr,{})})).then((function(t){e.a[bh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){wh(this);var e=this;return _h(this,this.Ga().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=st(t);t=function(e,t,n){var i=arguments,o=document,a=String(i[0]),s=i[1];if(!at&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',qe(s.name),'"'),s.type){a.push(' type="',qe(s.type),'"');var r={};fe(r,s),delete r.type,s=r}a.push(">"),a=a.join("")}return a=dt(o,a),s&&("string"==typeof s?a.className=s:Array.isArray(s)?a.className=s.join(" "):rt(a,s)),2<i.length&&ht(o,a,i),a}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){wh(this);var e=this;return _h(this,this.render().then((function(t){return new vt((function(n){var i=e.g.getResponse(t);if(i)n(i);else{e.l.push((function t(i){i&&(function(e,t){J(e.l,(function(e){return e==t}))}(e,t),n(i))})),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){wh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){wh(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=st(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},S(kh,mh);var Sh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Oh(e,t){return{name:e||"",J:"a valid string",optional:!!t,K:function(e){return"string"==typeof e}}}function Ph(e,t){return{name:e||"",J:"a boolean",optional:!!t,K:function(e){return"boolean"==typeof e}}}function Eh(e,t){return{name:e||"",J:"a valid object",optional:!!t,K:g}}function Ih(e,t){return{name:e||"",J:"a function",optional:!!t,K:function(e){return"function"==typeof e}}}function Ch(e,t){return{name:e||"",J:"null",optional:!!t,K:function(e){return null===e}}}function Nh(e){return{name:e?e+"Credential":"credential",J:e?"a valid "+e+" credential":"a valid credential",optional:!1,K:function(t){return!!t&&!(!t.ia||e&&t.providerId!==e)}}}function Th(e,t){return g(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Fa}function Rh(e){return g(e)&&"string"==typeof e.uid}function Fh(e,t,n,i){return{name:n||"",J:e.J+" or "+t.J,optional:!!i,K:function(n){return e.K(n)||t.K(n)}}}function Ah(e,t){for(var n in t){var i=t[n].name;e[i]=Bh(i,e[n],t[n].j)}}function Dh(e,t){for(var n in t){var i=t[n].name;i!==n&&Object.defineProperty(e,i,{get:k((function(e){return this[e]}),n),set:k((function(e,t,n,i){jh(e,[n],[i],!0),this[t]=i}),i,n,t[n].gb),enumerable:!0})}}function xh(e,t,n,i){e[t]=Bh(t,n,i)}function Bh(e,t,n){function i(){var e=Array.prototype.slice.call(arguments);return jh(a,n,e),t.apply(this,e)}if(!n)return t;var o,a=function(e){return(e=e.split("."))[e.length-1]}(e);for(o in t)i[o]=t[o];for(o in t.prototype)i.prototype[o]=t.prototype[o];return i}Ah(ql.prototype,{fb:{name:"applyActionCode",j:[Oh("code")]},Pa:{name:"checkActionCode",j:[Oh("code")]},jb:{name:"confirmPasswordReset",j:[Oh("code"),Oh("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Oh("email"),Oh("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Oh("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Oh("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Fh(Eh(),Ih(),"nextOrObserver"),Ih("opt_error",!0),Ih("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Fh(Eh(),Ih(),"nextOrObserver"),Ih("opt_error",!0),Ih("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Oh("email"),Fh(Eh("opt_actionCodeSettings",!0),Ch(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Oh("email"),Eh("actionCodeSettings")]},tb:{name:"setPersistence",j:[Oh("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Nh()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Nh()]},Rc:{name:"signInWithCustomToken",j:[Oh("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Oh("email"),Oh("password")]},Tc:{name:"signInWithEmailLink",j:[Oh("email"),Oh("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Oh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Fh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(e){return!!(e&&e instanceof il)}},Ch(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Oh(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Oh("code")]}}),Dh(ql.prototype,{lc:{name:"languageCode",gb:Fh(Oh(),Ch(),"languageCode")},ti:{name:"tenantId",gb:Fh(Oh(),Ch(),"tenantId")}}),(ql.Persistence=Mc).LOCAL="local",ql.Persistence.SESSION="session",ql.Persistence.NONE="none",Ah(il.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Ph("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ph("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Nh()]},mb:{name:"linkWithCredential",j:[Nh()]},Bc:{name:"linkWithPhoneNumber",j:[Oh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Nh()]},pb:{name:"reauthenticateWithCredential",j:[Nh()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Oh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Fh(Eh("opt_actionCodeSettings",!0),Ch(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Oh(null,!0)]},ad:{name:"unlink",j:[Oh("provider")]},xb:{name:"updateEmail",j:[Oh("email")]},yb:{name:"updatePassword",j:[Oh("password")]},cd:{name:"updatePhoneNumber",j:[Nh("phone")]},zb:{name:"updateProfile",j:[Eh("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Oh("email"),Fh(Eh("opt_actionCodeSettings",!0),Ch(null,!0),"opt_actionCodeSettings",!0)]}}),Ah(th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ah(eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ah(vt.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Dh(xu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Ph("appVerificationDisabledForTesting")}}),Ah(Bu.prototype,{confirm:{name:"confirm",j:[Oh("verificationCode")]}}),xh(oa,"fromJSON",(function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[ha,Sa,Ca,ca],i=0;i<n.length;i++)if(t=n[i](e))return t;return null}),[Fh(Oh(),Eh(),"json")]),xh(Oa,"credential",(function(e,t){return new ja(e,t)}),[Oh("email"),Oh("password")]),Ah(ja.prototype,{v:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(ga.prototype,{Aa:{name:"addScope",j:[Oh("scope")]},Ia:{name:"setCustomParameters",j:[Eh("customOAuthParameters")]}}),xh(ga,"credential",fa,[Fh(Oh(),Eh(),"token")]),xh(Oa,"credentialWithLink",Pa,[Oh("email"),Oh("emailLink")]),Ah(ba.prototype,{Aa:{name:"addScope",j:[Oh("scope")]},Ia:{name:"setCustomParameters",j:[Eh("customOAuthParameters")]}}),xh(ba,"credential",ya,[Fh(Oh(),Eh(),"token")]),Ah(va.prototype,{Aa:{name:"addScope",j:[Oh("scope")]},Ia:{name:"setCustomParameters",j:[Eh("customOAuthParameters")]}}),xh(va,"credential",_a,[Fh(Oh(),Fh(Eh(),Ch()),"idToken"),Fh(Oh(),Ch(),"accessToken",!0)]),Ah(wa.prototype,{Ia:{name:"setCustomParameters",j:[Eh("customOAuthParameters")]}}),xh(wa,"credential",ka,[Fh(Oh(),Eh(),"token"),Oh("secret",!0)]),Ah(ma.prototype,{Aa:{name:"addScope",j:[Oh("scope")]},credential:{name:"credential",j:[Fh(Oh(),Fh(Eh(),Ch()),"optionsOrIdToken"),Fh(Oh(),Ch(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Eh("customOAuthParameters")]}}),Ah(ua.prototype,{v:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(sa.prototype,{v:{name:"toJSON",j:[Oh(null,!0)]}}),xh(Ta,"credential",Ra,[Oh("verificationId"),Oh("verificationCode")]),Ah(Ta.prototype,{cb:{name:"verifyPhoneNumber",j:[Fh(Oh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(e){return!!e&&(e.session&&e.phoneNumber?Th(e.session,na)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?Th(e.session,ia)&&Rh(e.multiFactorHint):e.session&&e.multiFactorUid?Th(e.session,ia)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]}}),Ah(Ia.prototype,{v:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(O.prototype,{toJSON:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(La.prototype,{toJSON:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(Ma.prototype,{toJSON:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(Gu.prototype,{toJSON:{name:"toJSON",j:[Oh(null,!0)]}}),Ah(Mu.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(e){return!!e&&!!e.ob}}]}}),Ah(Ju.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(e){return!!e&&!!e.ob}},Oh("displayName",!0)]},$c:{name:"unenroll",j:[Fh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Rh},Oh(),"multiFactorInfoIdentifier")]}}),Ah(kh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),xh(bo,"parseLink",Oo,[Oh("link")]),xh(rh,"assertion",(function(e){return new Xu(e)}),[Nh("phone")]),function(){if(void 0===t||!t.INTERNAL||!t.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:oo,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:io,VERIFY_AND_CHANGE_EMAIL:ao,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ql,AuthCredential:oa,Error:O};xh(e,"EmailAuthProvider",Oa,[]),xh(e,"FacebookAuthProvider",ga,[]),xh(e,"GithubAuthProvider",ba,[]),xh(e,"GoogleAuthProvider",va,[]),xh(e,"TwitterAuthProvider",wa,[]),xh(e,"OAuthProvider",ma,[Oh("providerId")]),xh(e,"SAMLAuthProvider",pa,[Oh("providerId")]),xh(e,"PhoneAuthProvider",Ta,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(e){return!!(e&&e instanceof ql)}}]),xh(e,"RecaptchaVerifier",kh,[Fh(Oh(),{name:"",J:"an HTML element",optional:!1,K:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Eh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(e){return!!(e&&e instanceof t.app.App)}}]),xh(e,"ActionCodeURL",bo,[]),xh(e,"PhoneMultiFactorGenerator",rh,[]),t.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ql(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:w((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:w(e.kc,e),addAuthTokenListener:w(e.bc,e),removeAuthTokenListener:w(e.Nc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.registerVersion("@firebase/auth","0.14.9"),t.INTERNAL.extendNamespace({User:il})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},NSPt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=(i=n("wj3C"))&&"object"==typeof i&&"default"in i?i.default:i,s=n("mrSG"),r=n("zVF4"),c=n("q/0M"),u=n("S+S0"),l=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),r.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:r.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),h=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return r.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),d=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new l(t)}}catch(n){}return new h},p=d("localStorage"),m=d("sessionStorage"),g=new c.Logger("@firebase/database"),f=(o=1,function(){return o++}),b=function(e){var t=r.stringToByteArray(e),n=new r.Sha1;n.update(t);var i=n.digest();return r.base64.encodeByteArray(i)},y=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i="",o=0;o<t.length;o++){var a=t[o];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?i+=e.apply(null,a):i+="object"==typeof a?r.stringify(a):a,i+=" "}return i},v=null,_=!0,w=function(e,t){r.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(g.logLevel=c.LogLevel.VERBOSE,v=g.log.bind(g),t&&m.set("logging_enabled",!0)):"function"==typeof e?v=e:(v=null,m.remove("logging_enabled"))},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===_&&(_=!1,null===v&&!0===m.get("logging_enabled")&&w(!0)),v){var n=y.apply(null,e);v(n)}},j=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];k.apply(void 0,s.__spread([e],t))}},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,s.__spread(e));g.error(n)},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,s.__spread(e));throw g.error(n),new Error(n)},P=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+y.apply(void 0,s.__spread(e));g.warn(n)},E=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",C="[MAX_NAME]",N=function(e,t){if(e===t)return 0;if(e===I||t===C)return-1;if(t===I||e===C)return 1;var n=V(e),i=V(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1},T=function(e,t){return e===t?0:e<t?-1:1},R=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+r.stringify(t))},F=function e(t){if("object"!=typeof t||null===t)return r.stringify(t);var n=[];for(var i in t)n.push(i);n.sort();for(var o="{",a=0;a<n.length;a++)0!==a&&(o+=","),o+=r.stringify(n[a]),o+=":",o+=e(t[n[a]]);return o+"}"},A=function(e,t){var n=e.length;if(n<=t)return[e];for(var i=[],o=0;o<n;o+=t)i.push(e.substring(o,o+t>n?n:o+t));return i};function D(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var x,B,H,W,M,L,q,G,U,z,Y=function(e){var t,n,i,o,a;r.assert(!E(e),"Invalid JSON number"),0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var c=s.join(""),u="";for(a=0;a<64;a+=8){var l=parseInt(c.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},X=new RegExp("^-?(0*)\\d{1,10}$"),V=function(e){if(X.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},J=function(e){try{e()}catch(t){setTimeout((function(){throw P("Exception was thrown by user callback.",t.stack||""),t}),Math.floor(0))}},Q=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},K=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!1,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(t instanceof e)for(i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{var o=t.split("/");for(i=0;i<o.length;i++)o[i].length>0&&n.push(o[i])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var i=t.getFront(),o=n.getFront();if(null===i)return n;if(i===o)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),i=t.slice(),o=0;o<n.length&&o<i.length;o++){var a=N(n[o],i[o]);if(0!==a)return a}return n.length===i.length?0:n.length<i.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),$=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=r.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=r.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=r.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),Z=function(){function e(e,t,n,i,o,a){void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(r.assert("string"==typeof e,"typeof type must == string"),r.assert("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var i=[];return D(t,(function(e,t){i.push(e+"="+t)})),n+i.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),ee=function(e){var t=te(e),n=t.namespace;return"firebase.com"===t.domain&&O(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===t.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&P("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(t.host,t.secure,n,"ws"===t.scheme||"wss"===t.scheme,"",n!==t.subdomain),path:new K(t.pathString)}},te=function(e){var t="",n="",i="",o="",a="",r=!0,c="https",u=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(c=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(o=function(e){for(var t="",n=e.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(a){}t+="/"+o}return t}(e.substring(h,d)));var p=function(e){var t,n,i={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var o=s.__values(e.split("&")),a=o.next();!a.done;a=o.next()){var r=a.value;if(0!==r.length){var c=r.split("=");2===c.length?i[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):P("Invalid query segment '"+r+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}(e.substring(Math.min(e.length,d)));(l=t.indexOf(":"))>=0?(r="https"===c||"wss"===c,u=parseInt(t.substring(l+1),10)):l=t.length;var m=t.slice(0,l);if("localhost"===m.toLowerCase())n="localhost";else if(m.split(".").length<=2)n=m;else{var g=t.indexOf(".");i=t.substring(0,g).toLowerCase(),n=t.substring(g+1),a=i}"ns"in p&&(a=p.ns)}return{host:t,port:u,domain:n,subdomain:i,secure:r,scheme:c,pathString:o,namespace:a}},ne=/[\[\].#$\/\u0000-\u001F\u007F]/,ie=/[\[\].#$\u0000-\u001F\u007F]/,oe=function(e){return"string"==typeof e&&0!==e.length&&!ne.test(e)},ae=function(e){return"string"==typeof e&&0!==e.length&&!ie.test(e)},se=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!E(e)||e&&"object"==typeof e&&r.contains(e,".sv")},re=function(e,t,n,i,o){o&&void 0===n||ce(r.errorPrefix(e,t,o),n,i)},ce=function e(t,n,i){var o=i instanceof K?new $(i,t):i;if(void 0===n)throw new Error(t+"contains undefined "+o.toErrorString());if("function"==typeof n)throw new Error(t+"contains a function "+o.toErrorString()+" with contents = "+n.toString());if(E(n))throw new Error(t+"contains "+n.toString()+" "+o.toErrorString());if("string"==typeof n&&n.length>10485760/3&&r.stringLength(n)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+o.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var a=!1,s=!1;if(D(n,(function(n,i){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!oe(n)))throw new Error(t+" contains an invalid key ("+n+") "+o.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');o.push(n),e(t,i,o),o.pop()})),a&&s)throw new Error(t+' contains ".value" child '+o.toErrorString()+" in addition to actual children.")}},ue=function(e,t,n,i,o){if(!o||void 0!==n){var a=r.errorPrefix(e,t,o);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];D(n,(function(e,t){var n=new K(e);if(ce(a,t,i.child(n)),".priority"===n.getBack()&&!se(t))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,i;for(n=0;n<t.length;n++)for(var o=(i=t[n]).slice(),a=0;a<o.length;a++)if(".priority"===o[a]&&a===o.length-1);else if(!oe(o[a]))throw new Error(e+"contains an invalid key ("+o[a]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(K.comparePaths);var s=null;for(n=0;n<t.length;n++){if(i=t[n],null!==s&&s.contains(i))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}}(a,s)}},le=function(e,t,n,i){if(!i||void 0!==n){if(E(n))throw new Error(r.errorPrefix(e,t,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!se(n))throw new Error(r.errorPrefix(e,t,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},he=function(e,t,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(r.errorPrefix(e,t,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},de=function(e,t,n,i){if(!(i&&void 0===n||oe(n)))throw new Error(r.errorPrefix(e,t,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pe=function(e,t,n,i){if(!(i&&void 0===n||ae(n)))throw new Error(r.errorPrefix(e,t,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},me=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pe(e,t,n,i)},ge=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},fe=function(e,t,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!oe(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ae(e)}(i))throw new Error(r.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},be=function(e,t,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(r.errorPrefix(e,t,i)+"must be a boolean.")},ye=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new r.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ge("OnDisconnect.remove",this.path_),r.validateCallback("OnDisconnect.remove",1,e,!0);var t=new r.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),ge("OnDisconnect.set",this.path_),re("OnDisconnect.set",1,e,this.path_,!1),r.validateCallback("OnDisconnect.set",2,t,!0);var n=new r.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ge("OnDisconnect.setWithPriority",this.path_),re("OnDisconnect.setWithPriority",1,e,this.path_,!1),le("OnDisconnect.setWithPriority",2,t,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var i=new r.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,i.wrapCallback(n)),i.promise},e.prototype.update=function(e,t){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),ge("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,P("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ue("OnDisconnect.update",1,e,this.path_,!1),r.validateCallback("OnDisconnect.update",2,t,!0);var o=new r.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,o.wrapCallback(t)),o.promise},e}(),ve=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),_e=(x="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",B=0,H=[],function(e){var t,n=e===B;B=e;var i=new Array(8);for(t=7;t>=0;t--)i[t]=x.charAt(e%64),e=Math.floor(e/64);r.assert(0===e,"Cannot push at time == 0");var o=i.join("");if(n){for(t=11;t>=0&&63===H[t];t--)H[t]=0;H[t]++}else for(t=0;t<12;t++)H[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)o+=x.charAt(H[t]);return r.assert(20===o.length,"nextPushId: Length should be 20."),o}),we=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),ke=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new we(I,e),i=new we(I,t);return 0!==this.compare(n,i)},e.prototype.minPost=function(){return we.MIN},e}(),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return W},set:function(e){W=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return N(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw r.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return we.MIN},t.prototype.maxPost=function(){return new we(C,W)},t.prototype.makePost=function(e,t){return r.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new we(e,W)},t.prototype.toString=function(){return".key"},t}(ke),Se=new je,Oe=function(e){return"number"==typeof e?"number:"+Y(e):"string:"+e},Pe=function(e){if(e.isLeafNode()){var t=e.val();r.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&r.contains(t,".sv"),"Priority must be a string or number.")}else r.assert(e===M||e.isEmpty(),"priority of unexpected type.");r.assert(e===M||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ee=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,r.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Pe(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return L},set:function(e){L=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var i=t.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(r.assert(".priority"!==i||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Oe(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Y(this.value_):this.value_,this.lazyHash_=b(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(r.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(i);return r.assert(o>=0,"Unknown leaf type: "+n),r.assert(a>=0,"Unknown leaf type: "+i),o===a?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Ie=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),i=t.node.getPriority(),o=n.compareTo(i);return 0===o?N(e.name,t.name):o},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return we.MIN},t.prototype.maxPost=function(){return new we(C,new Ee("[PRIORITY-POST]",G))},t.prototype.makePost=function(e,t){var n=q(e);return new we(t,new Ee("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(ke)),Ce=function(){function e(e,t,n,i,o){void 0===o&&(o=null),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!e.isEmpty();)if(e=e,a=t?n(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Ne=function(){function e(t,n,i,o,a){this.key=t,this.value=n,this.color=null!=i?i:e.RED,this.left=null!=o?o:Re.EMPTY_NODE,this.right=null!=a?a:Re.EMPTY_NODE}return e.prototype.copy=function(t,n,i,o,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=a?a:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var i=this,o=n(e,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Re.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,i;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Re.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Te=function(){function e(){}return e.prototype.copy=function(e,t,n,i,o){return this},e.prototype.insert=function(e,t,n){return new Ne(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Re=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ne.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ne.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,i=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Ce(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Ce(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Ce(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Ce(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Te,e}(),Fe=Math.log(2),Ae=function(){function e(e){this.count=parseInt(Math.log(e+1)/Fe,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),De=function(e,t,n,i){e.sort(t);var o=function(t){for(var i=null,o=null,a=e.length,s=function(t,i){var o=a-t,s=a;a-=t;var c=function t(i,o){var a,s,r=o-i;if(0===r)return null;if(1===r)return a=e[i],s=n?n(a):a,new Ne(s,a.node,Ne.BLACK,null,null);var c=parseInt(r/2,10)+i,u=t(i,c),l=t(c+1,o);return a=e[c],s=n?n(a):a,new Ne(s,a.node,Ne.BLACK,u,l)}(o+1,s),u=e[o],l=n?n(u):u;r(new Ne(l,u.node,i,null,c))},r=function(e){i?(i.left=e,i=e):(o=e,i=e)},c=0;c<t.count;++c){var u=t.nextBitIsOne(),l=Math.pow(2,t.count-(c+1));u?s(l,Ne.BLACK):(s(l,Ne.BLACK),s(l,Ne.RED))}return o}(new Ae(e.length));return new Re(i||t,o)},xe={},Be=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return r.assert(xe&&Ie,"ChildrenNode.ts has not been loaded"),U=U||new e({".priority":xe},{".priority":Ie})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=r.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Re?t:null},e.prototype.hasIndex=function(e){return r.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){r.assert(t!==Se,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,o=[],a=!1,c=n.getIterator(we.Wrap),u=c.getNext();u;)a=a||t.isDefinedOn(u.node),o.push(u),u=c.getNext();i=a?De(o,t.getCompare()):xe;var l=t.toString(),h=s.__assign({},this.indexSet_);h[l]=t;var d=s.__assign({},this.indexes_);return d[l]=i,new e(d,h)},e.prototype.addToIndexes=function(t,n){var i=this;return new e(r.map(this.indexes_,(function(e,o){var a=r.safeGet(i.indexSet_,o);if(r.assert(a,"Missing index implementation for "+o),e===xe){if(a.isDefinedOn(t.node)){for(var s=[],c=n.getIterator(we.Wrap),u=c.getNext();u;)u.name!==t.name&&s.push(u),u=c.getNext();return s.push(t),De(s,a.getCompare())}return xe}var l=n.get(t.name),h=e;return l&&(h=h.remove(new we(t.name,l))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(r.map(this.indexes_,(function(e){if(e===xe)return e;var i=n.get(t.name);return i?e.remove(new we(t.name,i)):e})),this.indexSet_)},e}();function He(e,t){return N(e.name,t.name)}function We(e,t){return N(e,t)}var Me=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Pe(this.priorityNode_),this.children_.isEmpty()&&r.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return z||(z=new e(new Re(We),null,Be.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||z},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?z:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(r.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var i=new we(t,n),o=void 0,a=void 0;n.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(i,this.children_));var s=o.isEmpty()?z:this.priorityNode_;return new e(o,s,a)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;r.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},i=0,o=0,a=!0;if(this.forEachChild(Ie,(function(s,r){n[s]=r.val(t),i++,a&&e.INTEGER_REGEXP_.test(s)?o=Math.max(o,Number(s)):a=!1})),!t&&a&&o<2*i){var s=[];for(var r in n)s[r]=n[r];return s}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Oe(this.getPriority().val())+":"),this.forEachChild(Ie,(function(t,n){var i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":b(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var i=this.resolveIndex_(n);if(i){var o=i.getPredecessorKey(new we(e,t));return o?o.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new we(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new we(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var i=this.children_.getIteratorFrom(e.name,we.Wrap),o=i.peek();null!=o&&t.compare(o,e)<0;)i.getNext(),o=i.peek();return i},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var i=this.children_.getReverseIteratorFrom(e.name,we.Wrap),o=i.peek();null!=o&&t.compare(o,e)>0;)i.getNext(),o=i.peek();return i},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Le?-1:0},e.prototype.withIndex=function(t){if(t===Se||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Se||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ie),i=t.getIterator(Ie),o=n.getNext(),a=i.getNext();o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=n.getNext(),a=i.getNext()}return null===o&&null===a}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Se?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Le=new(function(e){function t(){return e.call(this,new Re(We),Me.EMPTY_NODE,Be.Default)||this}return s.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Me.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Me));function qe(e,t){if(void 0===t&&(t=null),null===e)return Me.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),r.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ee(e,qe(t));if(e instanceof Array){var n=Me.EMPTY_NODE;return D(e,(function(t,i){if(r.contains(e,t)&&"."!==t.substring(0,1)){var o=qe(i);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(t,o))}})),n.updatePriority(qe(t))}var i=[],o=!1;if(D(e,(function(e,t){if("."!==e.substring(0,1)){var n=qe(t);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new we(e,n)))}})),0===i.length)return Me.EMPTY_NODE;var a=De(i,He,(function(e){return e.name}),We);if(o){var s=De(i,Ie.getCompare());return new Me(a,qe(t),new Be({".priority":s},{".priority":Ie}))}return new Me(a,qe(t),Be.Default)}Object.defineProperties(we,{MIN:{value:new we(I,Me.EMPTY_NODE)},MAX:{value:new we(C,Le)}}),je.__EMPTY_NODE=Me.EMPTY_NODE,Ee.__childrenNodeConstructor=Me,M=Le,G=Le,function(e){q=e}(qe);var Ge,Ue=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?N(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return we.MIN},t.prototype.maxPost=function(){return we.MAX},t.prototype.makePost=function(e,t){var n=qe(e);return new we(t,n)},t.prototype.toString=function(){return".value"},t}(ke)),ze=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,r.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return s.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),i=this.extractChild(t.node),o=n.compareTo(i);return 0===o?N(e.name,t.name):o},t.prototype.makePost=function(e,t){var n=qe(e),i=Me.EMPTY_NODE.updateChild(this.indexPath_,n);return new we(t,i)},t.prototype.maxPost=function(){var e=Me.EMPTY_NODE.updateChild(this.indexPath_,Le);return new we(C,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(ke),Ye=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),pe("DataSnapshot.child",1,t,!1);var n=new K(t),i=this.ref_.child(n);return new e(this.node_.getChild(n),i,Ie)},e.prototype.hasChild=function(e){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),pe("DataSnapshot.hasChild",1,e,!1);var t=new K(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,(function(i,o){return t(new e(o,n.ref_.child(i),Ie))}))},e.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Xe=function(){function e(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},e}(),Ve=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Je=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Xe("value",this,new Ye(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){r.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var i=this.callback_;return function(){i.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ve(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Qe=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return r.contains(this.callbacks_,t="children_removed"===t?"child_removed":t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ve(this,e,t):null},e.prototype.createEvent=function(e,t){r.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),i=t.getQueryParams().getIndex();return new Xe(e.type,this,new Ye(e.snapshotNode,n,i),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){r.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var i=this.callbacks_[e.eventType];return function(){i.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var i=Object.keys(t.callbacks_),o=Object.keys(this.callbacks_),a=i.length;if(a===o.length){if(1===a){var s=i[0],r=o[0];return!(r!==s||t.callbacks_[s]&&this.callbacks_[r]&&t.callbacks_[s]!==this.callbacks_[r])}return o.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Ke=function(){function e(e,t,n,i){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return r.assert(Ge,"Reference.ts has not been loaded"),Ge},set:function(e){Ge=e},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Se){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==I)throw new Error(i);if("string"!=typeof t)throw new Error(o)}if(e.hasEnd()){if(e.getIndexEndName()!==C)throw new Error(i);if("string"!=typeof n)throw new Error(o)}}else if(e.getIndex()===Ie){if(null!=t&&!se(t)||null!=n&&!se(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(r.assert(e.getIndex()instanceof ze||e.getIndex()===Ue,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return r.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,i,o){r.validateArgCount("Query.on",2,4,arguments.length),he("Query.on",1,t,!1),r.validateCallback("Query.on",2,n,!1);var a=e.getCancelAndContextArgs_("Query.on",i,o);if("value"===t)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[t]=n,this.onChildEvent(s,a.cancel,a.context)}return n},e.prototype.onValueEvent=function(e,t,n){var i=new Je(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,i)},e.prototype.onChildEvent=function(e,t,n){var i=new Qe(e,t,n);this.repo.addEventCallbackForQuery(this,i)},e.prototype.off=function(e,t,n){r.validateArgCount("Query.off",0,3,arguments.length),he("Query.off",1,e,!0),r.validateCallback("Query.off",2,t,!0),r.validateContextObject("Query.off",3,n,!0);var i=null,o=null;if("value"===e){var a=t||null;i=new Je(a,null,n||null)}else e&&(t&&((o={})[e]=t),i=new Qe(o,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},e.prototype.once=function(t,n,i,o){var a=this;r.validateArgCount("Query.once",1,4,arguments.length),he("Query.once",1,t,!1),r.validateCallback("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",i,o),c=!0,u=new r.Deferred;u.promise.catch((function(){}));var l=function e(i){c&&(c=!1,a.off(t,e),n&&n.bind(s.context)(i),u.resolve(i))};return this.on(t,l,(function(e){a.off(t,l),s.cancel&&s.cancel.bind(s.context)(e),u.reject(e)})),u.promise},e.prototype.limitToFirst=function(t){if(r.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(r.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(r.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pe("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new K(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new ze(n),o=this.queryParams_.orderBy(i);return e.validateQueryEndpoints_(o),new e(this.repo,this.path,o,!0)},e.prototype.orderByKey=function(){r.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Se);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){r.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Ie);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){r.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Ue);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),r.validateArgCount("Query.startAt",0,2,arguments.length),re("Query.startAt",1,t,this.path,!0),de("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(t,n);if(e.validateLimit_(i),e.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,i,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),r.validateArgCount("Query.endAt",0,2,arguments.length),re("Query.endAt",1,t,this.path,!0),de("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(t,n);if(e.validateLimit_(i),e.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,i,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(r.validateArgCount("Query.equalTo",1,2,arguments.length),re("Query.equalTo",1,e,this.path,!1),de("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return r.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return r.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=F(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(r.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var i=this.repo===t.repo,o=this.path.equals(t.path),a=this.queryIdentifier()===t.queryIdentifier();return i&&o&&a},e.getCancelAndContextArgs_=function(e,t,n){var i={cancel:null,context:null};if(t&&n)i.cancel=t,r.validateCallback(e,3,i.cancel,!0),i.context=n,r.validateContextObject(e,4,i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error(r.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");i.cancel=t}return i},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),$e=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),Ze=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=this.path_.child(t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),et=function(e,t,n){return e&&"object"==typeof e?(r.assert(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?tt(e[".sv"],t,n):"object"==typeof e[".sv"]?nt(e[".sv"],t):void r.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},tt=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:r.assert(!1,"Unexpected server value: "+e)}},nt=function(e,t,n){e.hasOwnProperty("increment")||r.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var i=e.increment;"number"!=typeof i&&r.assert(!1,"Unexpected increment value: "+i);var o=t.node();if(r.assert(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;var a=o.getValue();return"number"!=typeof a?i:a+i},it=function(e,t,n,i){return at(t,new Ze(n,e),i)},ot=function(e,t,n){return at(e,new $e(t),n)};function at(e,t,n){var i,o=e.getPriority().val(),a=et(o,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var s=e,r=et(s.getValue(),t,n);return r!==s.getValue()||a!==s.getPriority().val()?new Ee(r,qe(a)):e}var c=e;return i=c,a!==c.getPriority().val()&&(i=i.updatePriority(new Ee(a))),c.forEachChild(Ie,(function(e,o){var a=at(o,t.getImmediateChild(e),n);a!==o&&(i=i.updateImmediateChild(e,a))})),i}var st,rt,ct=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var i=t.getFront();this.children.has(i)||this.children.set(i,new e);var o=this.children.get(i);t=t.popFront(),o.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Ie,(function(e,t){n.remember(new K(e),t)})),this.forget(e)}if(this.children.size>0){var i=e.getFront();return e=e.popFront(),this.children.has(i)&&this.children.get(i).forget(e)&&this.children.delete(i),0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild((function(n,i){var o=new K(e.toString()+"/"+n);i.forEachTree(o,t)}))},e.prototype.forEachChild=function(e){this.children.forEach((function(t,n){e(n,t)}))},e}(),ut=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}({}),lt=function(){function e(e,t,n,i){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=i,r.assert(!i||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),ht=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ut.ACK_USER_WRITE,this.source=lt.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new K(t));return new e(K.Empty,n,this.revert)}return r.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),dt=function(){function e(e,t){void 0===t&&(st||(st=new Re(T)),t=st),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return D(t,(function(e,t){n=n.set(new K(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:K.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),i=this.children.get(n);if(null!==i){var o=i.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=o?{path:new K(n).child(o.path),value:o.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),i=this.children.get(n);return null!==i?i.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var i=t.getFront(),o=(this.children.get(i)||e.Empty).set(t.popFront(),n),a=this.children.insert(i,o);return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),i=this.children.get(n);if(i){var o=i.remove(t.popFront()),a=void 0;return a=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&a.isEmpty()?e.Empty:new e(this.value,a)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var i,o=t.getFront(),a=(this.children.get(o)||e.Empty).setTree(t.popFront(),n);return i=a.isEmpty()?this.children.remove(o):this.children.insert(o,a),new e(this.value,i)},e.prototype.fold=function(e){return this.fold_(K.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(i,o){n[i]=o.fold_(e.child(i),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,K.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var i=!!this.value&&n(t,this.value);if(i)return i;if(e.isEmpty())return null;var o=e.getFront(),a=this.children.get(o);return a?a.findOnPath_(e.popFront(),t.child(o),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,K.Empty,t)},e.prototype.foreachOnPath_=function(t,n,i){if(t.isEmpty())return this;this.value&&i(n,this.value);var o=t.getFront(),a=this.children.get(o);return a?a.foreachOnPath_(t.popFront(),n.child(o),i):e.Empty},e.prototype.foreach=function(e){this.foreach_(K.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,i){i.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e.Empty=new e(null),e}(),pt=function(){function e(e,t){this.source=e,this.path=t,this.type=ut.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,K.Empty):new e(this.source,this.path.popFront())},e}(),mt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ut.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,K.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),gt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ut.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new K(t));return n.isEmpty()?null:n.value?new mt(this.source,K.Empty,n.value):new e(this.source,K.Empty,n)}return r.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),ft=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),bt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,i){return new e(new ft(t,n,i),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,i){return new e(this.eventCache_,new ft(t,n,i))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new ft(Me.EMPTY_NODE,!1,!1),new ft(Me.EMPTY_NODE,!1,!1)),e}(),yt=function(){function e(e,t,n,i,o){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=i,this.prevName=o}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,i){return new e(e.CHILD_CHANGED,n,t,i)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),vt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,i,o,a){r.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(i).equals(n.getChild(i))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(yt.childRemovedChange(t,s)):r.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(yt.childAddedChange(t,n)):a.trackChildChange(yt.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ie,(function(e,i){t.hasChild(e)||n.trackChildChange(yt.childRemovedChange(e,i))})),t.isLeafNode()||t.forEachChild(Ie,(function(t,i){if(e.hasChild(t)){var o=e.getImmediateChild(t);o.equals(i)||n.trackChildChange(yt.childChangedChange(t,i,o))}else n.trackChildChange(yt.childAddedChange(t,i))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Me.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),_t=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;r.assert(t===yt.CHILD_ADDED||t===yt.CHILD_CHANGED||t===yt.CHILD_REMOVED,"Only child changes supported for tracking"),r.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var o=i.type;if(t===yt.CHILD_ADDED&&o===yt.CHILD_REMOVED)this.changeMap.set(n,yt.childChangedChange(n,e.snapshotNode,i.snapshotNode));else if(t===yt.CHILD_REMOVED&&o===yt.CHILD_ADDED)this.changeMap.delete(n);else if(t===yt.CHILD_REMOVED&&o===yt.CHILD_CHANGED)this.changeMap.set(n,yt.childRemovedChange(n,i.oldSnap));else if(t===yt.CHILD_CHANGED&&o===yt.CHILD_ADDED)this.changeMap.set(n,yt.childAddedChange(n,e.snapshotNode));else{if(t!==yt.CHILD_CHANGED||o!==yt.CHILD_CHANGED)throw r.assertionError("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,yt.childChangedChange(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),wt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),kt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ft(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(i,t,1,n,e);return 0===o.length?null:o[0]},e}(),jt=function(e,t){this.viewCache=e,this.changes=t},St=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){r.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),r.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,i,o){var a,s,c=new _t;if(n.type===ut.OVERWRITE){var u=n;u.source.fromUser?a=this.applyUserOverwrite_(t,u.path,u.snap,i,o,c):(r.assert(u.source.fromServer,"Unknown source."),s=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),a=this.applyServerOverwrite_(t,u.path,u.snap,i,o,s,c))}else if(n.type===ut.MERGE){var l=n;l.source.fromUser?a=this.applyUserMerge_(t,l.path,l.children,i,o,c):(r.assert(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.getServerCache().isFiltered(),a=this.applyServerMerge_(t,l.path,l.children,i,o,s,c))}else if(n.type===ut.ACK_USER_WRITE){var h=n;a=h.revert?this.revertUserWrite_(t,h.path,i,o,c):this.ackUserWrite_(t,h.path,h.affectedTree,i,o,c)}else{if(n.type!==ut.LISTEN_COMPLETE)throw r.assertionError("Unknown operation type: "+n.type);a=this.listenComplete_(t,n.path,i,c)}var d=c.getChanges();return e.maybeAddValueEvent_(t,a,d),new jt(a,d)},e.maybeAddValueEvent_=function(e,t,n){var i=t.getEventCache();if(i.isFullyInitialized()){var o=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||o&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&n.push(yt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,i,o){var a=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,c=void 0;if(t.isEmpty())if(r.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),l=n.calcCompleteEventChildren(u instanceof Me?u:Me.EMPTY_NODE);s=this.filter_.updateFullNode(e.getEventCache().getNode(),l,o)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,o)}else{var d=t.getFront();if(".priority"===d){r.assert(1===t.getLength(),"Can't have a priority with additional path components");var p=a.getNode();c=e.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(t,p,c);s=null!=m?this.filter_.updatePriority(p,m):a.getNode()}else{var g=t.popFront(),f=void 0;if(a.isCompleteForChild(d)){c=e.getServerCache().getNode();var b=n.calcEventCacheAfterServerOverwrite(t,a.getNode(),c);f=null!=b?a.getNode().getImmediateChild(d).updateChild(g,b):a.getNode().getImmediateChild(d)}else f=n.calcCompleteChild(d,e.getServerCache());s=null!=f?this.filter_.updateChild(a.getNode(),d,f,g,i,o):a.getNode()}}return e.updateEventSnap(s,a.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,i,o,a,s){var r,c=e.getServerCache(),u=a?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())r=u.updateFullNode(c.getNode(),n,null);else if(u.filtersNodes()&&!c.isFiltered()){var l=c.getNode().updateChild(t,n);r=u.updateFullNode(c.getNode(),l,null)}else{var h=t.getFront();if(!c.isCompleteForPath(t)&&t.getLength()>1)return e;var d=t.popFront(),p=c.getNode().getImmediateChild(h).updateChild(d,n);r=".priority"===h?u.updatePriority(c.getNode(),p):u.updateChild(c.getNode(),h,p,d,wt,null)}var m=e.updateServerSnap(r,c.isFullyInitialized()||t.isEmpty(),u.filtersNodes()),g=new kt(i,m,o);return this.generateEventCacheAfterServerEvent_(m,t,i,g,s)},e.prototype.applyUserOverwrite_=function(e,t,n,i,o,a){var s,r,c=e.getEventCache(),u=new kt(i,e,o);if(t.isEmpty())r=this.filter_.updateFullNode(e.getEventCache().getNode(),n,a),s=e.updateEventSnap(r,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)r=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(r,c.isFullyInitialized(),c.isFiltered());else{var h=t.popFront(),d=c.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var m=u.getCompleteChild(l);p=null!=m?".priority"===h.getBack()&&m.getChild(h.parent()).isEmpty()?m:m.updateChild(h,n):Me.EMPTY_NODE}if(d.equals(p))s=e;else{var g=this.filter_.updateChild(c.getNode(),l,p,h,u,a);s=e.updateEventSnap(g,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,i,o,a,s){var r=this,c=t;return i.foreach((function(i,u){var l=n.child(i);e.cacheHasChild_(t,l.getFront())&&(c=r.applyUserOverwrite_(c,l,u,o,a,s))})),i.foreach((function(i,u){var l=n.child(i);e.cacheHasChild_(t,l.getFront())||(c=r.applyUserOverwrite_(c,l,u,o,a,s))})),c},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,i,o,a,s){var r=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var c,u=e;c=t.isEmpty()?n:dt.Empty.setTree(t,n);var l=e.getServerCache().getNode();return c.children.inorderTraversal((function(t,n){if(l.hasChild(t)){var c=e.getServerCache().getNode().getImmediateChild(t),h=r.applyMerge_(c,n);u=r.applyServerOverwrite_(u,new K(t),h,i,o,a,s)}})),c.children.inorderTraversal((function(t,n){var c=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!c){var h=e.getServerCache().getNode().getImmediateChild(t),d=r.applyMerge_(h,n);u=r.applyServerOverwrite_(u,new K(t),d,i,o,a,s)}})),u},e.prototype.ackUserWrite_=function(e,t,n,i,o,a){if(null!=i.shadowingWrite(t))return e;var s=e.getServerCache().isFiltered(),r=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&r.isFullyInitialized()||r.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,r.getNode().getChild(t),i,o,s,a);if(t.isEmpty()){var c=dt.Empty;return r.getNode().forEachChild(Se,(function(e,t){c=c.set(new K(e),t)})),this.applyServerMerge_(e,t,c,i,o,s,a)}return e}var u=dt.Empty;return n.foreach((function(e,n){var i=t.child(e);r.isCompleteForPath(i)&&(u=u.set(e,r.getNode().getChild(i)))})),this.applyServerMerge_(e,t,u,i,o,s,a)},e.prototype.listenComplete_=function(e,t,n,i){var o=e.getServerCache(),a=e.updateServerSnap(o.getNode(),o.isFullyInitialized()||t.isEmpty(),o.isFiltered());return this.generateEventCacheAfterServerEvent_(a,t,n,wt,i)},e.prototype.revertUserWrite_=function(e,t,n,i,o){var a;if(null!=n.shadowingWrite(t))return e;var s=new kt(n,e,i),c=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var h=e.getServerCache().getNode();r.assert(h instanceof Me,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}u=this.filter_.updateFullNode(c,l=l,o)}else{var d=t.getFront(),p=n.calcCompleteChild(d,e.getServerCache());null==p&&e.getServerCache().isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(u=null!=p?this.filter_.updateChild(c,d,p,t.popFront(),s,o):e.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(c,d,Me.EMPTY_NODE,t.popFront(),s,o):c).isEmpty()&&e.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,a,o))}return a=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(K.Empty),e.updateEventSnap(u,a,this.filter_.filtersNodes())},e}(),Ot=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var i=this,o=[],a=[];return e.forEach((function(e){e.type===yt.CHILD_CHANGED&&i.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&a.push(yt.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(o,yt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(o,yt.CHILD_ADDED,e,n,t),this.generateEventsForType_(o,yt.CHILD_MOVED,a,n,t),this.generateEventsForType_(o,yt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(o,yt.VALUE,e,n,t),o},e.prototype.generateEventsForType_=function(e,t,n,i,o){var a=this,s=n.filter((function(e){return e.type===t}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(t){var n=a.materializeSingleChange_(t,o);i.forEach((function(i){i.respondsTo(t.type)&&e.push(i.createEvent(n,a.query_))}))}))},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw r.assertionError("Should only compare child_ events.");var n=new we(e.childName,e.snapshotNode),i=new we(t.childName,t.snapshotNode);return this.index_.compare(n,i)},e}(),Pt=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new vt(n.getIndex()),o=n.getNodeFilter();this.processor_=new St(o);var a=t.getServerCache(),s=t.getEventCache(),r=i.updateFullNode(Me.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Me.EMPTY_NODE,s.getNode(),null),u=new ft(r,a.isFullyInitialized(),i.filtersNodes()),l=new ft(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=new bt(l,u),this.eventGenerator_=new Ot(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){r.assert(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach((function(e){var o=e.createCancelEvent(t=t,i);o&&n.push(o)}))}if(e){for(var o=[],a=0;a<this.eventRegistrations_.length;++a){var s=this.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(a+1));break}}else o.push(s)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===ut.MERGE&&null!==e.source.queryId&&(r.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),r.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,o=this.processor_.applyOperation(i,e,t,n);return this.processor_.assertIndexed(o.viewCache),r.assert(o.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ie,(function(e,t){n.push(yt.childAddedChange(e,t))})),t.isFullyInitialized()&&n.push(yt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){return this.eventGenerator_.generateEventsForChanges(e,t,n?[n]:this.eventRegistrations_)},e}(),Et=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return r.assert(rt,"Reference.ts has not been loaded"),rt},set:function(e){r.assert(!rt,"__referenceConstructor has already been defined"),rt=e},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var i,o,a=e.source.queryId;if(null!==a){var c=this.views.get(a);return r.assert(null!=c,"SyncTree gave us an op for an invalid query."),c.applyOperation(e,t,n)}var u=[];try{for(var l=s.__values(this.views.values()),h=l.next();!h.done;h=l.next())u=u.concat((c=h.value).applyOperation(e,t,n))}catch(d){i={error:d}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return u},e.prototype.addEventRegistration=function(e,t,n,i,o){var a=e.queryIdentifier(),s=this.views.get(a);if(!s){var r=n.calcCompleteEventCache(o?i:null),c=!1;r?c=!0:i instanceof Me?(r=n.calcCompleteEventChildren(i),c=!1):(r=Me.EMPTY_NODE,c=!1);var u=new bt(new ft(r,c,!1),new ft(i,o,!1));s=new Pt(e,u),this.views.set(a,s)}return s.addEventRegistration(t),s.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,i){var o,a,r=t.queryIdentifier(),c=[],u=[],l=this.hasCompleteView();if("default"===r)try{for(var h=s.__values(this.views.entries()),d=h.next();!d.done;d=h.next()){var p,m=s.__read(d.value,2),g=m[0];u=u.concat((p=m[1]).removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||c.push(p.getQuery()))}}catch(f){o={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}else(p=this.views.get(r))&&(u=u.concat(p.removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(r),p.getQuery().getQueryParams().loadsAllData()||c.push(p.getQuery())));return l&&!this.hasCompleteView()&&c.push(new e.__referenceConstructor(t.repo,t.path)),{removed:c,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var i=s.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.getQuery().getQueryParams().loadsAllData()||n.push(a)}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,i=null;try{for(var o=s.__values(this.views.values()),a=o.next();!a.done;a=o.next())i=i||a.value.getCompleteServerCache(e)}catch(r){t={error:r}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=s.__values(this.views.values()),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),It=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new dt(n));var i=this.writeTree_.findRootMostValueAndPath(t);if(null!=i){var o=i.path,a=i.value,s=K.relativePath(o,t);return a=a.updateChild(s,n),new e(this.writeTree_.set(o,a))}var r=new dt(n);return new e(this.writeTree_.setTree(t,r))},e.prototype.addWrites=function(e,t){var n=this;return D(t,(function(t,i){n=n.addWrite(e.child(t),i)})),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,dt.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(K.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ie,(function(t,n){e.push(new we(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new we(t,n.value))})),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new dt(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return function e(t,n,i){if(null!=n.value)return i.updateChild(t,n.value);var o=null;return n.children.inorderTraversal((function(n,a){".priority"===n?(r.assert(null!==a.value,"Priority writes must always be leaf nodes"),o=a.value):i=e(t.child(n),a,i)})),i.getChild(t).isEmpty()||null===o||(i=i.updateChild(t.child(".priority"),o)),i}(K.Empty,this.writeTree_,e)},e.Empty=new e(new dt(null)),e}(),Ct=function(){function e(){this.visibleWrites_=It.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new Nt(e,this)},e.prototype.addOverwrite=function(e,t,n,i){r.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){r.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));r.assert(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var o=i.visible,a=!1,s=this.allWrites_.length-1;o&&s>=0;){var c=this.allWrites_[s];c.visible&&(s>=n&&this.recordContainsPath_(c,i.path)?o=!1:i.path.contains(c.path)&&(a=!0)),s--}return!!o&&(a?(this.resetTree_(),!0):(i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):D(i.children,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(i.path.child(e))})),!0))},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,i,o){if(i||o){var a=this.visibleWrites_.childCompoundWrite(t);return!o&&a.isEmpty()?n:o||null!=n||a.hasCompleteWrite(K.Empty)?e.layerTree_(this.allWrites_,(function(e){return(e.visible||o)&&(!i||!~i.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t).apply(n||Me.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var r=this.visibleWrites_.childCompoundWrite(t);return r.isEmpty()?n:null!=n||r.hasCompleteWrite(K.Empty)?r.apply(n||Me.EMPTY_NODE):null},e.prototype.calcCompleteEventChildren=function(e,t){var n=Me.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(e);if(i)return i.isLeafNode()||i.forEachChild(Ie,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var o=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Ie,(function(e,t){var i=o.childCompoundWrite(new K(e)).apply(t);n=n.updateImmediateChild(e,i)})),o.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,i){r.assert(n||i,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(t);if(this.visibleWrites_.hasCompleteWrite(o))return null;var a=this.visibleWrites_.childCompoundWrite(o);return a.isEmpty()?i.getChild(t):a.apply(i.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var i=e.child(t),o=this.visibleWrites_.getCompleteNode(i);return null!=o?o:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,i,o,a){var s,r=this.visibleWrites_.childCompoundWrite(e),c=r.getCompleteNode(K.Empty);if(null!=c)s=c;else{if(null==t)return[];s=r.apply(t)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],l=a.getCompare(),h=o?s.getReverseIteratorFrom(n,a):s.getIteratorFrom(n,a),d=h.getNext();d&&u.length<i;)0!==l(d,n)&&u.push(d),d=h.getNext();return u},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,K.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var i=It.Empty,o=0;o<e.length;++o){var a=e[o];if(t(a)){var s=a.path,c=void 0;if(a.snap)n.contains(s)?(c=K.relativePath(n,s),i=i.addWrite(c,a.snap)):s.contains(n)&&(c=K.relativePath(s,n),i=i.addWrite(K.Empty,a.snap.getChild(c)));else{if(!a.children)throw r.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))c=K.relativePath(n,s),i=i.addWrites(c,a.children);else if(s.contains(n))if((c=K.relativePath(s,n)).isEmpty())i=i.addWrites(K.Empty,a.children);else{var u=r.safeGet(a.children,c.getFront());if(u){var l=u.getChild(c.popFront());i=i.addWrite(K.Empty,l)}}}}}return i},e}(),Nt=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,i,o){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,i,o)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),Tt=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=dt.Empty,this.pendingWriteTree_=new Ct,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,i){return this.pendingWriteTree_.addOverwrite(e,t,n,i),i?this.applyOperationToSyncPoints_(new mt(lt.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var i=dt.fromObject(t);return this.applyOperationToSyncPoints_(new gt(lt.User,e,i))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var i=dt.Empty;return null!=n.snap?i=i.set(K.Empty,!0):D(n.children,(function(e,t){i=i.set(new K(e),t)})),this.applyOperationToSyncPoints_(new ht(n.path,i,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new mt(lt.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=dt.fromObject(t);return this.applyOperationToSyncPoints_(new gt(lt.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new pt(lt.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,i){var o=this.queryKeyForTag_(i);if(null!=o){var a=e.parseQueryKey_(o),s=a.path,r=a.queryId,c=K.relativePath(s,t),u=new mt(lt.forServerTaggedQuery(r),c,n);return this.applyTaggedOperation_(s,u)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,i){var o=this.queryKeyForTag_(i);if(o){var a=e.parseQueryKey_(o),s=a.path,r=a.queryId,c=K.relativePath(s,t),u=dt.fromObject(n),l=new gt(lt.forServerTaggedQuery(r),c,u);return this.applyTaggedOperation_(s,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var i=this.queryKeyForTag_(n);if(i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,r=K.relativePath(a,t),c=new pt(lt.forServerTaggedQuery(s),r);return this.applyTaggedOperation_(a,c)}return[]},e.prototype.addEventRegistration=function(t,n){var i=t.path,o=null,a=!1;this.syncPointTree_.foreachOnPath(i,(function(e,t){var n=K.relativePath(e,i);o=o||t.getCompleteServerCache(n),a=a||t.hasCompleteView()}));var s,c=this.syncPointTree_.get(i);c?(a=a||c.hasCompleteView(),o=o||c.getCompleteServerCache(K.Empty)):(c=new Et,this.syncPointTree_=this.syncPointTree_.set(i,c)),null!=o?s=!0:(s=!1,o=Me.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=t.getCompleteServerCache(K.Empty);n&&(o=o.updateImmediateChild(e,n))})));var u=c.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var l=e.makeQueryKey_(t);r.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var d=this.pendingWriteTree_.childWrites(i),p=c.addEventRegistration(t,n,d,o,s);if(!u&&!a){var m=c.viewForQuery(t);p=p.concat(this.setupListener_(t,m))}return p},e.prototype.removeEventRegistration=function(t,n,i){var o=this,a=t.path,s=this.syncPointTree_.get(a),r=[];if(s&&("default"===t.queryIdentifier()||s.viewExistsForQuery(t))){var c=s.removeEventRegistration(t,n,i);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(a));var u=c.removed;r=c.events;var l=-1!==u.findIndex((function(e){return e.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(a,(function(e,t){return t.hasCompleteView()}));if(l&&!h){var d=this.syncPointTree_.subtree(a);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),m=0;m<p.length;++m){var g=p[m],f=g.getQuery(),b=this.createListenerForView_(g);this.listenProvider_.startListening(e.queryForListening_(f),this.tagForQuery_(f),b.hashFn,b.onComplete)}}!h&&u.length>0&&!i&&(l?this.listenProvider_.stopListening(e.queryForListening_(t),null):u.forEach((function(t){var n=o.queryToTagMap.get(e.makeQueryKey_(t));o.listenProvider_.stopListening(e.queryForListening_(t),n)}))),this.removeTags_(u)}return r},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(e,(function(t,n){var i=K.relativePath(t,e),o=n.getCompleteServerCache(i);if(o)return o}));return n.calcCompleteEventCache(e,i,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var i=[];return t&&(i=t.getQueryViews()),D(n,(function(e,t){i=i.concat(t)})),i}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var i=t[n];if(!i.getQueryParams().loadsAllData()){var o=e.makeQueryKey_(i),a=this.queryToTagMap.get(o);this.queryToTagMap.delete(o),this.tagToQueryMap.delete(a)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var i=t.path,o=this.tagForQuery_(t),a=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),o,a.hashFn,a.onComplete),c=this.syncPointTree_.subtree(i);if(o)r.assert(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=c.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var i=[];return t&&(i=i.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),D(n,(function(e,t){i=i.concat(t)})),i})),l=0;l<u.length;++l){var h=u[l];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||Me.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return i?t.applyTaggedListenComplete(n.path,i):t.applyListenComplete(n.path);var o=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var i=new Error(e+" at "+t.path.toString()+": "+n);return i.code=e.toUpperCase(),i}(e,n);return t.removeEventRegistration(n,null,o)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return r.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new K(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);r.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,i,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(K.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,i);var o=t.get(K.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(K.Empty));var a=[],s=e.path.getFront(),r=e.operationForChild(s),c=t.children.get(s);if(c&&r){var u=n?n.getImmediateChild(s):null,l=i.child(s);a=a.concat(this.applyOperationHelper_(r,c,u,l))}return o&&(a=a.concat(o.applyOperation(e,i,n))),a},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,i){var o=this,a=t.get(K.Empty);null==n&&null!=a&&(n=a.getCompleteServerCache(K.Empty));var s=[];return t.children.inorderTraversal((function(t,a){var r=n?n.getImmediateChild(t):null,c=i.child(t),u=e.operationForChild(t);u&&(s=s.concat(o.applyOperationDescendantsHelper_(u,a,r,c)))})),a&&(s=s.concat(a.applyOperation(e,i,n))),s},e.nextQueryTag_=1,e}(),Rt=function(){function e(){this.rootNode_=Me.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Ft=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),r.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return r.deepCopy(this.counters_)},e}(),At=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Ft),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Dt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=s.__assign({},e);return this.last_&&D(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),xt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Dt(e);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},i=!1;D(t,(function(t,o){o>0&&r.contains(e.statsToReport_,t)&&(n[t]=o,i=!0)})),i&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Bt=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n],o=i.getPath();null===t||o.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Ht(o)),t.add(i)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];i&&(e(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Ht=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();v&&k("event: "+t.toString()),J(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Wt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},r.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var i=s.__spread(this.listeners_[e]),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var i=this.getInitialEvent(e);i&&t.apply(n,i)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var i=this.listeners_[e]||[],o=0;o<i.length;o++)if(i[o].callback===t&&(!n||n===i[o].context))return void i.splice(o,1)},e.prototype.validateEventType_=function(e){r.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),Mt=function(e){function t(){var t,n,i=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==i.visible_&&(i.visible_=e,i.trigger("visible",e))}),!1),i}return s.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return r.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Wt),Lt=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||r.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return s.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return r.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Wt),qt=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var i=function(){var e=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var t=function(t){e[t]&&J((function(){n.onMessage_(e[t])}))},i=0;i<e.length;++i)t(i);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},e}(),Gt=function(){function e(e,t,n,i,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.transportSessionId=i,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=j(e),this.stats_=At.getCollection(t),this.urlFn=function(e){return t.connectionURL("long_polling",e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(r.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ut((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=s.__read(e,5),o=i[0],a=i[1],r=i[2];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=a,n.password=r;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=s.__read(e,2),o=i[0],a=i[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(r.isNodeSdk()||!e.forceAllow_&&(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=r.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=r.base64Encode(t),i=A(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!r.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=r.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Ut=function(){function e(t,n,i,o){if(this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,r.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=f(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(c){k("frame writing exception"),c.stack&&k(c.stack),k(c)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||k("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var o=this.pendingSegs.shift();n=n+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return this.addLongPollTag_(t+=n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var i=function(){n.outstandingRequests.delete(t),n.newRequest_()},o=setTimeout(i,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(o),i()}))},e.prototype.addTag=function(e,t){var n=this;r.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){k("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(o){}}),Math.floor(1))},e}(),zt="",Yt=null;"undefined"!=typeof MozWebSocket?Yt=MozWebSocket:"undefined"!=typeof WebSocket&&(Yt=WebSocket);var Xt=function(){function e(t,n,i,o,a){this.connId=t,this.applicationId=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=j(this.connId),this.stats_=At.getCollection(n),this.connURL=e.connectionURL_(n,o,a)}return e.connectionURL_=function(e,t,n){var i={v:"5"};return!r.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),e.connectionURL("websocket",i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if(r.isNodeSdk()){var i={headers:{"User-Agent":"Firebase/5/"+zt+"/"+process.platform+"/"+(r.CONSTANTS.NODE_ADMIN?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Yt(this.connURL,[],i)}else this.mySock=new Yt(this.connURL,[],i={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(c){this.log_("Error instantiating WebSocket.");var s=c.message||c.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Yt&&!e.forceDisallow_},e.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=r.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(r.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=r.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=A(t,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Vt=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Gt,Xt]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,i,o=Xt&&Xt.isAvailable(),a=o&&!Xt.previouslyFailed();if(t.webSocketOnly&&(o||P("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Xt];else{var r=this.transports_=[];try{for(var c=s.__values(e.ALL_TRANSPORTS),u=c.next();!u.done;u=c.next()){var l=u.value;l&&l.isAvailable()&&r.push(l)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Jt=function(){function e(e,t,n,i,o,a,s,r){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.onMessage_=i,this.onReady_=o,this.onDisconnect_=a,this.onKill_=s,this.lastSessionId=r,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=j("c:"+this.id+":"),this.transportManager_=new Vt(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,i)}),Math.floor(0));var o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Q((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(o)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=R("t",e),n=R("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=R("t",e),n=R("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=R("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?S("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&P("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Q((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),Qt=function(){function e(){}return e.prototype.put=function(e,t,n,i){},e.prototype.merge=function(e,t,n,i){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Kt=function(e){function t(n,i,o,a,s,c,u){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=i,l.onDataUpdate_=o,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=c,l.authOverride_=u,l.id=t.nextPersistentConnectionId_++,l.log_=j("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,u&&!r.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Mt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Lt.getInstance().on("online",l.onOnline_,l),l}return s.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var i=++this.requestNumber_,o={r:i,a:e,b:t};this.log_(r.stringify(o)),r.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[i]=n)},t.prototype.listen=function(e,t,n,i){var o=e.queryIdentifier(),a=e.path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),r.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),r.assert(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");var s={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)},t.prototype.sendListen_=function(e){var n=this,i=e.query,o=i.path.toString(),a=i.queryIdentifier();this.log_("Listen on "+o+" for "+a);var s={p:o};e.tag&&(s.q=i.queryObject(),s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,(function(s){var r=s.d,c=s.s;t.warnOnListenWarnings_(r,i),(n.listens.get(o)&&n.listens.get(o).get(a))===e&&(n.log_("listen response",s),"ok"!==c&&n.removeListen_(o,a),e.onComplete&&e.onComplete(c,r))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&r.contains(e,"w")){var n=r.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',o=t.path.toString();P("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+o+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||r.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=r.isValidFormat(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,(function(n){var i=n.s,o=n.d||"error";e.authToken_===t&&("ok"===i?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(i,o))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),i=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),r.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);var o={p:e};i&&(o.q=n,o.t=i),this.sendRequest("n",o)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,i){var o={p:t,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,(function(e){i&&setTimeout((function(){i(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,i){this.putInternal("p",e,t,n,i)},t.prototype.merge=function(e,t,n,i){this.putInternal("m",e,t,n,i)},t.prototype.putInternal=function(e,t,n,i,o){var a={p:t,d:n};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,(function(i){t.log_(n+" response",i),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),o&&o(i.s,i.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){"ok"!==e.s&&t.log_("reportStats","Error sending stats: "+e.d)}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+r.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):S("Unrecognized action received from server: "+r.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;r.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,a=this,s=this.lastSessionId,c=!1,u=null,l=function(){u?u.close():(c=!0,i())};this.realtime_={close:l,sendRequest:function(e){r.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(t){c?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,u=new Jt(o,a.repoInfo_,a.applicationId_,e,n,i,(function(e){P(e+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),s))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(r.CONSTANTS.NODE_ADMIN&&P(e),l())}))}},t.prototype.interrupt=function(e){k("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){k("Resuming connection for reason: "+e),delete this.interruptReasons_[e],r.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return F(e)})).join("$"):"default";var i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,i=new K(e).toString();if(this.listens.has(i)){var o=this.listens.get(i);n=o.get(t),o.delete(t),0===o.size&&this.listens.delete(i)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){k("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,i;this.tryAuth();try{for(var o=s.__values(this.listens.values()),a=o.next();!a.done;a=o.next()){var r=a.value;try{for(var c=(n=void 0,s.__values(r.values())),u=c.next();!u.done;u=c.next())this.sendListen_(u.value)}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";r.CONSTANTS.NODE_ADMIN?t="admin_node":r.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+zt.replace(/\./g,"-")]=1,r.isMobileCordova()?e["framework.cordova"]=1:r.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Lt.getInstance().currentlyOnline();return r.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(Qt),$t=function(e){function t(t,n,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=i,o.log_=j("p:rest:"),o.listens_={},o}return s.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(r.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,i,o){var a=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var c=t.getListenId_(e,i),u={};this.listens_[c]=u;var l=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",l,(function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(s,n,!1,i),r.safeGet(a.listens_,c)===u&&o(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var i=t.getListenId_(e,n);delete this.listens_[i]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var i=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(o){var a=o&&o.accessToken;a&&(t.auth=a);var s=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+e+"?ns="+i.repoInfo_.namespace+r.querystring(t);i.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){i.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=r.jsonEval(c.responseText)}catch(t){P("Failed to parse JSON response for "+s+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&P("Got unsuccessful REST response for "+s+" Status: "+c.status),n(c.status);n=null}},c.open("GET",s,!0),c.send()}))},t}(Qt),Zt=function(){function e(e,t,n,i){var o=this;if(this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ct,this.persistentConnection_=null,this.stats_=At.getCollection(e),t||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new $t(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{r.stringify(a)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}this.persistentConnection_=new Kt(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,a),this.server_=this.persistentConnection_}i.addTokenChangeListener((function(e){o.server_.refreshAuthToken(e)})),this.statsReporter_=At.getOrCreateReporter(e,(function(){return new xt(o.stats_,o.server_)})),this.transactionsInit_(),this.infoData_=new Rt,this.infoSyncTree_=new Tt({startListening:function(e,t,n,i){var a=[],s=o.infoData_.getNode(e.path);return s.isEmpty()||(a=o.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Tt({startListening:function(e,t,n,i){return o.server_.listen(e,n,t,(function(t,n){var a=i(t,n);o.eventQueue_.raiseEventsForChangedPath(e.path,a)})),[]},stopListening:function(e,t){o.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,i){this.dataUpdateCount++;var o=new K(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var a=[];if(i)if(n){var s=r.map(t,(function(e){return qe(e)}));a=this.serverSyncTree_.applyTaggedQueryMerge(o,s,i)}else{var c=qe(t);a=this.serverSyncTree_.applyTaggedQueryOverwrite(o,c,i)}else if(n){var u=r.map(t,(function(e){return qe(e)}));a=this.serverSyncTree_.applyServerMerge(o,u)}else{var l=qe(t);a=this.serverSyncTree_.applyServerOverwrite(o,l)}var h=o;a.length>0&&(h=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(h,a)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;D(e,(function(e,n){t.updateInfo_(e,n)}))},e.prototype.updateInfo_=function(e,t){var n=new K("/.info/"+e),i=qe(t);this.infoData_.updateSnapshot(n,i);var o=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,o)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,i){var o=this;this.log_("set",{path:e.toString(),value:t,priority:n});var a=this.generateServerValues(),s=qe(t,n),r=this.serverSyncTree_.calcCompleteEventCache(e),c=ot(s,r,a),u=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(e,c,u,!0);this.eventQueue_.queueEvents(l),this.server_.put(e.toString(),s.val(!0),(function(t,n){var a="ok"===t;a||P("set at "+e+" failed: "+t);var s=o.serverSyncTree_.ackUserWrite(u,!a);o.eventQueue_.raiseEventsForChangedPath(e,s),o.callOnCompleteCallback(i,t,n)}));var h=this.abortTransactions_(e);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},e.prototype.update=function(e,t,n){var i=this;this.log_("update",{path:e.toString(),value:t});var o=!0,a=this.generateServerValues(),s={};if(D(t,(function(t,n){o=!1,s[t]=it(e.child(t),qe(n),i.serverSyncTree_,a)})),o)k("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var r=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserMerge(e,s,r);this.eventQueue_.queueEvents(c),this.server_.merge(e.toString(),t,(function(t,o){var a="ok"===t;a||P("update at "+e+" failed: "+t);var s=i.serverSyncTree_.ackUserWrite(r,!a),c=s.length>0?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(c,s),i.callOnCompleteCallback(n,t,o)})),D(t,(function(t){var n=i.abortTransactions_(e.child(t));i.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=new ct;this.onDisconnect_.forEachTree(K.Empty,(function(i,o){var a=it(i,o,e.serverSyncTree_,t);n.remember(i,a)}));var i=[];n.forEachTree(K.Empty,(function(t,n){i=i.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var o=e.abortTransactions_(t);e.rerunTransactions_(o)})),this.onDisconnect_=new ct,this.eventQueue_.raiseEventsForChangedPath(K.Empty,i)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(i,o){"ok"===i&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,i,o)}))},e.prototype.onDisconnectSet=function(e,t,n){var i=this,o=qe(t);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,a){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(n,t,a)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,i){var o=this,a=qe(t,n);this.server_.onDisconnectPut(e.toString(),a.val(!0),(function(t,n){"ok"===t&&o.onDisconnect_.remember(e,a),o.callOnCompleteCallback(i,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var i=this;if(r.isEmpty(t))return k("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(o,a){"ok"===o&&D(t,(function(t,n){var o=qe(n);i.onDisconnect_.remember(e.child(t),o)})),i.callOnCompleteCallback(n,o,a)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Dt(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);D(t,(function(e,t){for(var i=e,o=e.length;o<n+2;o++)i+=" ";console.log(i+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),k.apply(void 0,s.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&J((function(){if("ok"===t)e(null);else{var i=(t||"error").toUpperCase(),o=i;n&&(o+=": "+n);var a=new Error(o);a.code=i,e(a)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new dn(this))},enumerable:!1,configurable:!0}),e}(),en=function(){function e(t){this.indexedFilter_=new vt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,i,o,a){return this.matches(new we(t,n))||(n=Me.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,o,a)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Me.EMPTY_NODE);var i=t.withIndex(this.index_);i=i.updatePriority(Me.EMPTY_NODE);var o=this;return t.forEachChild(Ie,(function(e,t){o.matches(new we(e,t))||(i=i.updateImmediateChild(e,Me.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),tn=function(){function e(e){this.rangedFilter_=new en(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,i,o,a){return this.rangedFilter_.matches(new we(t,n))||(n=Me.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,o,a):this.fullLimitUpdateChild_(e,t,n,o,a)},e.prototype.updateFullNode=function(e,t,n){var i;if(t.isLeafNode()||t.isEmpty())i=Me.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){i=Me.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;o.hasNext()&&a<this.limit_;){var s=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(s.name,s.node),a++}}else{i=(i=t.withIndex(this.index_)).updatePriority(Me.EMPTY_NODE);var r=void 0,c=void 0,u=void 0;if(o=void 0,this.reverse_){o=i.getReverseIterator(this.index_),r=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();u=function(e,t){return l(t,e)}}else o=i.getIterator(this.index_),r=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();a=0;for(var h=!1;o.hasNext();)s=o.getNext(),!h&&u(r,s)<=0&&(h=!0),h&&a<this.limit_&&u(s,c)<=0?a++:i=i.updateImmediateChild(s.name,Me.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,i,o){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var c=e;r.assert(c.numChildren()===this.limit_,"");var u=new we(t,n),l=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(c.hasChild(t)){for(var d=c.getImmediateChild(t),p=i.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===t||c.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);var m=null==p?1:a(p,u);if(h&&!n.isEmpty()&&m>=0)return null!=o&&o.trackChildChange(yt.childChangedChange(t,n,d)),c.updateImmediateChild(t,n);null!=o&&o.trackChildChange(yt.childRemovedChange(t,d));var g=c.updateImmediateChild(t,Me.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=o&&o.trackChildChange(yt.childAddedChange(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?e:h&&a(l,u)>=0?(null!=o&&(o.trackChildChange(yt.childRemovedChange(l.name,l.node)),o.trackChildChange(yt.childAddedChange(t,n))),c.updateImmediateChild(t,n).updateImmediateChild(l.name,Me.EMPTY_NODE)):e},e}(),nn=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:C},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return r.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=i}return this.index_!==Ie&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ie},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new vt(this.getIndex()):this.hasLimit()?new tn(this):new en(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===Ie?t=n.PRIORITY_INDEX:this.index_===Ue?t=n.VALUE_INDEX:this.index_===Se?t=n.KEY_INDEX:(r.assert(this.index_ instanceof ze,"Unrecognized index type!"),t=this.index_.toString()),i[n.ORDER_BY]=r.stringify(t),this.startSet_&&(i[n.START_AT]=r.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+r.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=r.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+r.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),on=function(e){function t(t,n){if(!(t instanceof Zt))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,nn.DEFAULT,!1)||this}return s.__extends(t,e),t.prototype.getKey=function(){return r.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return r.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof K||(null===this.path.getFront()?me("Reference.child",1,e,!1):pe("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){r.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){r.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){r.validateArgCount("Reference.set",1,2,arguments.length),ge("Reference.set",this.path),re("Reference.set",1,e,this.path,!1),r.validateCallback("Reference.set",2,t,!0);var n=new r.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(r.validateArgCount("Reference.update",1,2,arguments.length),ge("Reference.update",this.path),Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,P("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ue("Reference.update",1,e,this.path,!1),r.validateCallback("Reference.update",2,t,!0);var o=new r.Deferred;return this.repo.update(this.path,e,o.wrapCallback(t)),o.promise},t.prototype.setWithPriority=function(e,t,n){if(r.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ge("Reference.setWithPriority",this.path),re("Reference.setWithPriority",1,e,this.path,!1),le("Reference.setWithPriority",2,t,!1),r.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new r.Deferred;return this.repo.setWithPriority(this.path,e,t,i.wrapCallback(n)),i.promise},t.prototype.remove=function(e){return r.validateArgCount("Reference.remove",0,1,arguments.length),ge("Reference.remove",this.path),r.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(r.validateArgCount("Reference.transaction",1,3,arguments.length),ge("Reference.transaction",this.path),r.validateCallback("Reference.transaction",1,e,!1),r.validateCallback("Reference.transaction",2,t,!0),be("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new r.Deferred;"function"==typeof t&&i.promise.catch((function(){}));var o=function(e,n,o){e?i.reject(e):i.resolve(new ve(n,o)),"function"==typeof t&&t(e,n,o)};return this.repo.startTransaction(this.path,e,o,n),i.promise},t.prototype.setPriority=function(e,t){r.validateArgCount("Reference.setPriority",1,2,arguments.length),ge("Reference.setPriority",this.path),le("Reference.setPriority",1,e,!1),r.validateCallback("Reference.setPriority",2,t,!0);var n=new r.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){r.validateArgCount("Reference.push",0,2,arguments.length),ge("Reference.push",this.path),re("Reference.push",1,e,this.path,!0),r.validateCallback("Reference.push",2,t,!0);var n,i=this.repo.serverTime(),o=_e(i),a=this.child(o),s=this.child(o);return n=null!=e?a.set(e,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),a},t.prototype.onDisconnect=function(){return ge("Reference.onDisconnect",this.path),new ye(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Ke);Ke.__referenceConstructor=on,Et.__referenceConstructor=on;var an=function(){this.children={},this.childCount=0,this.value=null},sn=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new an),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n=t instanceof K?t:new K(t),i=this,o=n.getFront();null!==o;)i=new e(o,i,r.safeGet(i.node_.children,o)||new an),o=(n=n.popFront()).getFront();return i},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){r.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;D(this.node_.children,(function(i,o){t(new e(i,n,o))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new K(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),i=r.contains(this.node_.children,e);n&&i?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}(),rn=function(e){return e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT",e}({});Zt.MAX_TRANSACTION_RETRIES_=25,Zt.prototype.transactionsInit_=function(){this.transactionQueueTree_=new sn},Zt.prototype.startTransaction=function(e,t,n,i){this.log_("transaction on "+e);var o=function(){},a=new on(this,e);a.on("value",o);var s={path:e,update:t,onComplete:n,status:null,order:f(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(e);s.currentInputSnapshot=c;var u=s.update(c.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Ye(s.currentInputSnapshot,new on(this,s.path),Ie);s.onComplete(null,!1,l)}}else{ce("transaction failed: Data returned ",u,s.path),s.status=rn.RUN;var h=this.transactionQueueTree_.subTree(e),d=h.getValue()||[];d.push(s),h.setValue(d);var p=void 0;"object"==typeof u&&null!==u&&r.contains(u,".priority")?(p=r.safeGet(u,".priority"),r.assert(se(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(e)||Me.EMPTY_NODE).getPriority().val(),p=p;var m=this.generateServerValues(),g=qe(u,p),b=ot(g,c,m);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=b,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(e,b,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,y),this.sendReadyTransactions_()}},Zt.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Me.EMPTY_NODE},Zt.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);r.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===rn.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},Zt.prototype.sendTransactionQueue_=function(e,t){for(var n=this,i=t.map((function(e){return e.currentWriteId})),o=this.getLatestState_(e,i),a=o,s=o.hash(),c=0;c<t.length;c++){var u=t[c];r.assert(u.status===rn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=rn.SENT,u.retryCount++;var l=K.relativePath(e,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var h=a.val(!0),d=e;this.server_.put(d.toString(),h,(function(i){n.log_("transaction put response",{path:d.toString(),status:i});var o=[];if("ok"===i){for(var a=[],s=0;s<t.length;s++){if(t[s].status=rn.COMPLETED,o=o.concat(n.serverSyncTree_.ackUserWrite(t[s].currentWriteId)),t[s].onComplete){var r=t[s].currentOutputSnapshotResolved,c=new on(n,t[s].path),u=new Ye(r,c,Ie);a.push(t[s].onComplete.bind(null,null,!0,u))}t[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,o),s=0;s<a.length;s++)J(a[s])}else{if("datastale"===i)for(s=0;s<t.length;s++)t[s].status=t[s].status===rn.SENT_NEEDS_ABORT?rn.NEEDS_ABORT:rn.RUN;else for(P("transaction at "+d.toString()+" failed: "+i),s=0;s<t.length;s++)t[s].status=rn.NEEDS_ABORT,t[s].abortReason=i;n.rerunTransactions_(e)}}),s)},Zt.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),i=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(i,n),n},Zt.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],i=[],o=e.filter((function(e){return e.status===rn.RUN})).map((function(e){return e.currentWriteId})),a=0;a<e.length;a++){var s=e[a],c=K.relativePath(t,s.path),u=!1,l=void 0;if(r.assert(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===rn.NEEDS_ABORT)u=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===rn.RUN)if(s.retryCount>=Zt.MAX_TRANSACTION_RETRIES_)u=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var d=e[a].update(h.val());if(void 0!==d){ce("transaction failed: Data returned ",d,s.path);var p=qe(d);"object"==typeof d&&null!=d&&r.contains(d,".priority")||(p=p.updatePriority(h.getPriority()));var m=s.currentWriteId,g=this.generateServerValues(),f=ot(p,h,g);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=f,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(m),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,f,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(m,!0))}else u=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],u&&(e[a].status=rn.COMPLETED,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete))if("nodata"===l){var b=new on(this,e[a].path),y=new Ye(e[a].currentInputSnapshot,b,Ie);n.push(e[a].onComplete.bind(null,null,!1,y))}else n.push(e[a].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<n.length;a++)J(n[a]);this.sendReadyTransactions_()}},Zt.prototype.getAncestorTransactionNode_=function(e){var t,n=this.transactionQueueTree_;for(t=e.getFront();null!==t&&null===n.getValue();)n=n.subTree(t),t=(e=e.popFront()).getFront();return n},Zt.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},Zt.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,i=e.getValue();if(null!==i)for(var o=0;o<i.length;o++)t.push(i[o]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},Zt.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var i=0,o=0;o<n.length;o++)n[o].status!==rn.COMPLETED&&(n[i]=n[o],i++);n.length=i,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},Zt.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),i=this.transactionQueueTree_.subTree(e);return i.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(i),i.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},Zt.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],i=[],o=-1,a=0;a<t.length;a++)t[a].status===rn.SENT_NEEDS_ABORT||(t[a].status===rn.SENT?(r.assert(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=rn.SENT_NEEDS_ABORT,t[a].abortReason="set"):(r.assert(t[a].status===rn.RUN,"Unexpected transaction status in abort"),t[a].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(t[a].currentWriteId,!0)),t[a].onComplete&&n.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?e.setValue(null):t.length=o+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),i),a=0;a<n.length;a++)J(n[a])}};var cn,un=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then((function(e){return n.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';P(e+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},e}(),ln=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),hn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return cn||(cn=new e),cn},e.prototype.interrupt=function(){var e,t,n,i;try{for(var o=s.__values(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var r=a.value;try{for(var c=(n=void 0,s.__values(Object.keys(this.repos_[r]))),u=c.next();!u.done;u=c.next())this.repos_[r][u.value].interrupt()}catch(l){n={error:l}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.resume=function(){var e,t,n,i;try{for(var o=s.__values(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var r=a.value;try{for(var c=(n=void 0,s.__values(Object.keys(this.repos_[r]))),u=c.next();!u.done;u=c.next())this.repos_[r][u.value].resume()}catch(l){n={error:l}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.databaseFromApp=function(e,t,n){var i=n||e.options.databaseURL;void 0===i&&O("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var o,a=ee(i),s=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,s=(a=ee(i="http://"+c+"?ns="+s.namespace)).repoInfo):o=!a.repoInfo.secure;var u=r.CONSTANTS.NODE_ADMIN&&o?new ln:new un(e,t);return fe("Invalid Firebase Database URL",1,a),a.path.isEmpty()||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,e,u).database},e.prototype.deleteRepo=function(e){var t=r.safeGet(this.repos_,e.app.name);t&&r.safeGet(t,e.repoInfo_.toURLString())===e||O("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t,n){var i=r.safeGet(this.repos_,t.name);i||(this.repos_[t.name]=i={});var o=r.safeGet(i,e.toURLString());return o&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Zt(e,this.useRestClient_,t,n),i[e.toURLString()]=o,o},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),dn=function(){function e(e){this.repo_=e,e instanceof Zt||O("Don't call new Database() directly - please use firebase.database()."),this.root_=new on(e,K.Empty),this.INTERNAL=new pn(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),r.validateArgCount("database.ref",0,1,arguments.length),e instanceof on?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),r.validateArgCount(t,1,1,arguments.length);var n=ee(e);fe(t,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&O(t+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&O("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){r.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){r.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}(),pn=function(){function e(e){this.database=e}return e.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){return this.database.checkDeleted_("delete"),hn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},e}(),mn=Object.freeze({__proto__:null,forceLongPolling:function(){Xt.forceDisallow(),Gt.forceAllow()},forceWebSockets:function(){Gt.forceDisallow()},isWebSocketsAvailable:function(){return Xt.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),gn=Kt;Kt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Kt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var fn=Object.freeze({__proto__:null,DataConnection:gn,RealTimeConnection:Jt,hijackHash:function(e){var t=Kt.prototype.put;return Kt.prototype.put=function(n,i,o,a){void 0!==a&&(a=e()),t.call(this,n,i,o,a)},function(){Kt.prototype.put=t}},ConnectionTarget:Z,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){hn.getInstance().forceRestClient(e)}}),bn=dn.ServerValue;function yn(t){zt=t.SDK_VERSION;var n=t.INTERNAL.registerComponent(new u.Component("database",(function(e,t){var n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return hn.getInstance().databaseFromApp(n,i,t)}),"PUBLIC").setServiceProps({Reference:on,Query:Ke,Database:dn,DataSnapshot:Ye,enableLogging:w,INTERNAL:mn,ServerValue:bn,TEST_ACCESS:fn}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.6.11"),r.isNodeSdk()&&(e.exports=n)}yn(a),t.DataSnapshot=Ye,t.Database=dn,t.OnDisconnect=ye,t.Query=Ke,t.Reference=on,t.ServerValue=bn,t.enableLogging=w,t.registerDatabase=yn},"S+S0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mrSG"),o=n("zVF4"),a=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o.Deferred;this.instancesDeferred.set(t,n);try{var i=this.getOrInitializeService(t);i&&n.resolve(i)}catch(a){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=i.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.optional,o=this.normalizeInstanceIdentifier(t.identifier);try{var a=this.getOrInitializeService(o);if(!a){if(n)return null;throw Error("Service "+this.name+" is not available")}return a}catch(s){if(n)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var o=i.__values(this.instancesDeferred.entries()),a=o.next();!a.done;a=o.next()){var s=i.__read(a.value,2),r=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var u=this.getOrInitializeService(c);r.resolve(u)}catch(l){}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}(),r=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=a,t.ComponentContainer=r,t.Provider=s},Wcq6:function(e,t,n){"use strict";var i,o=(i=n("wj3C"))&&"object"==typeof i&&"default"in i?i.default:i;o.registerVersion("firebase","7.18.0","app"),e.exports=o},"q/0M":function(e,t,n){"use strict";function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,r=a.length;s<r;s++,o++)i[o]=a[s];return i}var o;n.r(t),n.d(t,"LogLevel",(function(){return s})),n.d(t,"Logger",(function(){return h})),n.d(t,"setLogLevel",(function(){return d})),n.d(t,"setUserLogHandler",(function(){return p}));var a=[],s=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),r={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((o={})[s.DEBUG]="log",o[s.VERBOSE]="log",o[s.INFO]="info",o[s.WARN]="warn",o[s.ERROR]="error",o),l=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString(),s=u[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[s].apply(console,i(["["+a+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in s))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?r[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.DEBUG],e)),this._logHandler.apply(this,i([this,s.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.VERBOSE],e)),this._logHandler.apply(this,i([this,s.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.INFO],e)),this._logHandler.apply(this,i([this,s.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.WARN],e)),this._logHandler.apply(this,i([this,s.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.ERROR],e)),this._logHandler.apply(this,i([this,s.ERROR],e))},e}();function d(e){a.forEach((function(t){t.setLogLevel(e)}))}function p(e,t){for(var n=function(n){var i=null;t&&t.level&&(i=r[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var r=o.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:s[n].toLowerCase(),message:r,args:o,type:t.name})}},i=0,o=a;i<o.length;i++)n(o[i])}},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n("mrSG"),s=n("zVF4"),r=n("S+S0"),c=n("q/0M"),u=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new s.ErrorFactory("app","Firebase",u),h=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),d=new c.Logger("@firebase/app"),p=function(){function e(e,t,n){var i,o,c=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(e),this.container=new r.ComponentContainer(t.name),this._addComponent(new r.Component("app",(function(){return c}),"PUBLIC"));try{for(var u=a.__values(this.firebase_.INTERNAL.components.values()),l=u.next();!l.done;l=u.next())this._addComponent(l.value)}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){d.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},n=new Map,i={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={}),"object"==typeof o&&null!==o||(o={name:o});var a=o;void 0===a.name&&(a.name="[DEFAULT]");var r=a.name;if("string"!=typeof r||!r)throw l.create("bad-app-name",{appName:String(r)});if(s.contains(t,r))throw l.create("duplicate-app",{appName:r});var c=new e(n,a,i);return t[r]=c,c},app:o,registerVersion:function(e,t,n){var i,o=null!==(i=h[e])&&void 0!==i?i:e;n&&(o+="-"+n);var a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var c=['Unable to register library "'+o+'" with version "'+t+'":'];return a&&c.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),a&&s&&c.push("and"),s&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}u(new r.Component(o+"-version",(function(){return{library:o,version:t}}),"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw l.create("invalid-log-argument",{appName:name});c.setUserLogHandler(e,t)},apps:null,SDK_VERSION:"7.18.0",INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function o(e){if(!s.contains(t,e=e||"[DEFAULT]"))throw l.create("no-app",{appName:e});return t[e]}function u(r){var c,u,h=r.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===r.type?i[h]:null;if(n.set(h,r),"PUBLIC"===r.type){var p=function(e){if(void 0===e&&(e=o()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==r.serviceProps&&s.deepExtend(p,r.serviceProps),i[h]=p,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,r.multipleInstances?e:[])}}try{for(var m=a.__values(Object.keys(t)),g=m.next();!g.done;g=m.next())t[g.value]._addComponent(r)}catch(f){c={error:f}}finally{try{g&&!g.done&&(u=m.return)&&u.call(m)}finally{if(c)throw c.error}}return"PUBLIC"===r.type?i[h]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),o.App=e,i}(p);return t.INTERNAL=a.__assign(a.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){s.deepExtend(t,e)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(s.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,e)};var y=m;!function(e,t){e.INTERNAL.registerComponent(new r.Component("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion("@firebase/app","0.6.10",void 0),e.registerVersion("fire-js","")}(y),t.default=y,t.firebase=y},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mrSG"),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},r=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],o=0;o<e.length;o+=3){var a=e[o],s=o+1<e.length,r=s?e[o+1]:0,c=o+2<e.length,u=c?e[o+2]:0,l=(15&r)<<2|u>>6,h=63&u;c||(h=64,s||(l=64)),i.push(n[a>>2],n[(3&a)<<4|r>>4],n[l],n[h])}return i.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,i=0;n<e.length;){var o=e[n++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){var a=e[n++];t[i++]=String.fromCharCode((31&o)<<6|63&a)}else if(o>239&&o<365){var s=((7&o)<<18|(63&(a=e[n++]))<<12|(63&(r=e[n++]))<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{a=e[n++];var r=e[n++];t[i++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&r)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],o=0;o<e.length;){var a=n[e.charAt(o++)],s=o<e.length?n[e.charAt(o)]:0,r=++o<e.length?n[e.charAt(o)]:64,c=++o<e.length?n[e.charAt(o)]:64;if(++o,null==a||null==s||null==r||null==c)throw Error();i.push(a<<2|s>>4),64!==r&&(i.push(s<<4&240|r>>2),64!==c&&i.push(r<<6&192|c))}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,i))}},e}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var m=function(e){function t(n,i){var o=e.call(this,i)||this;return o.code=n,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return i.__extends(t,e),t}(Error),g=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=t[0]||{},o=this.service+"/"+e,a=this.errors[e],s=a?f(a,i):"Error",r=this.serviceName+": "+s+" ("+o+").",c=new m(o,r),u=0,l=Object.keys(i);u<l.length;u++){var h=l[u];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=i[h])}return c},e}();function f(e,t){return e.replace(b,(function(e,n){var i=t[n];return null!=i?String(i):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function y(e){return JSON.parse(e)}var v=function(e){var t={},n={},i={},o="";try{var a=e.split(".");t=y(u(a[0])||""),n=y(u(a[1])||""),o=a[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:o}},_=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(i=16;i<80;i++)n[i]=4294967295&((h=n[i-3]^n[i-8]^n[i-14]^n[i-16])<<1|h>>>31);var o,a,s=this.chain_[0],r=this.chain_[1],c=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=u^r&(c^u),a=1518500249):(o=r^c^u,a=1859775393):i<60?(o=r&c|u&(r|c),a=2400959708):(o=r^c^u,a=3395469782);var h=(s<<5|s>>>27)+o+l+a+n[i]&4294967295;l=u,u=c,c=4294967295&(r<<30|r>>>2),r=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=0,o=this.buf_,a=this.inbuf_;i<t;){if(0===a)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(o[a]=e.charCodeAt(i),++i,++a===this.blockSize){this.compress_(o),a=0;break}}else for(;i<t;)if(o[a]=e[i],++i,++a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var o=24;o>=0;o-=8)e[i]=this.chain_[n]>>o&255,++i;return e},e}(),w=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var i,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var o=i[n];if(o in e&&"function"==typeof e[o])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(i.next=k),void 0===i.error&&(i.error=k),void 0===i.complete&&(i.complete=k);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?i.error(o.finalError):i.complete()}catch(e){}})),this.observers.push(i),a},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function k(){}function j(e,t,n){var i="";switch(t){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+i+" argument "}t.CONSTANTS=o,t.Deferred=h,t.ErrorFactory=g,t.FirebaseError=m,t.Sha1=_,t.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},t.assert=a,t.assertionError=s,t.async=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=c,t.base64Decode=u,t.base64Encode=function(e){var t=r(e);return c.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new w(e,t);return n.subscribe.bind(n)},t.decode=v,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=j,t.getUA=d,t.isAdmin=function(e){var t=v(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return d().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=d();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!==indexedDB},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=p,t.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return d().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=v(e).claims,n=Math.floor((new Date).getTime()/1e3),i=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?i=t.nbf:t.hasOwnProperty("iat")&&(i=t.iat),o=t.hasOwnProperty("exp")?t.exp:i+86400),!!n&&!!i&&!!o&&n>=i&&n<=o},t.issuedAtTime=function(e){var t=v(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=y,t.map=function(e,t,n){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=t.call(n,e[o],o,e));return i},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},i=0,o=Object.entries(e);i<o.length;i++){var a=o[i];n(a[0],a[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=55296&&o<=56319){var s=o-55296;i++,a(i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(e.charCodeAt(i)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,i){var o;if(i<t?o="at least "+t:i>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+o+".")},t.validateCallback=function(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(j(e,t,i)+"must be a valid function.")},t.validateContextObject=function(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(j(e,t,i)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((function(e,t){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=window.indexedDB.open(i);o.onsuccess=function(){o.result.close(),n||window.indexedDB.deleteDatabase(i),e(!0)},o.onupgradeneeded=function(){n=!1},o.onerror=function(){var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))},t.validateNamespace=function(e,t,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(j(e,t,i)+"must be a valid firebase namespace.")}}}]);